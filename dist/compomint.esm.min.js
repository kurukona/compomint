"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,...t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");let n=Object(e);for(let e=0,r=t.length;e<r;e++){let r=t[e];if(null!=r)for(let e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},writable:!0,configurable:!0}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(e){e&&!e.hasOwnProperty("remove")&&Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})})),"isConnected"in window.Node.prototype||Object.defineProperty(window.Node.prototype,"isConnected",{get:function(){return document.body.contains(this)}});const e={},t={},n=e.tools=e.tools||{},r=e.configs=Object.assign({printExecTime:!1,debug:!1,throwError:!0},e.configs),o=new DOMParser,a=e.tmplCache=e.tmplCache||new Map;a.has("anonymous")||a.set("anonymous",{elements:new Set});const l="content"in document.createElement("template"),c=/(.)^/,i={"'":"\\'","\\":"\\\\","\r":"\\r","\n":"\\n","\t":"\\t","\u2028":"\u2028","\u2029":"\u2029","><":"><","<":"<",">":">"},s=/\>( |\n)+\<|\>( |\n)+|( |\n)+\<|\\|'|\r|\n|\t|\u2028|\u2029/g,p=function(e){if(e.firstElementChild)return e.firstElementChild;const t=e.childNodes;for(let e=0,n=t.length;e<n;e++)if(t[e]instanceof Element)return t[e];return null},d=function(e){return e.childElementCount||Array.prototype.filter.call(e.childNodes,(function(e){return e instanceof Element})).length},f=function(e){for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes[t];8===n.nodeType||3===n.nodeType&&!/\S/.test(n.nodeValue||"")?(e.removeChild(n),t--):1===n.nodeType&&f(n)}},u=function(e){if("number"==typeof e||!isNaN(Number(e)))return document.createTextNode(String(e));if("string"!=typeof e)return document.createTextNode("");try{const t=o.parseFromString(e,"text/html").body;if(1===t.childNodes.length)return t.firstChild;{const e=document.createDocumentFragment();for(;t.firstChild;)e.appendChild(t.firstChild);return e}}catch(t){return document.createTextNode(e)}};e.templateConfig={rules:{style:{pattern:/(\<style id=[\s\S]+?\>[\s\S]+?\<\/style\>)/g,exec:function(e){const t=document.createElement("template");t.innerHTML=e;const n=(t.content||t).querySelector("style");if(!n||!n.id)return"";const r=document.getElementById(n.id);return r&&r.parentNode?.removeChild(r),document.head.appendChild(n),""}},commentArea:{pattern:/##\*([\s\S]+?)##/g,exec:function(e){return""}},preEvaluate:{pattern:/##!([\s\S]+?)##/g,exec:function(e,t){try{new Function("tmplId",e)(t)}catch(e){if(r.throwError)throw console.error(`Template preEvaluate error in "${t}", ${e.name}: ${e.message}`),e;console.warn(`Template preEvaluate error in "${t}", ${e.name}: ${e.message}`)}return""}},interpolate:{pattern:/##=([\s\S]+?)##/g,exec:function(e){return`';\n(() => {let __t, interpolate=${e};\n__p+=((__t=(typeof (interpolate)=='function' ? (interpolate)() : (interpolate)))==null ? '' : String(__t) );})();\n__p+='`}},escape:{pattern:/##-([\s\S]+?)##/g,exec:function(e){return`';\n(() => {let __t, escape=${e};\n__p+=((__t=(compomint.tools.escapeHtml.escape(typeof (escape)=='function' ? (escape)() : (escape))))==null ? '' : String(__t) );})();\n__p+='`}},elementProps:{pattern:/data-co-props="##:([\s\S]+?)##"/g,exec:function(e){return`';\nvar eventId = (__lazyScope.elementPropsArray.length);\n__p+='data-co-props="'+eventId+'"';\n\n__lazyScope.elementPropsArray[eventId] = ${e};\n__p+='`},lazyExec:function(e,t,n,r){t.elementPropsArray.forEach((function(e,t){if(!e)return;const n=r.querySelector(`[data-co-props="${t}"]`);n&&(delete n.dataset.coProps,Object.keys(e).forEach((function(t){n.setAttribute(t,String(e[t]))})))}))}},namedElement:{pattern:/data-co-named-element="##:([\s\S]+?)##"/g,exec:function(e){return`';\nvar eventId = (__lazyScope.namedElementArray.length);\n__p+='data-co-named-element="'+eventId+'"';\n\n__lazyScope.namedElementArray[eventId] = ${e};\n__p+='`},lazyExec:function(e,t,n,o){t.namedElementArray.forEach((function(e,t){const a=o.querySelector(`[data-co-named-element="${t}"]`);a?(delete a.dataset.coNamedElement,n[e]=a):r.debug&&console.warn(`Named element target not found for ID ${t} in template ${n.tmplId}`)}))}},elementRef:{pattern:/data-co-element-ref="##:([\s\S]+?)##"/g,exec:function(e){return`';\nvar eventId = (__lazyScope.elementRefArray.length);\n__p+='data-co-element-ref="'+eventId+'"';\nvar ${e} = null;\n__lazyScope.elementRefArray[eventId] = function(target) {${e} = target;};\n__p+='`},lazyExec:function(e,t,n,o){t.elementRefArray.forEach((function(e,t){const a=o.querySelector(`[data-co-element-ref="${t}"]`);a?(delete a.dataset.coElementRef,e.call(a,a)):r.debug&&console.warn(`Element ref target not found for ID ${t} in template ${n.tmplId}`)}))}},elementLoad:{pattern:/data-co-load="##:([\s\S]+?)##"/g,exec:function(e){const t=e.split("::");return`';\nlet eventId = (__lazyScope.elementLoadArray.length);\n__p+='data-co-load="'+eventId+'"';\n__lazyScope.elementLoadArray[eventId] = {loadFunc: ${t[0]}, customData: ${t[1]}};\n__p+='`},lazyExec:function(e,t,n,o){t.elementLoadArray.forEach((function(t,a){const l=o.querySelector(`[data-co-load="${a}"]`);if(l){delete l.dataset.coLoad;try{t.loadFunc.call(l,l,{data:e,element:l,customData:t.customData,component:n})}catch(e){if(console.error(`Error executing elementLoad function for ID ${a} in template ${n.tmplId}:`,e,t.loadFunc),r.throwError)throw e}}else r.debug&&console.warn(`Element load target not found for ID ${a} in template ${n.tmplId}`)}))}},event:{pattern:/data-co-event="##:([\s\S]+?)##"/g,exec:function(e){const t=e.split(":::");let n="';\n(() => {let eventId = (__lazyScope.eventArray.length);\n__p+='data-co-event=\"'+eventId+'\"';\n";const r=[];for(let e=0,n=t.length;e<n;e++){const n=t[e].split("::");r.push(`{eventFunc: ${n[0]}, $parent: this, customData: ${n[1]}}`)}return n+=`__lazyScope.eventArray[eventId] = [${r.join(",")}];})()\n__p+='`,n},lazyExec:function(e,t,n,o){const a=this,l=a.attacher;l&&t.eventArray.forEach((function(c,i){const s=o.querySelector(`[data-co-event="${i}"]`);if(s){delete s.dataset.coEvent;for(let r=0,i=c.length;r<i;r++){const i=c[r];i.eventFunc&&(Array.isArray(i.eventFunc)?i.eventFunc.forEach((function(r){l(a,e,t,n,o,s,r,i)})):l(a,e,t,n,o,s,i.eventFunc,i))}}else r.debug&&console.warn(`Event target not found for ID ${i} in template ${n.tmplId}`)}))},trigger:function(e,t){const n=new Event(t,{bubbles:!0,cancelable:!0});e.dispatchEvent(n)},attacher:function(e,t,n,o,a,l,c,i){const s=e.trigger,f=p(a),u=1==d(a)?f:null;if(!c)return;const m=[l,null,{data:t,customData:i.customData,element:l,componentElement:u||f?.parentElement,component:o}];if("function"==typeof c)return void l.addEventListener("click",(function(e){e.stopPropagation(),m[1]=e;try{c.call(...m)}catch(e){if(console.error(`Error in event handler for template ${o.tmplId}:`,e,c),r.throwError)throw e}}));const y=c,h=y.triggerName;h&&(o.trigger=o.trigger||{},o.trigger[h]={}),Object.keys(y).forEach((function(e){if("load"!=e)"namedElement"!=e?"triggerName"!=e&&(l.addEventListener(e,(function(t){t.stopPropagation(),m[1]=t;try{y[e].call(...m)}catch(t){if(console.error(`Error in '${e}' event handler for template ${o.tmplId}:`,t,y[e]),r.throwError)throw t}})),h&&s&&(o.trigger[h][e]=function(){s(l,e)})):o[y[e]]=l;else{m[1]=l;try{y[e].call(...m)}catch(t){if(console.error(`Error in 'load' event handler for template ${o.tmplId}:`,t,y[e]),r.throwError)throw t}}}))}},element:{pattern:/##%([\s\S]+?)##/g,exec:function(e){const t=e.split("::");return`';\n(() => {\nlet elementId = (__lazyScope.elementArray.length);\n__p+='<template data-co-tmpl-element-id="'+elementId+'"></template>';\n__lazyScope.elementArray[elementId] = {childTarget: ${t[0]}, nonblocking: ${t[1]||!1}};})();\n__p+='`},lazyExec:function(e,t,n,o){t.elementArray.forEach((function(e,t){const a=e.childTarget,l=e.nonblocking,c=o.querySelector(`template[data-co-tmpl-element-id="${t}"]`);if(!c)return void(r.debug&&console.warn(`Element insertion placeholder not found for ID ${t} in template ${n.tmplId}`));if(!c.parentNode)return void(r.debug&&console.warn(`Element insertion placeholder for ID ${t} in template ${n.tmplId} has no parent.`));const i=function(){if(c&&c.parentNode)try{if(a instanceof Array){const e=document.createDocumentFragment();a.forEach((function(o){if(!o)return;const a=o.element||o;let l=null;if("string"==typeof a||"number"==typeof a)l=u(a);else if("function"==typeof a)l=u(a());else{if(!(a instanceof Node))return void(r.debug&&console.warn(`Invalid item type in element array for ID ${t}, template ${n.tmplId}:`,a));l=a}if(o.beforeAppendTo)try{o.beforeAppendTo()}catch(e){console.error("Error in beforeAppendTo (array item):",e)}l&&e.appendChild(l)})),c.parentNode.replaceChild(e,c),a.forEach((function(e){e&&e.afterAppendTo&&setTimeout((()=>{try{e.afterAppendTo()}catch(e){console.error("Error in afterAppendTo (array item):",e)}}),0)}))}else if("string"==typeof a||"number"==typeof a)c.parentNode.replaceChild(u(a),c);else if("function"==typeof a)c.parentNode.replaceChild(u(a()),c);else if(a&&(a.element||a)instanceof Node){const e=a,t=e.element||e;if(e.beforeAppendTo)try{e.beforeAppendTo()}catch(e){console.error("Error in beforeAppendTo:",e)}c.parentNode.replaceChild(t,c),e.afterAppendTo&&setTimeout((()=>{try{e.afterAppendTo&&e.afterAppendTo()}catch(e){console.error("Error in afterAppendTo:",e)}}),0),e.tmplId&&(e.parentComponent=n)}else r.debug&&console.warn(`Invalid target for element insertion ID ${t}, template ${n.tmplId}:`,a),c.parentNode.removeChild(c)}catch(e){if(console.error(`Error during element insertion for ID ${t}, template ${n.tmplId}:`,e),r.throwError)throw e;if(c&&c.parentNode)try{c.parentNode.removeChild(c)}catch(e){}}else r.debug&&console.warn(`Placeholder for ID ${t} removed before insertion in template ${n.tmplId}.`)};null==l||!1===l?i():setTimeout(i,"number"==typeof l?l:0)}))}},lazyEvaluate:{pattern:/###([\s\S]+?)##/g,exec:function(e){return`';\n__lazyScope.lazyEvaluateArray.push(function(data) {${e}});\n__p+='`},lazyExec:function(e,t,n,o){const a=p(o),l=1==d(o)?a:null;t.lazyEvaluateArray.forEach((function(t,a){try{t.call(l||o,e)}catch(e){if(console.error(`Error in lazyEvaluate block ${a} for template ${n.tmplId}:`,e,t),r.throwError)throw e}}))}},evaluate:{pattern:/##([\s\S]+?)##/g,exec:e=>"';\n"+e+"\n__p+='"}},keys:{dataKeyName:"data",statusKeyName:"status",componentKeyName:"component",i18nKeyName:"i18n"}};const m=function(){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},t=Object.fromEntries(Object.entries(e).map((([e,t])=>[t,e]))),n=function(e){const t=function(t){return e[t]},n=`(?:${Object.keys(e).join("|").replace(/\\/g,"\\\\")})`,r=RegExp(n),o=RegExp(n,"g");return function(e){return e=null==e?"":`${e}`,r.test(e)?e.replace(o,t):e}};return{escape:n(e),unescape:n(t)}}();n.escapeHtml=m;const y=function(e){const t=[],n=[],r={},o={};return Object.keys(e).forEach((function(a){const l=e[a];if(l&&"object"==typeof l&&l.pattern instanceof RegExp&&"function"==typeof l.exec&&(t.push((l.pattern||c).source),n.push(l.exec)),l&&"object"==typeof l&&"function"==typeof l.lazyExec){const e=`${a}Array`;r[e]=l.lazyExec,o[e]=[]}})),{templateRules:e,pattern:new RegExp(t.join("|"),"g"),exec:n,lazyExecKeys:Object.keys(o),lazyExec:r,lazyScopeSeed:JSON.stringify(o)}},h=function(e){return i[e]||i[e.replace(/[ \n]/g,"")]||""},g=y(e.templateConfig.rules),E=e.template=function(o,l,c){let i=e.templateConfig,u=g;c&&(i=Object.assign({},e.templateConfig,c),u=y(i.rules));const E=`\n/* tmplId: ${o} */\n//# sourceURL=http://tmpl//${o.split("-").join("//")}.js\nif (__debugger) {\ndebugger;\n}\nlet __p='';\n__p+='${function(e,t,n){r.printExecTime&&console.time(`tmpl: ${e}`);let o=0,a="";return t.replace(n.pattern,(function(...l){const c=l[0],i=l[l.length-2];let p;a+=t.slice(o,i).replace(s,h);let d=null;if(l.slice(1,-2).some((function(e,t){return void 0!==e&&(p=e,d=t,!0)})),void 0!==p&&null!==d)try{a+=n.exec[d].call(n.templateRules,p,e)}catch(t){if(console.error(`Error executing template rule index ${d} for match "${p}" in template "${e}":`,t),r.throwError)throw t;a+=""}else a+=c.replace(s,h);return o=i+c.length,c})),a+=t.slice(o).replace(s,h),r.printExecTime&&console.timeEnd(`tmpl: ${e}`),a}(o,l,u)}';\nreturn __p;`;let b=null;try{b=new Function(i.keys.dataKeyName,i.keys.statusKeyName,i.keys.componentKeyName,i.keys.i18nKeyName,"compomint","tmpl","__lazyScope","__debugger",E)}catch(e){if(r.throwError){console.error(`Template compilation error in "${o}", ${e.name}: ${e.message}`);try{new Function(i.keys.dataKeyName,i.keys.statusKeyName,i.keys.componentKeyName,i.keys.i18nKeyName,"compomint","tmpl","__lazyScope","__debugger",E)}catch{}throw e}return()=>({})}const $=function(...a){let l,c,s,m;const y=a[0];y&&"object"==typeof y&&(y.$wrapperElement||y.$callback||y.$baseComponent)?(l={...y},c=l.$wrapperElement,delete l.$wrapperElement,s=l.$callback,delete l.$callback,m=l.$baseComponent,delete l.$baseComponent):(l=y,"function"==typeof a[1]?(c=void 0,s=a[1],m=a[2]):(c=a[1],s=a[2],m=a[3]));const h=i.keys.dataKeyName,g=i.keys.statusKeyName,E=JSON.parse(u.lazyScopeSeed),$=Object.assign(m||{},{tmplId:o,element:null,status:m&&m.status||{},replace:function(e){const t=this;t.element&&t.element instanceof Node&&t.element.parentElement?t.element.parentElement.replaceChild(e.element||e,t.element):r.debug&&console.warn(`Cannot replace template "${o}": element not in DOM.`)},remove:function(e=!1){const t=this;if(t.beforeRemove)try{t.beforeRemove()}catch(e){console.error("Error in beforeRemove:",e)}const n=t.element instanceof Node?t.element.parentElement:null;let a=t.element;if(n)if(e){const e=document.createElement("template");n.replaceChild(e,t.element),t.element=e}else n.removeChild(t.element);else r.debug&&console.warn(`Cannot remove template "${o}": element not in DOM.`);if(t.afterRemove)try{t.afterRemove()}catch(e){console.error("Error in afterRemove:",e)}return a},appendTo:function(e){const t=this;if(t.beforeAppendTo)try{t.beforeAppendTo()}catch(e){console.error("Error in beforeAppendTo:",e)}return e&&t.element instanceof Node?e.appendChild(t.element):r.debug&&console.warn(`Cannot append template "${o}": parentElement or scope.element is missing or not a Node.`),t.afterAppendTo&&setTimeout((()=>{try{t.afterAppendTo()}catch(e){console.error("Error in afterAppendTo:",e)}}),0),t},release:function(){},render:function(e){return this},refresh:function(e){return this},reflash:function(e){return this}});$._id||($._id=n.genId(o)),$[h]=l,null==$[g]&&($[g]={});const v=c instanceof Element,_=document.createElement("template");let T=null;r.printExecTime&&console.time(`render: ${o}`);let A=null;try{A=l?b.call(c||null,l,$[g],$,e.i18n[o],e,t,E,r.debug):`<template data-co-empty-template="${o}"></template>`}catch(t){if(r.throwError){console.error(`Runtime error during render of "${o}":`,t.message),console.log("--- Data ---",l,"------------");try{b.call(c||null,l,$[g],$,e.i18n[o],E,!0)}catch{}throw t}return console.warn(`Render failed for "${o}". Returning scope with comment node.`),$.element=document.createComment(`Render Error: ${o}`),$}r.printExecTime&&console.timeEnd(`render: ${o}`),_.innerHTML=A;let N=_.content||_;if("TEMPLATE"==N.tagName&&!_.content){const e=Array.from(N.childNodes);N=document.createDocumentFragment(),e.forEach((e=>N.appendChild(e)))}const S=u.lazyExec;if(l&&u.lazyExecKeys.forEach((function(e){if(E[e]&&E[e].length>0)try{S[e].call(i.rules[e.slice(0,-5)],l,E,$,N)}catch(t){if(r.throwError)throw console.error(`Error during lazy execution of "${e}" for template "${o}":`,t),t}})),v&&c){for(;c.firstChild;)c.removeChild(c.firstChild);$.wrapperElement=c}if((N.querySelector?N.querySelector("style"):null)&&N.querySelector){const e=document.createElement(o);try{const t=e.attachShadow({mode:"open"});for(;N.firstChild;)t.appendChild(N.firstChild);N=e}catch(e){console.error(`Failed to attach shadow DOM for template "${o}":`,e)}}if(N.firstChild&&8==N.firstChild.nodeType)T=N.firstChild;else if(1==d(N)){if(T=p(N),v&&c&&T){if($.beforeAppendTo)try{$.beforeAppendTo()}catch(e){console.error("Error in beforeAppendTo:",e)}c.appendChild(T),$.afterAppendTo&&setTimeout((()=>{try{$.afterAppendTo()}catch(e){console.error("Error in afterAppendTo:",e)}}),0)}}else if(v&&c){if($.beforeAppendTo)try{$.beforeAppendTo()}catch(e){console.error("Error in beforeAppendTo:",e)}c.appendChild(N),$.afterAppendTo&&setTimeout((()=>{try{$.afterAppendTo()}catch(e){console.error("Error in afterAppendTo:",e)}}),0),T=c}else T=N;if(l&&l.$props&&T instanceof Element)for(const e in l.$props)try{const t=l.$props[e];if(e.startsWith("data-")){const n=e.substring(5).replace(/-([a-z])/g,(e=>e[1].toUpperCase()));T.dataset[n]=String(t)}else e in T?T[e]=t:T.setAttribute(e,String(t))}catch(t){console.error(`Error applying prop "${e}" to element in template "${o}":`,t)}if(T instanceof Node&&T.normalize&&T.normalize(),T instanceof Node&&f(T),$.element=T,n.liveReloadSupport)try{n.liveReloadSupport($)}catch(e){console.error("Error in liveReloadSupport:",e)}if(s)try{s.call(c||null,$)}catch(e){if(console.error(`Error in template callback for "${o}":`,e),r.throwError)throw e}return $.release=function(){const e=this,t=Object.getOwnPropertyNames(e),n=[g,"_id"];for(let r=0;r<t.length;r++){const o=t[r];"function"==typeof e[o]||n.includes(o)||delete e[o]}},$.render=function(t){const n=this,o=n.element,a=o instanceof Node?o.parentElement:null,l=n.wrapperElement,c=e.tmpl(n.tmplId);if(!c)return console.error(`Cannot re-render: Template function for "${n.tmplId}" not found.`),n;const i={beforeAppendTo:n.beforeAppendTo,afterAppendTo:n.afterAppendTo,beforeRemove:n.beforeRemove,afterRemove:n.afterRemove,beforeRefresh:n.beforeRefresh,afterRefresh:n.afterRefresh};if(n.beforeRemove)try{n.beforeRemove()}catch(e){console.error("Error in beforeRemove during render:",e)}let s;if(l)s=c(t,l,void 0,n);else if(a&&o instanceof Node)if(s=c(t,void 0,void 0,n),s.element instanceof Node){if(s.beforeAppendTo)try{s.beforeAppendTo()}catch(e){console.error("Error in beforeAppendTo during render:",e)}a.replaceChild(s.element,o),s.afterAppendTo&&setTimeout((()=>{try{s.afterAppendTo()}catch(e){console.error("Error in afterAppendTo during render:",e)}}),0)}else r.debug&&console.warn(`Re-render of "${n.tmplId}" resulted in no element or target was missing.`);else s=c(t,void 0,void 0,n);if(n.afterRemove)try{n.afterRemove()}catch(e){console.error("Error in afterRemove during render:",e)}return Object.assign(s,i),s},$.refresh=function(e){const t=this,n=t[h];if(t.beforeRefresh)try{t.beforeRefresh()}catch(e){console.error("Error in beforeRefresh:",e)}const r=Object.assign({},n||{},e),o=t.render(r);if(t.afterRefresh)try{t.afterRefresh()}catch(e){console.error("Error in afterRefresh:",e)}return o},$.reflash=$.refresh,$};if(Object.defineProperty($,"name",{value:`render_${o}`,writable:!1}),o){const e=r.debug?{renderingFunc:$,source:m.escape(`function ${o}_source (${i.keys.dataKeyName}, ${i.keys.statusKeyName}, ${i.keys.componentKeyName}, ${i.keys.i18nKeyName}, __lazyScope, __debugger) {\n${E}\n}`),templateText:m.escape(l)}:{renderingFunc:$};a.set(o,e);const n=o.split("-");if(n.length>1){const r=n[0];let o=t[r];o||(t[r]=o={});o[n.slice(1).map(((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1))).join("")]=e.renderingFunc}}return $};e.remapTmpl=function(e){Object.keys(e).forEach((function(t){const n=e[t],o=a.get(t);o?(a.set(n,o),r.debug&&console.log(`Remapped template "${t}" to "${n}"`)):r.debug&&console.warn(`Cannot remap template: Old key "${t}" not found in cache.`)}))},e.tmpl=function(e){const t=a.get(e);return t?t.renderingFunc:null};const b=function(e){let t;if(e instanceof Element)return e.tagName,e;if("string"!=typeof e&&(r.debug&&console.warn("safeTemplate received non-string/non-element source:",e),e=""),t=document.createElement("template"),l){const n=e.replace(/<(?!template|\/template|body|\/body|html|\/html|head|\/head|style|\/style|script|\/script|link|\/link|meta|\/meta|!--)/gi,"&lt;");t.innerHTML=n}else{const n=e.replace(/<(?!template|\/template|body|\/body|html|\/html|head|\/head|style|\/style|script|\/script|link|\/link|meta|\/meta|!--)/gi,"&lt;").replace(/<template/g,'<script type="template"').replace(/<\/template>/g,"<\/script>");t.innerHTML=n}return t},$=e.addTmpl=function(e,t,n){let r=t instanceof Element?t.innerHTML:String(t);return r=m.unescape(r.replace(/<!---|--->/gi,"")),E(e,r,n)},v=e.addTmpls=function(e,t,n){"boolean"!=typeof t&&null==n?(n=t,t=!1):t=!!t;const r=b(e);return(r.content||r).querySelectorAll('template[id], script[type="text/template"][id], script[type="text/compomint"][id]').forEach((e=>{const r=e.id;r&&(void 0!==e.dataset.coLoadScript?$(r,e,n)({}):$(r,e,n),t&&e.parentNode&&e.parentNode.removeChild(e))})),r};e.addTmplByUrl=function(e,t,n){n||"function"!=typeof t||(n=t,t={});const r={loadScript:!0,loadStyle:!0,loadLink:!0,templateConfig:void 0},o=Object.assign({},r,t),a=e=>{e.forEach((e=>{if(e){if(e.id){const t=document.getElementById(e.id);t&&t.parentNode?.removeChild(t)}"SCRIPT"===e.tagName||"LINK"===e.tagName||"STYLE"===e.tagName?document.head.appendChild(e):document.body.appendChild(e)}}))},l=e=>new Promise(((t,n)=>{const r="string"==typeof(l=e)?{url:l,option:o}:l&&"object"==typeof l&&l.url?{url:l.url,option:Object.assign({},o,l.option)}:(console.error("Invalid import data format in addTmplByUrl:",l),null);var l;if(!r)return void t();const c=r.url,i=r.option;if(c.endsWith(".js")){const e=A("script",{async:!0,src:c});e.onerror=()=>{console.error(`Failed to load script: ${c}`)},document.head.appendChild(e),t()}else if(c.endsWith(".css")){const e=A("link",{type:"text/css",rel:"stylesheet",href:c});e.onerror=()=>{console.error(`Failed to load stylesheet: ${c}`)},document.head.appendChild(e),t()}else _(c,null,((e,n)=>{if(200===n||0===n)try{((e,t)=>{const n=b(e);v(n,!1,t.tmplSettings);const r=n.content||n;if(t.loadLink){const e=r.querySelectorAll('link[rel="stylesheet"]');a(e)}if(t.loadStyle){const e=r.querySelectorAll("style[id]");a(e)}if(t.loadScript){const e=r.querySelectorAll('script:not([type]), script[type="text/javascript"], script[type="module"]'),t=Array.from(e).filter((e=>{let t=e.parentNode;for(;t;){if("TEMPLATE"===t.nodeName||"SCRIPT"===t.nodeName&&t.type.includes("template"))return!1;t=t.parentNode}return!0})).map((e=>{const t=document.createElement("script");return e.getAttributeNames().forEach((n=>t.setAttribute(n,e.getAttribute(n)))),e.innerHTML&&(t.textContent=e.innerHTML),t}));a(t)}})(e,i)}catch(e){console.error(`Error processing imported HTML from ${c}:`,e)}else console.error(`Failed to fetch template file: ${c} (Status: ${n})`);t()}))})),c=n||(()=>{});if(Array.isArray(e)){if(0===e.length)return void c();Promise.all(e.map(l)).then(c).catch((e=>{console.error("Error loading resources in addTmplByUrl:",e),c()}))}else l(e).then(c).catch((e=>{console.error("Error loading resource in addTmplByUrl:",e),c()}))};const _=function(e,t,n){const r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(200==r.status||0===r.status?n(r.responseText,r.status,r):(404==r.status?console.error(`Error 404: Not Found - ${e}`):r.status>=400?console.error(`HTTP Error ${r.status} for ${e}`):console.error(`Request failed for ${e}`,r.statusText),n(null,r.status,r)))},r.onerror=function(){console.error(`Network error requesting ${e}`),n(null,0,r)},r.ontimeout=function(){console.error(`Request timed out for ${e}`),n(null,408,r)};try{const n=t&&t.method||"GET";r.open(n,e,!0),t?(t.timeout&&(r.timeout=t.timeout),t.headers&&Object.entries(t.headers).forEach((([e,t])=>{r.setRequestHeader(e,t)})),r.send(t.body||null)):r.send()}catch(t){console.error(`Error sending request to ${e}:`,t),n(null,0,r)}};e.i18n={},e.addI18n=function(t,n){if(!t||"string"!=typeof t||!n||"object"!=typeof n)return void console.error("Invalid arguments for addI18n:",t,n);const o=t.split(".");let a=e.i18n;const l=o.length-1;o.forEach((function(o,c){o&&(l===c?(a[o]||(a[o]=function(e){const o=document.documentElement.lang||"en";let a=n[o];return null==a&&(a=e,r.debug&&console.warn(`i18n: Label key ["${t}"] for lang "${o}" is missing. Using default: "${e}"`)),null!=a?String(a):""}),Object.keys(n).filter((e=>n[e]instanceof Object&&!Array.isArray(n[e]))).forEach((r=>{e.addI18n(t+"."+r,n[r])}))):(a[o]||(a[o]={}),a=a[o]))}))},e.addI18ns=function(t){Object.keys(t||{}).forEach((function(n){e.addI18n(n,t[n])}))};let T=0;n.genId=function(e){return T++,e+T};const A=n.genElement=function(e,t={},...n){const r=document.createElement(e);let o={};return"string"==typeof t||t instanceof Node?n.unshift(t):Array.isArray(t)?n=t.concat(n):o=t,Object.keys(o).forEach((function(t){const n=o[t],a="class"===t?"className":t;try{"style"===t&&"object"==typeof n&&null!==n?Object.assign(r.style,n):"dataset"===t&&"object"==typeof n&&null!==n?Object.assign(r.dataset,n):t.startsWith("on")&&"function"==typeof n?r[t.toLowerCase()]=n:a in r?r[a]=n:r.setAttribute(t,String(n))}catch(n){console.error(`Error setting attribute/property "${t}" on <${e}>:`,n)}})),n.forEach((e=>{"string"==typeof e?r.appendChild(document.createTextNode(e)):e instanceof Node&&r.appendChild(e)})),r};n.props=function(...e){if(!e||0===e.length)return"";const t=Object.assign({},...e),n=[];return Object.keys(t).forEach((function(e){const r=t[e];if(r||0===r){const t=String(r).replace(/"/g,"&quot;");n.push(`${e}="${t}"`)}})),n.join(" ")},$("co-Ele","##%compomint.tools.genElement(data[0], data[1])##"),$("co-Element","##\n  data.tag = data.tag || 'div';\n  ##\n  &lt;##=data.tag##\n    ##=data.id ? 'id=\"' + (data.id === true ? component._id : data.id) + '\"' : ''##\n    data-co-props=\"##:data.props##\"\n    data-co-event=\"##:data.event##\"&gt;\n    ##if (typeof data.content === \"string\") {##\n    ##=data.content##\n    ##} else {##\n      ##%data.content##\n    ##}##\n  &lt;/##=data.tag##&gt;");export{e as compomint,t as tmpl};
//# sourceMappingURL=compomint.esm.min.js.map

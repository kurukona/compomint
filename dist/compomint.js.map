{"version":3,"file":"compomint.js","sources":["../src/compomint-core.js"],"sourcesContent":["/*\n * Copyright (c) 2025-present, Choi Sungho\n * Code released under the MIT license\n */\n\n\n(function() {\n  \"use strict\";\n\n  // Polyfill\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n  if (typeof Object.assign != \"function\") {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, \"assign\", {\n      value: function assign(target, ...params) {\n        // .length of function is 2\n        // 'use strict';\n        if (target == null) {\n          // TypeError if undefined or null\n          throw new TypeError(\"Cannot convert undefined or null to object\");\n        }\n        let to = Object(target);\n        for (let index = 0, length = params.length; index < length; index++) {\n          let nextSource = params[index];\n          if (nextSource != null) {\n            // Skip over if undefined or null\n            for (let nextKey in nextSource) {\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n        return to;\n      },\n      writable: true,\n      configurable: true,\n    });\n  }\n\n  // from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md\n\n  (function (arr) {\n    arr.forEach(function (item) {\n      if (!item) return;\n      if (item.hasOwnProperty(\"remove\")) {\n        return;\n      }\n      Object.defineProperty(item, \"remove\", {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: function remove() {\n          if (this.parentNode !== null) {\n            this.parentNode.removeChild(this);\n          }\n        },\n      });\n    });\n  })([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n\n  // https://stackoverflow.com/questions/37588326/reliabilty-of-isconnected-field-in-dom-node\n  (function (supported) {\n    if (supported) return;\n    Object.defineProperty(window.Node.prototype, \"isConnected\", {\n      get: function () {\n        return document.body.contains(this);\n      },\n    });\n  })(\"isConnected\" in window.Node.prototype);\n\n  let root = this;\n  let Compomint = (root.compomint = root.compomint || {});\n  let tmplTool = (Compomint.tmplTool = Compomint.tmplTool || {});\n  let showTime = tmplTool.showTime || false;\n  let debug = tmplTool.debug != undefined ? tmplTool.debug : false;\n  let requestCacheControl = tmplTool.requestCacheControl || true;\n  let throwError =\n    tmplTool.throwError != undefined ? tmplTool.throwError : true;\n  let cachedTmpl = (Compomint.tmplCache = Compomint.tmplCache || new Map());\n  if (!cachedTmpl.has(\"anonymous\")) {\n    cachedTmpl.set(\"anonymous\", { elements: new Set() });\n  }\n  let isSupportTemplateTag = \"content\" in document.createElement(\"template\");\n\n  root.tmpl = {};\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  let noMatch = /(.)^/;\n  let escapes = {\n    \"'\": \"\\\\'\",\n    \"\\\\\": \"\\\\\\\\\",\n    \"\\r\": \"\\\\r\",\n    \"\\n\": \"\\\\n\",\n    \"\\t\": \"\\\\t\",\n    \"\\u2028\": \"\\u2028\",\n    \"\\u2029\": \"\\u2029\",\n    \"><\": \"><\",\n    \"<\": \"<\",\n    \">\": \">\",\n    //'#': '#'\n  };\n\n  let escaper = /\\>( |\\n)+\\<|\\>( |\\n)+|( |\\n)+\\<|\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  let firstElementChild = function (ele) {\n    if (ele.firstElementChild) return ele.firstElementChild;\n    let children = ele.childNodes;\n    for (let i = 0, size = children.length; i < size; i++) {\n      if (children[i] instanceof Element) {\n        return children[i];\n      }\n    }\n    return null;\n  };\n\n  let childNodeCount = function (ele) {\n    return (\n      ele.childElementCount ||\n      Array.prototype.filter.call(ele.childNodes, function (child) {\n        return child instanceof Node;\n      }).length\n    );\n  };\n  let childElementCount = function (ele) {\n    return (\n      ele.childElementCount ||\n      Array.prototype.filter.call(ele.childNodes, function (child) {\n        return child instanceof Element;\n      }).length\n    );\n  };\n  let cleanNode = function (node) {\n    for (let n = 0; n < node.childNodes.length; n++) {\n      let child = node.childNodes[n];\n      if (\n        child.nodeType === 8 ||\n        (child.nodeType === 3 && !/\\S/.test(child.nodeValue))\n      ) {\n        node.removeChild(child);\n        n--;\n      } else if (child.nodeType === 1) {\n        cleanNode(child);\n      }\n    }\n  };\n\n  Compomint.templateSettings = {\n    firstElementChild: firstElementChild,\n    childElementCount: childElementCount,\n    style: {\n      pattern: /(\\<style id=[\\s\\S]+?\\>[\\s\\S]+?\\<\\/style\\>)/g,\n      exec: function (style) {\n        let dumy = document.createElement(\"template\");\n        dumy.innerHTML = style;\n        let styleNode = (dumy.content || dumy).querySelector(\"style\");\n        let oldStyleNode = document.getElementById(styleNode.id);\n        if (oldStyleNode) oldStyleNode.parentNode.removeChild(oldStyleNode);\n        document.head.appendChild(styleNode);\n        return \"\";\n      },\n    },\n    commentArea: {\n      pattern: /#\\\\#([\\s\\S]+?)#\\\\#/g,\n      exec: function (commentArea) {\n        return `'+\\n'##${commentArea}##'+\\n'`;\n      },\n    },\n    preEvaluate: {\n      pattern: /##!([\\s\\S]+?)##/g,\n      exec: function (preEvaluate, tmplId) {\n        new Function(\"tmplId\", preEvaluate)(tmplId);\n        return ``;\n      },\n    },\n    interpolate: {\n      //pattern: /(?:##=|\\$\\{)([\\s\\S]+?)(?:##|\\})/g, // ##=##, ${}\n      pattern: /##=([\\s\\S]+?)##/g, // ##=##, ${}\n      exec: function (interpolate) {\n        let interpolateSyntax = `typeof (interpolate)=='function' ? (interpolate)() : (interpolate)`;\n        return (`';(() => {let interpolate=${interpolate};\\n__p+=((__t=(${interpolateSyntax}))==null?'':__t);})()\\n__p+='`);\n      },\n    },\n    namedElement: {\n      pattern: /data-co-named-element=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (key) {\n        let source = `';\\nvar eventId = (__lazyScope.namedElementArray.length);\\n__p+='data-co-named-element=\\\"'+eventId+'\\\"';\\n\n__lazyScope.namedElementArray[eventId] = ${key};\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        lazyScope.namedElementArray.forEach(function (key, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            '[data-co-named-element=\"' + eventId + '\"]'\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coNamedElement;\n          tmplScope[key] = $elementTrigger;\n        });\n      },\n    },\n    elementRef: {\n      pattern: /data-co-element-ref=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (key) {\n        var source = `';\\nvar eventId = (__lazyScope.elementRefArray.length);\\n__p+='data-co-element-ref=\\\"'+eventId+'\\\"';\nvar ${key} = null;\\n__lazyScope.elementRefArray[eventId] = function(target) {${key} = target;};\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        lazyScope.elementRefArray.forEach(function (func, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            '[data-co-element-ref=\"' + eventId + '\"]'\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coVar;\n          func.call($elementTrigger, $elementTrigger);\n        });\n      },\n    },\n    elementLoad: {\n      pattern: /data-co-load=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (elementLoad) {\n        let elementLoadSplitArray = elementLoad.split(\"::\");\n        let source = `';\\nlet eventId = (__lazyScope.elementLoadArray.length);\\n__p+='data-co-load=\\\"'+eventId+'\\\"';\n__lazyScope.elementLoadArray[eventId] = {loadFunc: ${elementLoadSplitArray[0]}, customData: ${elementLoadSplitArray[1]}};\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        lazyScope.elementLoadArray.forEach(function (elementLoad, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            '[data-co-load=\"' + eventId + '\"]'\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coLoad;\n          let parentElement = $elementTrigger.parentElement;\n          elementLoad.loadFunc.call(\n            $elementTrigger,\n            $elementTrigger,\n            {\n              \"data\": data,\n              \"element\": $elementTrigger,\n              \"customData\": elementLoad.customData,\n              \"parentElement\": parentElement,\n              \"component\": tmplScope,\n            },\n          );\n        });\n      },\n    },\n    event: {\n      pattern: /data-co-event=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (event) {\n        let eventStrArray = event.split(\":::\");\n        let source = `';\\n(() => {let eventId = (__lazyScope.eventArray.length);\\n__p+='data-co-event=\\\"'+eventId+'\\\"';\\n`;\n        let eventArray = new Array();\n        for (let i = 0, size = eventStrArray.length; i < size; i++) {\n          let eventSplitArray = eventStrArray[i].split(\"::\");\n          eventArray.push(\n            `{eventFunc: ${eventSplitArray[0]}, $parent: this, customData: ${eventSplitArray[1]}}`\n          );\n        }\n        source += `__lazyScope.eventArray[eventId] = [${eventArray.join(\",\")}];})()\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        let self = this;\n        let attacher = self.event.attacher;\n        lazyScope.eventArray.forEach(function (selectedArray, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            `[data-co-event=\"${eventId}\"]`\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coEvent;\n          for (let i = 0, size = selectedArray.length; i < size; i++) {\n            let selected = selectedArray[i];\n            if (selectedArray[i].eventFunc) {\n              if (selected.eventFunc instanceof Array) {\n                selected.eventFunc.forEach(function (func) {\n                  attacher(\n                    self, data, lazyScope, tmplScope, wrapper, $elementTrigger,\n                    func,\n                    selected\n                  );\n                });\n              } else {\n                attacher(\n                  self, data, lazyScope, tmplScope, wrapper, $elementTrigger,\n                  selected.eventFunc,\n                  selected\n                );\n              }\n            }\n          }\n        });\n      },\n      trigger: function (target, eventName) {\n        let customEvent = new Event(eventName, {\n          bubbles: true,\n          cancelable: true\n        });\n        target.dispatchEvent(customEvent);\n      },\n      attacher: function (\n        self,\n        data,\n        lazyScope,\n        tmplScope,\n        wrapper,\n        $elementTrigger,\n        eventFunc,\n        eventData\n      ) {\n        let trigger = self.event.trigger;\n        let $childTarget = self.firstElementChild(wrapper);\n        let $targetElement =\n          self.childElementCount(wrapper) == 1 ? $childTarget : null;\n\n        if (!eventFunc) {\n          return;\n        }\n\n        let eventFuncParams = [\n          $elementTrigger,\n          null,\n          {\n            \"data\": data,\n            \"customData\": eventData.customData,\n            \"element\": $elementTrigger,\n            \"componentElement\": $targetElement || $childTarget.parentElement,\n            \"component\": tmplScope,\n          },\n        ];\n\n        if (eventFunc instanceof Function) {\n          $elementTrigger.addEventListener(\"click\", function (event) {\n            event.stopPropagation();\n            eventFuncParams[1] = event;\n            eventFunc.call(...eventFuncParams);\n          });\n          return;\n        }\n        let triggerKey = eventFunc.triggerKey;\n        if (triggerKey) {\n          tmplScope.trigger = tmplScope.trigger || {};\n          tmplScope.trigger[triggerKey] = {};\n        }\n        Object.keys(eventFunc).forEach(function (eventType) {\n          if (eventType == \"load\") {\n            eventFuncParams[1] = $elementTrigger;\n            eventFunc[eventType].call(...eventFuncParams);\n            return;\n          } else if (eventType == \"ref\") {\n            tmplScope[eventFunc[eventType]] = $elementTrigger;\n            return;\n          } else if (eventType == \"triggerKey\") {\n            return;\n          }\n\n          $elementTrigger.addEventListener(eventType, function (event) {\n            event.stopPropagation();\n            eventFuncParams[1] = event;\n            eventFunc[eventType].call(...eventFuncParams);\n          });\n\n          if (triggerKey) {\n            tmplScope.trigger[triggerKey][eventType] = function () {\n              trigger($elementTrigger, eventType);\n            };\n          }\n        });\n      },\n    },\n    element: {\n      pattern: /##%([\\s\\S]+?)##/g,\n      exec: function (target) {\n        let elementSplitArray = target.split(\"::\");\n        let source =\n          `';\\n(() => {let elementId = (__lazyScope.elementArray.length);\\n__p+='<template data-co-tmpl-element-id=\\\"'+elementId+'\\\"></template>';\n__lazyScope.elementArray[elementId] = {target: ${elementSplitArray[0]}, nonblocking: ${(elementSplitArray[1] || false)}};})()\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        let self = this;\n        lazyScope.elementArray.forEach(function (ele, elementId) {\n          let childTarget = ele.target;\n          let nonblocking = ele.nonblocking;\n          let $tmplElement = wrapper.querySelector(\n            `template[data-co-tmpl-element-id=\"${elementId}\"]`\n          );\n          if (childTarget instanceof Array) {\n            let docFragment = document.createDocumentFragment();\n            childTarget.forEach(function (child) {\n              if (!child) return;\n              let childElement = child.element || child;\n              if (typeof childElement === \"string\") {\n                docFragment.appendChild(\n                  self.element.stringToElement(childElement)\n                );\n              } else if (typeof childElement === \"number\") {\n                docFragment.appendChild(\n                  self.element.stringToElement(childElement)\n                );\n              } else if (typeof childElement === \"function\") {\n                docFragment.appendChild(\n                  self.element.stringToElement(childElement())\n                );\n              } else {\n                docFragment.appendChild(childElement);\n              }\n              if (child.beforeAppendTo) {\n                child.parent = child.parentNode;\n                child.parentScope = tmplScope;\n                if (child.beforeAppendTo) child.beforeAppendTo();\n              }\n            });\n\n            $tmplElement.parentNode.replaceChild(docFragment, $tmplElement);\n            childTarget.forEach(function (child) {\n              if (child && child.afterAppendTo)\n                setTimeout(function () {\n                  child.afterAppendTo();\n                });\n            });\n          } else if (typeof childTarget === \"string\") {\n            $tmplElement.parentNode.replaceChild(\n              self.element.stringToElement(childTarget),\n              $tmplElement\n            );\n          } else if (typeof childTarget === \"number\") {\n            $tmplElement.parentNode.replaceChild(\n              self.element.stringToElement(childTarget),\n              $tmplElement\n            );\n          } else if (typeof childTarget === \"function\") {\n            $tmplElement.parentNode.replaceChild(\n              self.element.stringToElement(childTarget()),\n              $tmplElement\n            );\n          } else if (\n            (childTarget && (childTarget.element || childTarget)) instanceof\n            Element\n          ) {\n            let doFunc = function () {\n              let childElement = childTarget.element || childTarget;\n              let parentNode = $tmplElement.parentNode;\n              let node1 = null;\n              if (childElement instanceof DocumentFragment) {\n                node1 = childElement.firstChild;\n              }\n\n              if (childTarget.beforeAppendTo) childTarget.beforeAppendTo();\n              let replacedNode = parentNode.replaceChild(\n                childElement,\n                $tmplElement\n              );\n              if (childTarget.afterAppendTo)\n                setTimeout(function () {\n                  childTarget.afterAppendTo();\n                });\n              if (childTarget.tmplId) {\n                if (node1) {\n                  childTarget.this = node1.parentNode;\n                }\n                childTarget.parentScope = tmplScope;\n              }\n            };\n            nonblocking == undefined || nonblocking === false\n              ? doFunc()\n              : setTimeout(doFunc, nonblocking);\n          } else {\n            $tmplElement.parentNode.removeChild($tmplElement);\n          }\n        });\n      },\n      stringToElement: function (str) {\n        if (!isNaN(str)) {\n          return document.createTextNode(str);\n        } else if (str && str.startsWith(\"<>\")) {\n          let temp = document.createElement(\"template\");\n          temp.innerHTML = str.replace(\"<>\", \"\");\n          return temp.content;\n        } else {\n          return document.createTextNode(str);\n        }\n      },\n    },\n    lazyEvaluate: {\n      pattern: /###([\\s\\S]+?)##/g,\n      exec: function (lazyEvaluate) {\n        let source = `';\\n__lazyScope.lazyEvaluateArray.push(function(data) {${lazyEvaluate}});\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        let $childTarget = this.firstElementChild(wrapper);\n        let $targetElement =\n          this.childElementCount(wrapper) == 1 ? $childTarget : null;\n        lazyScope.lazyEvaluateArray.forEach(function (selectedFunc, idx) {\n          selectedFunc.call($targetElement || $childTarget.parentElement, data);\n        });\n        return;\n      },\n    },\n    escape: {\n      pattern: /##-([\\s\\S]+?)##/g,\n      exec: function (escape) {\n        return (`'+\\n((__t=(${escape}))==null?'':compomint.tmplTool.escapeHtml.escape(__t))+\\n'`);\n      },\n    },\n    evaluate: {\n      pattern: /##([\\s\\S]+?)##/g,\n      exec: (evaluate) => {\n        return \"';\\n\" + evaluate + \"\\n__p+='\";\n      },\n    },\n    /*\n    normal  : {\n      pattern: /([\\s\\S]+?)/g,\n      exec: function(normal) {\n        //console.log(normal);\n        return normal.replace(escaper, escapeFunc);\n      }\n    },\n    */\n    dataKeyName: \"data\",\n    statusKeyName: \"status\",\n    componentKeyName: \"component\",\n    i18nKeyName: \"i18n\",\n  };\n  \n  let escapeHtml = (function () {\n    let escapeMap = {\n      \"&\": \"&amp;\",\n      \"<\": \"&lt;\",\n      \">\": \"&gt;\",\n      '\"': \"&quot;\",\n      \"'\": \"&#x27;\",\n      \"`\": \"&#x60;\",\n      \"\\n\": \"&#10;\",\n    };\n    let unescapeMap = (function () {\n      let unescapeMap = {};\n      Object.keys(escapeMap).forEach(function (ele) {\n        unescapeMap[escapeMap[ele]] = ele;\n      });\n      return unescapeMap;\n    })();\n\n    // from underscore.js\n    let createEscaper = function (map) {\n      let escaper = function (match) {\n        return map[match];\n      };\n      let source = `(?:${Object.keys(map).join(\"|\")})`;\n      let testRegexp = RegExp(source);\n      let replaceRegexp = RegExp(source, \"g\");\n      return function (string) {\n        string = string == null ? \"\" : `${string}`;\n        return testRegexp.test(string)\n          ? string.replace(replaceRegexp, escaper)\n          : string;\n      };\n    };\n\n    return {\n      escape: createEscaper(escapeMap),\n      unescape: createEscaper(unescapeMap),\n    };\n  })();\n  tmplTool.escapeHtml = escapeHtml;\n\n  let matcherFunc = function (settings) {\n    let patternArray = new Array();\n    let execArray = new Array();\n    let lazyExecArray = {};\n    let lazyScope = {};\n    let setting = null;\n    Object.keys(settings).forEach(function (key) {\n      setting = settings[key];\n      if (setting.pattern) {\n        patternArray.push((setting.pattern || noMatch).source);\n        execArray.push(setting.exec);\n      }\n      if (setting.lazyExec) {\n        lazyExecArray[`${key}Array`] = setting.lazyExec;\n        lazyScope[`${key}Array`] = new Array();\n      }\n    });\n    return {\n      settings: settings,\n      pattern: new RegExp(patternArray.join(\"|\"), \"g\"),\n      exec: execArray,\n      lazyExecKeys: Object.keys(lazyScope),\n      lazyExec: lazyExecArray,\n      lazyScopeSeed: JSON.stringify(lazyScope),\n    };\n  };\n\n  let escapeFunc = function (match) {\n    return escapes[match] || escapes[match.replace(/[ \\n]/g, \"\")] || \"\";\n  };\n\n  let defaultMatcher = matcherFunc(Compomint.templateSettings);\n\n  let templateParser = function (tmplId, text, matcher) {\n    if (showTime) console.time(`tmpl: ${tmplId}`);\n\n    let index = 0;\n    let source = \"\";\n\n    text.replace(matcher.pattern, function (...params) {\n      //let match = arguments[0];\n      //let offset = arguments[arguments.length-2];\n      let match = params[0];\n      let offset = params[params.length - 2];\n      source += text.slice(index, offset).replace(escaper, escapeFunc);\n      let selected,\n        i = null;\n      //Array.prototype.slice.call(arguments, 1, -2).some(function(value, idx, arr) {\n      params.slice(1, -2).some(function (value, idx, arr) {\n        if (!!value) {\n          selected = value;\n          i = idx;\n          return true;\n        }\n        return false;\n      });\n\n      if (!selected) return match;\n      source += matcher.exec[i].call(matcher.settings, selected, tmplId);\n      index = offset + match.length;\n      return match;\n    });\n\n    if (showTime) console.timeEnd(`tmpl: ${tmplId}`);\n    return source + text.slice(index).replace(escaper, escapeFunc);\n  };\n  \n  // JavaScript micro-templating, similar to John Resig's implementation.\n  let templateBuilder = (Compomint.template = function compomint_templateBuilder(\n    tmplId,\n    templateText,\n    tmplSettings\n  ) {\n    let settings = Compomint.templateSettings;\n    let matcher = defaultMatcher;\n    if (tmplSettings) {\n      settings = Object.assign({}, Compomint.templateSettings, tmplSettings);\n      matcher = matcherFunc(settings);\n    }\n    let source = `/* tmplId: ${tmplId} */\\n//# sourceURL=http://tmpl//${tmplId.split(\"-\").join(\"//\")}.js\\nlet __t,__p='';\n__p+='${templateParser(tmplId, templateText, matcher)}';\\nreturn __p;`;\n    let render = null;\n    try {\n      renderFunc = new Function(\n        settings.dataKeyName,\n        settings.statusKeyName,\n        settings.componentKeyName,\n        settings.i18nKeyName,\n        \"__lazyScope\",\n        source\n      );\n    } catch (e) {\n      let debugErrorLine = function (source, e) {\n        console.log(tmplId, e.lineNumber, e.columnNumber);\n        new Function(\n          settings.dataKeyName,\n          settings.statusKeyName,\n          settings.componentKeyName,\n          settings.i18nKeyName,\n          \"__lazyScope\",\n          source\n        );\n      };\n      if (throwError) {\n        debugErrorLine(source, e);\n        throw e;\n      } else {\n        return;\n      }\n    }\n\n    let tmpl = function compomint_tmpl(data, wrapperElement, callback, tmplScope) {\n      if (wrapperElement instanceof Function) {\n        callback = wrapperElement;\n        wrapperElement = undefined;\n      }\n\n      let dataKeyName = settings.dataKeyName;\n      let statusKeyName = settings.statusKeyName;\n      let lazyScope = JSON.parse(matcher.lazyScopeSeed);\n      tmplScope = Object.assign(tmplScope || {}, {\n        tmplId: tmplId,\n        //_id: tmplTool.genId(tmplId),\n        //[statusKeyName]: {},\n        replace: function (scope) {\n          tmplScope.element.parentElement.replaceChild(\n            scope.element || scope,\n            tmplScope.element\n          );\n        },\n        remove: function (spacer) {\n          if (tmplScope.beforeRemove) tmplScope.beforeRemove();\n          if (tmplScope.element.parentElement) {\n            if (spacer) {\n              let dumy = document.createElement(\"template\");\n              tmplScope.element.parentElement.replaceChild(\n                dumy,\n                tmplScope.element\n              );\n              tmplScope.element = dumy;\n            } else {\n              tmplScope.element.parentElement.removeChild(tmplScope.element);\n            }\n          }\n          if (tmplScope.afterRemove) tmplScope.afterRemove();\n          return tmplScope.element;\n        },\n        appendTo: function (parentElement) {\n          if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n          if (parentElement) parentElement.appendChild(tmplScope.element);\n          if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n          return tmplScope;\n        },\n      });\n      if (!tmplScope._id) {\n        tmplScope._id = tmplTool.genId(tmplId);\n      }\n      tmplScope[dataKeyName] = data;\n      if (tmplScope[statusKeyName] == undefined) tmplScope[statusKeyName] = {};\n      let hasParent = wrapperElement ? true : false;\n      let temp = document.createElement(\"template\");\n      let returnTarget = null;\n\n      if (showTime) console.time(`render: ${tmplId}`);\n\n      let html = null;\n      try {\n        html = !data\n          ? `<template></template>`\n          : renderFunc.call(\n              wrapperElement,\n              data,\n              tmplScope[statusKeyName],\n              tmplScope,\n              Compomint.i18n[tmplId],\n              lazyScope,\n            );\n      } catch (e) {\n        let debugErrorLine = function (source) {\n          console.log(`Error: ${tmplId}`);\n          renderFunc.call(\n            wrapperElement,\n            data,\n            tmplScope[statusKeyName],\n            tmplScope,\n            Compomint.i18n[tmplId],\n            lazyScope,\n          );\n        };\n        if (throwError) {\n          debugErrorLine(source, e);\n          throw e;\n        } else {\n          return;\n        }\n      }\n      if (showTime) console.timeEnd(`render: ${tmplId}`);\n\n      temp.innerHTML = html;\n\n      let docFragment = temp.content || temp;\n      if (docFragment.tagName == \"TEMPLATE\") {\n        // for IE11\n        let children = docFragment.children;\n        docFragment = document.createDocumentFragment();\n        Array.prototype.forEach.call(children, function (child) {\n          docFragment.appendChild(child);\n        });\n      }\n      let lazyExec = matcher.lazyExec;\n      if (data)\n        matcher.lazyExecKeys.forEach(function (key) {\n          if (lazyScope[key].length == 0) return;\n          lazyExec[key].call(settings, data, lazyScope, tmplScope, docFragment);\n        });\n\n      if (hasParent) {\n        while (wrapperElement.firstElementChild) {\n          wrapperElement.removeChild(wrapperElement.firstElementChild);\n        }\n        tmplScope.wrapperElement = wrapperElement;\n      }\n\n      if (docFragment.firstChild && docFragment.firstChild.nodeType == 8) {\n        returnTarget = docFragment.firstChild;\n      } else if (childElementCount(docFragment) == 1) {\n        returnTarget = firstElementChild(docFragment);\n        if (hasParent) {\n          if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n          wrapperElement.appendChild(returnTarget);\n          if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n        }\n      } else {\n        if (hasParent) {\n          if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n          wrapperElement.appendChild(docFragment);\n          if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n          returnTarget = wrapperElement;\n        } else {\n          returnTarget = docFragment;\n        }\n      }\n\n      if (data && data.$props) {\n        for (let prop in data.$props) {\n          returnTarget[prop] = data.$props[prop];\n        }\n      }\n\n      returnTarget.normalize();\n      cleanNode(returnTarget);\n      tmplScope.element = returnTarget;\n      if (tmplTool.liveReloadSupport) tmplTool.liveReloadSupport(tmplScope);\n\n      // style to shadow\n      let style = returnTarget.querySelector\n        ? returnTarget.querySelector(\"style[scoped], style[shadow]\")\n        : null;\n      if (style && returnTarget.createShadowRoot) {\n        let shadow = returnTarget.createShadowRoot();\n        document.head.appendChild(style);\n        let styles = \"\";\n        let sheet = style.sheet;\n        for (let i = 0, size = sheet.cssRules.length; i < size; i++) {\n          styles += `::content ${sheet.cssRules[i].cssText.replace(\"::content\", \"\")}`;\n        }\n        style.innerHTML = styles;\n        shadow.appendChild(style);\n        let content = document.createElement(\"content\");\n        content.setAttribute(\"select\", \"*\");\n        shadow.appendChild(content);\n      }\n\n      if (callback) {\n        callback.call(wrapperElement, tmplScope);\n      }\n\n      tmplScope.release = function () {\n        let props = Object.getOwnPropertyNames(tmplScope);\n        props.splice(props.indexOf(statusKeyName), 1);\n        for (let i = 0; i < props.length; i++) {\n          delete tmplScope[props[i]];\n        }\n      };\n\n      tmplScope.render = function (fdata) {\n        let tmplScope = this.tmplScope || this;\n        let target = tmplScope.element;\n        let tmpl = compomint.tmpl(tmplScope.tmplId);\n        let beforeRemove = tmplScope.beforeRemove;\n        let afterRemove = tmplScope.afterRemove;\n        tmplScope.element = void 0;\n        tmplScope.data = void 0;\n        tmplScope.render = void 0;\n        tmplScope.beforeRemove = void 0;\n        tmplScope.afterRemove = void 0;\n\n        if (tmplScope.wrapperElement) {\n          let wrapperElement = tmplScope.wrapperElement;\n          if (beforeRemove) beforeRemove();\n          tmplScope.release();\n          tmplScope = tmpl(fdata, wrapperElement, null, tmplScope);\n          if (afterRemove) afterRemove();\n          return tmplScope;\n        } else {\n          tmplScope.release();\n          tmplScope = tmpl(fdata, null, null, tmplScope);\n          if (target.parentElement) {\n            let newElement = tmplScope.element;\n            if (beforeRemove) beforeRemove();\n            if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n            let replacedNode = target.parentElement.replaceChild(\n              newElement,\n              target\n            );\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            target = void 0;\n            if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n            if (afterRemove) afterRemove();\n          }\n          return tmplScope;\n        }\n      };\n\n      tmplScope.refresh = function (fdata) {\n        let tmplScope = this.tmplScope || this;\n        let target = tmplScope.element;\n        let data = tmplScope.data;\n        if (tmplScope.beforeRefresh) tmplScope.beforeRefresh();\n        let scope = tmplScope.render(Object.assign(data || {}, fdata));\n        if (tmplScope.afterRefresh) tmplScope.afterRefresh();\n        return scope;\n      };\n\n      tmplScope.reflash = tmplScope.refresh;\n\n      return tmplScope;\n    };\n\n    Object.defineProperty(tmpl, \"name\", { value: tmplId, writable: false });\n    //tmpl.source = 'function ' + tmplId + '_source (' + (settings.variable || 'data') + '){\\n' + source + '}';\n    let tmpl_source = `function ${tmplId}_source (${(settings.variable || \"data\")}){\\n${source}}`;\n\n    if (tmplId) {\n      let tmplMeta = {\n        tmpl: tmpl,\n        source: escapeHtml.escape(tmpl_source),\n        templateText: escapeHtml.escape(templateText),\n      };\n      cachedTmpl.set(tmplId, tmplMeta);\n      let tmplIdNames = tmplId.split(\"-\");\n      if (tmplIdNames.length > 1) {\n        let group = tmplIdNames[0];\n        let groupObj = root.tmpl[group];\n        if (!groupObj) {\n          root.tmpl[group] = groupObj = {};\n        }\n        let tmplIdSub = tmplIdNames\n          .slice(1)\n          .join(\"\")\n          .replace(/-([a-z])/g, function (g) {\n            return g[1].toUpperCase();\n          });\n        groupObj[tmplIdSub] = tmplMeta.tmpl;\n      }\n    }\n    return tmpl;\n  });\n\n  Compomint.remapTmpl = function (json) {\n  Object.keys(json).forEach(function (key) {\n    cachedTmpl.set(json[key], cachedTmpl.get(key));\n  });\n  };\n\n  Compomint.tmpl = function (tmplId) {\n  let tmplFunc = cachedTmpl.get(tmplId);\n  return tmplFunc ? tmplFunc.tmpl : null;\n  };\n\n  let safeTemplate = function (source) {\n    let template;\n    if (source.querySelectorAll) {\n      return source;\n    } else if (isSupportTemplateTag) {\n      template = document.createElement(\"template\");\n      //template.innerHTML = source.replace(/(?<=<template[^]*?)<(?=[^]*?<\\/template>)/g, '&lt;');\n      template.innerHTML = source.replace(\n        /<(?!template|\\/template|body|\\/body|html|\\/html|head|\\/head|script|\\/script|link|\\/link|meta|\\/meta|!--)/gi,\n        \"&lt;\"\n      );\n      /*\n      template.innerHTML = source.replace(/<template([\\s\\S]*?)<\\/template>/gi, (match, p1)=>{\n        return `<template${p1.replace(/</g, '&lt;')}</template>`;\n      });\n      */\n    } else {\n      template = document.createElement(\"template\");\n      template.innerHTML = source\n        .replace(\n          /<(?!template|\\/template|body|\\/body|html|\\/html|head|\\/head|script|\\/script|link|\\/link|meta|\\/meta|!--)/gi,\n          \"&lt;\"\n        )\n        .replace(/<template/g, '<script type=\"template\"')\n        .replace(/<\\/template>/g, \"</script>\");\n    }\n    return template;\n  };\n\n  let addTmpl = (tmplTool.addTmpl = function (tmplId, element, tmplSettings) {\n    let templateText = element instanceof Element ? element.innerHTML : element;\n    templateText = escapeHtml.unescape(\n      templateText.replace(/<!---|--->/gi, \"\")\n    );\n    return templateBuilder(tmplId, templateText, tmplSettings);\n  });\n\n  let addTmpls = (tmplTool.addTmpls = function (\n    source,\n    removeInnerTemplate,\n    tmplSettings\n  ) {\n    if (typeof removeInnerTemplate !== \"boolean\" && tmplSettings == undefined)\n      tmplSettings = removeInnerTemplate;\n    let template = safeTemplate(source);\n    let tmplNodes = (template.content || template).querySelectorAll(\n      'template,script[type=\"template\"]'\n    );\n\n    let node = null;\n    for (let i = 0, size = tmplNodes.length; i < size; i++) {\n      node = tmplNodes.item(i);\n      node.dataset.coLoadScript\n        ? addTmpl(node.id, node, tmplSettings)({})\n        : addTmpl(node.id, node, tmplSettings);\n      if (removeInnerTemplate) node.parentNode.removeChild(node);\n    }\n      return template;\n    });\n\n  let addTmplByUrl = (tmplTool.addTmplByUrl = function compomint_addTmplByUrl(\n    importData,\n    option,\n    callback\n  ) {\n    if (!callback && typeof option === \"function\") {\n      callback = option;\n      option = {};\n    }\n    option = Object.assign(\n      { loadScript: true, loadStyle: true, loadLink: true },\n      option\n    );\n\n    let importDataParser = function (obj) {\n      if (typeof obj === \"string\") {\n        return { url: obj, option: option };\n      } else {\n        obj.option = Object.assign({}, option, obj.option);\n        return obj;\n      }\n    };\n    let appendToHead = function (elements) {\n      if (elements && elements.length > 0) {\n        Array.prototype.forEach.call(elements, function (element) {\n          if (element.id) {\n            let oldElement = document.getElementById(element.id);\n            if (oldElement) oldElement.parentNode.removeChild(oldElement);\n          }\n          document.body.appendChild(element);\n        });\n      }\n    };\n    let importFunc = function (source, option) {\n      let template = safeTemplate(source);\n      addTmpls(template, option.tmplSettings);\n      let content = template.content || template;\n      if (option.loadLink) {\n        let links = content.querySelectorAll(\"link\");\n        appendToHead(links);\n      }\n      if (option.loadStyle) {\n        let styles = content.querySelectorAll(\"style[id]\");\n        appendToHead(styles);\n      }\n      if (option.loadScript) {\n        let scripts = content.querySelectorAll(\n          'script[id]:not([type=\"template\"])'\n        );\n        scripts = Array.prototype.filter\n          .call(scripts, function (node) {\n            return node.innerHTML;\n          })\n          .map(function (node) {\n            let scriptText = node.innerHTML;\n            let scriptElm = document.createElement(\"script\");\n            let inlineCode = document.createTextNode(scriptText);\n            scriptElm.appendChild(inlineCode);\n            return scriptElm;\n          });\n        appendToHead(scripts);\n      }\n    };\n\n    if (Array.isArray(importData)) {\n      let arraySize = importData.length;\n      importData.forEach(function (data) {\n        data = importDataParser(data);\n        let src = data.url;\n        if (src.indexOf(\".js\") > -1) {\n          let script = tag(\"script\", { async: true, src: src });\n          script.addEventListener(\"load\", function (event) {\n            arraySize--;\n            if (arraySize == 0 && callback) callback();\n          });\n          document.head.appendChild(script);\n          if (arraySize == 0 && callback) callback();\n        } else if (src.indexOf(\".css\") > -1) {\n          let link = tag(\"link\", {\n            type: \"text/css\",\n            rel: \"stylesheet\",\n            href: src,\n          });\n          document.head.appendChild(link);\n          arraySize--;\n          if (arraySize == 0 && callback) callback();\n        } else {\n          requestFunc(data.url, null, function (source) {\n            importFunc(source, data.option);\n            arraySize--;\n            if (arraySize == 0 && callback) callback();\n          });\n        }\n      });\n    } else {\n      importData = importDataParser(importData);\n      requestFunc(importData, null, function (source) {\n        importFunc(source, importData.option);\n        if (callback) callback();\n      });\n    }\n  });\n\n  let requestFunc = function (url, option, callback) {\n    let xmlhttp = new XMLHttpRequest();\n    /*\n    let stroage = localStorage || sessionStorage;\n    if (requestCacheControl && stroage) {\n      let cacheStatus = JSON.stringify(stroage['compomint.requestCacheStatus'] || '{}');\n      let urlCacheStatus = cacheStatus[url];\n      if (urlCacheStatus) {\n        let lastModified = urlCacheStatus['Last-Modified'];\n        let eTag = urlCacheStatus['ETag'];\n\n      }\n    }\n    */\n    xmlhttp.onreadystatechange = function () {\n      if (xmlhttp.readyState == XMLHttpRequest.DONE) {\n        if (xmlhttp.status == 200 || xmlhttp.status === 0) {\n          callback(xmlhttp.responseText, xmlhttp.status, xmlhttp);\n        } else if (xmlhttp.status == 400) {\n          alert(\"There was an error 400\");\n        } else {\n          console.log(\"!200\", xmlhttp.status, url, option);\n        }\n      }\n    };\n\n    if (option) {\n      xmlhttp.open(option.method || \"GET\", url, true);\n      if (option.timeout) xmlhttp.timeout = option.timeout;\n      if (option.headers)\n        Object.keys(option.headers).forEach(function (key) {\n          xmlhttp.setRequestHeader(key, option.headers[key]);\n        });\n      xmlhttp.send(option.body);\n    } else {\n      xmlhttp.open(\"GET\", url, true);\n      xmlhttp.send();\n    }\n  };\n\n  Compomint.i18n = {};\n  tmplTool.i18n = function (i18nObj, defaultText) {\n    let label = i18nObj[document.documentElement.lang] || defaultText;\n    if (!label) {\n      if (debug)\n        console.log(\n          `Label not exist! (lang: ${document.documentElement.lang})`\n        );\n    }\n    return label;\n  };\n\n  tmplTool.addI18n = function (fullKey, i18nObj) {\n    let langKeyNames = fullKey.split(\".\");\n    let target = Compomint.i18n;\n    let keyLength = langKeyNames.length - 1;\n\n    langKeyNames.forEach(function (key, i) {\n      if (keyLength === i) {\n        if (!target[key]) {\n          target[key] = function (defaultText) {\n            let label = i18nObj[document.documentElement.lang] || defaultText;\n            if (!label) {\n              if (debug) console.log(\"Label key [\" + fullKey + \"] is empty!\");\n            }\n            return label;\n          };\n        }\n\n        Object.keys(i18nObj)\n          .filter((lang) => i18nObj[lang] instanceof Object)\n          .forEach((subKey) => {\n            tmplTool.addI18n(fullKey + \".\" + subKey, i18nObj[subKey]);\n            delete i18nObj[subKey];\n            return;\n          });\n      } else {\n        if (!target[key]) {\n          target[key] = {};\n        }\n        target = target[key];\n      }\n    });\n  };\n  tmplTool.addI18ns = function (i18nObjs) {\n    Object.keys(i18nObjs || {}).forEach(function (key) {\n      tmplTool.addI18n(key, i18nObjs[key]);\n    });\n  };\n\n  let elementCount = 0;\n  tmplTool.genId = function (tmplId) {\n    elementCount++;\n    return tmplId + elementCount;\n  };\n\n  let tag = (tmplTool.tag = function (tagName, attrs) {\n    attrs = attrs || [];\n    let element = document.createElement(tagName);\n    Object.keys(attrs).forEach(function (key) {\n      //element.setAttribute(key, attrs[key]);\n      element[key] = attrs[key];\n    });\n    return element;\n  });\n\n  tmplTool.props = function (...props) {\n    if (!props) return;\n    props = Object.assign(...props);\n    let propStrArray = [];\n    Object.keys(props).forEach(function (key) {\n      if (props[key]) propStrArray.push(key + '=\"' + props[key] + '\"');\n    });\n    return propStrArray.join(\" \");\n  };\n\n  addTmpl(\"co-Tag\", `##%compomint.tmplTool.tag(data[0], data[1])##`);\n  addTmpl(\n    \"co-Div\",\n    `&lt;div ##=data.id ? 'id=\\\"' + (data.data === true ? tmplScope._id : data.id) + '\\\"' : ''## ##=data.class ? 'class=\\\"' + data.class + '\\\"' : '' ## ##=data.style ? 'style=\\\"' + data.style + '\\\"' : '' ## data-co-event=\\\"##:data.event##\\\"&gt;\n      ##if (typeof data.content === \"string\") {##\n      ##=data.content##\n      ##} else {##\n        ##%data.content##\n      ##}##`\n  );\n\n  addTmpl(\n    \"co-Input\",\n    \"&lt;input name=\\\"##=data.name##\\\" type=\\\"##=data.type##\\\" value=\\\"##=data.value##\\\" ##=data.class ? 'class=\\\"' + data.class + '\\\"' : '' ## ##=data.style ? 'style=\\\"' + data.style + '\\\"' : '' ## data-co-event=\\\"##:data.event##\\\"/&gt;\"\n  );\n  addTmpl(\n    \"co-Select\",\n    `&lt;select name=\\\"##=data.name##\\\" value=\\\"##=data.value##\\\" ##=data.class ? 'class=\\\"' + data.class + '\\\"' : '' ## ##=data.style ? 'style=\\\"' + data.style + '\\\"' : '' ## data-co-event=\\\"##:data.event##\\\"&gt;\n      &lt;option class=\"empty\" value=\"\"&gt;##=data.placeholder##&lt;/option&gt;\n      ##%data.options.map(function(option) { '&lt;option value=\\\"' + option.value + '\\\"' + (data.value == option.value ? 'selected=\\\"\\\"' : '') + '&gt;' + option.label + '&lt;/option&gt;'})##\n      &lt;select/&gt;`\n  );\n  addTmpl(\n    \"co-Template-Viewer\",\n    `<style id=\"style-ct-Base\">\n            .ct-Base h1 {\n              font-size: 24px;\n              font-weight: bold;\n            }\n            .ct-Base h2 {\n              font-size: large;\n              font-weight: bold;\n            }\n            .ct-Base .header {\n              padding: 20px;\n              padding-bottom: 0px;\n              margin-top: 10px;\n            }\n            .ct-Base .menu {\n              margin: 10px;\n              margin-top: 50px;\n              border: 1px solid #cccccc;\n            }\n            .ct-Base .menu li {\n              padding: 10px 14px;\n            }\n            .ct-Base .templateArea {\n              margin: 10px;\n              margin-top: 50px;\n              padding: 10px;\n              border: 1px solid #cccccc\n            }\n            .ct-Base .componentView {\n              margin: 10px;\n            }\n            .ct-Base button {\n              padding: 4px 10px;\n              margin: 4px;\n              border-radius: 0.5rem;\n              border: 1px solid #cccccc;\n            }\n            .ct-Base .hide {\n              display: none;\n            }\n            .ct-Base .templateText :not(pre)>code[class*=language-],\n            .ct-Base .templateText pre[class*=language-] {\n              background: #66990015;\n            }\n            .ct-Base .source :not(pre)>code[class*=language-],\n            .ct-Base .source  pre[class*=language-] {\n              background: #0077aa15;\n            }\n          </style>\n          ##\n          let components = data.components;\n          ##\n          <div class=\"ct-Base\">\n            <div class=\"header\">\n              <h1>##=data.label##</h1>\n              <span>##=data.description##</span>\n            </div>\n            <div style=\"display: flex; gap: 8px;\">\n              <ul class=\"menu\" style=\"\">\n                ##Object.keys(components).forEach(key => {##\n                  <li class=\"\"><a href=\"##='#'+key##\">##=key##</a></li>\n                ##})##\n              </ul>\n              <div class=\"content\">\n                ##Object.keys(components).forEach(key => {\n                  let componentScopes = components[key];\n                  let templateMeta = compomint.tmplCache.get(key);\n                ##\n                <div class=\"templateArea\" id=\"##=key##\" style=\"##=location.hash == '' || location.hash == ('#' + key) ? '' : 'display: none'##;\">\n                  <h2><a href=\"##='#'+key##\">##=key##</a></h2>\n                  ##if (templateMeta) {##\n                  <div style=\"display: flex; gap: 8px;\">\n                    <button data-co-event=\"##:() => templateText.classList.toggle('hide')##\">Template source</button>\n                    <button data-co-event=\"##:() => source.classList.toggle('hide')##\">Compiled source</button>\n                  </div>\n                  <hr>\n                  <div class=\"templateText hide\" data-co-element-ref=\"##:templateText##\">\n                    <h2>Template source</h2>\n                    <pre><code class=\"language-javascript\">##=templateMeta.templateText##</code></pre>\n                  </div>\n                  <hr>\n                  <div class=\"source hide\" data-co-element-ref=\"##:source##\">\n                    <h2>Compiled source</h2>\n                    <pre><code class=\"language-javascript\">##=templateMeta.source##</code></pre>\n                  </div>\n                  ##}##\n\n                  ##componentScopes.forEach(scope => {##\n                  <hr>\n                  <div class=\"componentView\">\n                    <pre><code class=\"language-javascript\">##%scope##</code></pre>\n                    ##%new Function('return '+scope+';')()##\n                  </div>\n                  <hr>\n                  ##})##\n                </div>\n                ##})##\n              </div>\n            </div>\n          </div>\n          ###\n          setTimeout(() => {\n            const anchor = document.getElementById(location.hash.replace('#', ''));\n            if (anchor) {\n              window.scrollTo({\n                top: anchor.getBoundingClientRect().top + window.scrollY,\n              })\n            }\n          });\n          window.onhashchange = () => location.reload();\n          ##`\n  );\n  return { compomint: root.compomint, tmpl: root.tmpl };\n}).call(this);"],"names":["Object","assign","defineProperty","value","target","TypeError","to","index","length","arguments","nextSource","undefined","nextKey","prototype","hasOwnProperty","call","writable","configurable","arr","forEach","item","enumerable","remove","parentNode","removeChild","Element","CharacterData","DocumentType","supported","window","Node","get","document","body","contains","root","Compomint","compomint","tmplTool","showTime","debug","requestCacheControl","throwError","cachedTmpl","tmplCache","Map","has","set","elements","Set","isSupportTemplateTag","createElement","tmpl","noMatch","escapes","escaper","firstElementChild","ele","children","childNodes","i","size","childElementCount","Array","filter","child","cleanNode","node","n","nodeType","test","nodeValue","templateSettings","style","pattern","exec","dumy","innerHTML","styleNode","content","querySelector","oldStyleNode","getElementById","id","head","appendChild","commentArea","concat","preEvaluate","tmplId","Function","interpolate","interpolateSyntax","namedElement","key","source","lazyExec","data","lazyScope","tmplScope","wrapper","namedElementArray","eventId","$elementTrigger","dataset","coNamedElement","elementRef","elementRefArray","func","coVar","elementLoad","elementLoadSplitArray","split","elementLoadArray","coLoad","parentElement","loadFunc","customData","event","eventStrArray","eventArray","eventSplitArray","push","join","self","attacher","selectedArray","coEvent","_loop","selected","eventFunc","trigger","eventName","customEvent","Event","bubbles","cancelable","dispatchEvent","eventData","$childTarget","$targetElement","eventFuncParams","addEventListener","stopPropagation","apply","triggerKey","keys","eventType","_eventFunc$eventType","_eventFunc$eventType2","element","elementSplitArray","elementArray","elementId","childTarget","nonblocking","$tmplElement","docFragment","createDocumentFragment","childElement","stringToElement","beforeAppendTo","parent","parentScope","replaceChild","afterAppendTo","setTimeout","doFunc","node1","DocumentFragment","firstChild","str","isNaN","createTextNode","startsWith","temp","replace","lazyEvaluate","lazyEvaluateArray","selectedFunc","idx","escape","evaluate","dataKeyName","statusKeyName","componentKeyName","i18nKeyName","escapeHtml","escapeMap","unescapeMap","createEscaper","map","match","testRegexp","RegExp","replaceRegexp","string","unescape","matcherFunc","settings","patternArray","execArray","lazyExecArray","setting","lazyExecKeys","lazyScopeSeed","JSON","stringify","escapeFunc","defaultMatcher","templateParser","text","matcher","console","time","_len","params","_key","offset","slice","some","timeEnd","templateBuilder","template","compomint_templateBuilder","templateText","tmplSettings","renderFunc","e","debugErrorLine","log","lineNumber","columnNumber","compomint_tmpl","wrapperElement","callback","parse","scope","spacer","beforeRemove","afterRemove","appendTo","_id","genId","hasParent","returnTarget","html","i18n","tagName","$props","prop","normalize","liveReloadSupport","createShadowRoot","shadow","styles","sheet","cssRules","cssText","setAttribute","release","props","getOwnPropertyNames","splice","indexOf","render","fdata","newElement","refresh","beforeRefresh","afterRefresh","reflash","tmpl_source","variable","tmplMeta","tmplIdNames","group","groupObj","tmplIdSub","g","toUpperCase","remapTmpl","json","tmplFunc","safeTemplate","querySelectorAll","addTmpl","addTmpls","removeInnerTemplate","tmplNodes","coLoadScript","addTmplByUrl","compomint_addTmplByUrl","importData","option","loadScript","loadStyle","loadLink","importDataParser","obj","url","appendToHead","oldElement","importFunc","links","scripts","scriptText","scriptElm","inlineCode","isArray","arraySize","src","script","tag","async","link","type","rel","href","requestFunc","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","DONE","status","responseText","alert","open","method","timeout","headers","setRequestHeader","send","i18nObj","defaultText","label","documentElement","lang","addI18n","fullKey","langKeyNames","keyLength","subKey","addI18ns","i18nObjs","elementCount","attrs","_len2","_key2","_toConsumableArray","propStrArray","this"],"mappings":"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"}
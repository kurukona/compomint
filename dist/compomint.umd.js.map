{"version":3,"file":"compomint.umd.js","sources":["../src/utils.ts","../src/default-template-engine.ts","../src/built-in-templates.ts","../src/compomint.ts"],"sourcesContent":["\nconst firstElementChild = function (ele: Element | DocumentFragment): Element | null {\n  if (ele.firstElementChild) return ele.firstElementChild;\n  const children = ele.childNodes;\n  for (let i = 0, size = children.length; i < size; i++) {\n    if (children[i] instanceof Element) {\n      return children[i] as Element;\n    }\n  }\n  return null;\n};\n\nconst childNodeCount = function (ele: Element | DocumentFragment): number {\n  return (\n    ele.childElementCount ||\n    Array.prototype.filter.call(ele.childNodes, function (child: Node) {\n      return child instanceof Node;\n    }).length\n  );\n};\n\nconst childElementCount = function (ele: Element | DocumentFragment): number {\n  return (\n    ele.childElementCount ||\n    Array.prototype.filter.call(ele.childNodes, function (child: Node) {\n      return child instanceof Element;\n    }).length\n  );\n};\n\nconst cleanNode = function (node: Node): void {\n  for (let n = 0; n < node.childNodes.length; n++) {\n    const child = node.childNodes[n];\n    if (\n      child.nodeType === 8 || // Comment node\n      (child.nodeType === 3 && !/\\S/.test(child.nodeValue || '')) // Text node with only whitespace\n    ) {\n      node.removeChild(child);\n      n--; // Adjust index after removal\n    } else if (child.nodeType === 1) {\n      // Element node\n      cleanNode(child); // Recurse\n    }\n  }\n};\n\nconst domParser = new DOMParser();\nconst stringToElement = function (str: string | number): Node {\n  if (typeof str === 'number' || !isNaN(Number(str))) {\n    return document.createTextNode(String(str));\n  } else if (typeof str === 'string') {\n    try {\n      const doc = domParser.parseFromString(str, \"text/html\");\n      const body = doc.body;\n      if (body.childNodes.length === 1) {\n        return body.firstChild!;\n      } else {\n        const fragment = document.createDocumentFragment();\n        while (body.firstChild) {\n          fragment.appendChild(body.firstChild);\n        }\n        return fragment;\n      }\n    } catch (e) {\n      return document.createTextNode(str);\n    }\n  } else {\n    return document.createTextNode('');\n  }\n};\n\nconst isPlainObject = function (value: unknown) {\n  return Object.prototype.toString.call(value) === '[object Object]';\n}\n\nexport {\n  firstElementChild,\n  childNodeCount,\n  childElementCount,\n  cleanNode,\n  stringToElement,\n  isPlainObject,\n};\n","import {\n  ComponentScope,\n  LazyScope,\n  TemplateEngine,\n  TemplateRule,\n  TemplateElement,\n  CompomintConfigs,\n  CompomintGlobal,\n} from \"./type\";\n\nimport {\n  firstElementChild,\n  childElementCount,\n  stringToElement,\n  isPlainObject,\n} from \"./utils\";\n\n//\n// Default template settings\n//\nconst defaultTemplateEngine = (\n  configs: CompomintConfigs,\n  compomint: CompomintGlobal\n): TemplateEngine => ({\n  rules: {\n    style: {\n      pattern: /(\\<style id=[\\s\\S]+?\\>[\\s\\S]+?\\<\\/style\\>)/g,\n      exec: function (style): string {\n        // Create a temporary element to parse the style tag\n        const dumy = document.createElement(\"template\");\n        dumy.innerHTML = style;\n        const styleNode = (dumy.content || dumy).querySelector(\"style\");\n        if (!styleNode || !styleNode.id) return \"\"; // Skip if no style node or ID\n        const oldStyleNode = document.getElementById(styleNode.id);\n        if (oldStyleNode) oldStyleNode.parentNode?.removeChild(oldStyleNode);\n        document.head.appendChild(styleNode);\n        return \"\";\n      },\n    },\n    commentArea: {\n      pattern: /##\\*([\\s\\S]+?)##/g,\n      exec: function (commentArea: string): string {\n        // Return an empty string to remove the comment block\n        return ``;\n      },\n    },\n    preEvaluate: {\n      pattern: /##!([\\s\\S]+?)##/g,\n      exec: function (preEvaluate: string, tmplId: string): string {\n        try {\n          // Execute the code in a new function context\n          new Function(\"compomint\", \"tmplId\", preEvaluate)(compomint, tmplId);\n        } catch (e: any) {\n          if (configs.throwError) {\n            console.error(\n              `Template preEvaluate error in \"${tmplId}\", ${e.name}: ${e.message}`\n            );\n            throw e;\n          } else {\n            console.warn(\n              `Template preEvaluate error in \"${tmplId}\", ${e.name}: ${e.message}`\n            );\n          }\n        }\n        return ``;\n      },\n    },\n    interpolate: {\n      pattern: /##=([\\s\\S]+?)##/g,\n      exec: function (interpolate: string): string {\n        // Construct JavaScript code to interpolate the value\n        const interpolateSyntax = `typeof (interpolate)=='function' ? (interpolate)() : (interpolate)`;\n        return `';\\n{let __t, interpolate=${interpolate};\\n__p+=((__t=(${interpolateSyntax}))==null ? '' : String(__t) );};\\n__p+='`; // Ensure string conversion\n      },\n    },\n    escape: {\n      pattern: /##-([\\s\\S]+?)##/g,\n      exec: function (escape: string): string {\n        const escapeSyntax = `compomint.tools.escapeHtml.escape(typeof (escape)=='function' ? (escape)() : (escape))`;\n        // Construct JavaScript code to escape HTML characters in the value\n        return `';\\n{let __t, escape=${escape};\\n__p+=((__t=(${escapeSyntax}))==null ? '' : String(__t) );};\\n__p+='`; // Ensure string conversion before escape\n      },\n    },\n    elementProps: {\n      pattern: /data-co-props=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (props: string): string {\n        const source = `';\\n{const eventId = (__lazyScope.elementPropsArray.length);\\n__p+='data-co-props=\"'+eventId+'\"';\\n\n__lazyScope.elementPropsArray[eventId] = ${props}};\\n__p+='`; // Store props in lazy scope\n        return source;\n      },\n      lazyExec: function (\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element\n      ): void {\n        // Iterate over stored props and apply them to elements\n        lazyScope.elementPropsArray.forEach(function (\n          props: Record<string, any> | null,\n          eventId: number\n        ) {\n          if (!props) return;\n          // Find the element with the corresponding data-co-props attribute\n          const $elementTrigger = wrapper.querySelector<Element>(\n            `[data-co-props=\"${eventId}\"]`\n          );\n          // Remove the temporary attribute and set the properties\n          if (!$elementTrigger) return;\n          delete ($elementTrigger as HTMLElement).dataset.coProps;\n          Object.keys(props).forEach(function (key: string) {\n            $elementTrigger.setAttribute(key, String(props[key])); // Ensure value is string\n          });\n        });\n      },\n    },\n    namedElement: {\n      pattern: /data-co-named-element=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (key: string): string {\n        const source = `';\\nconst eventId = (__lazyScope.namedElementArray.length);\\n__p+='data-co-named-element=\"'+eventId+'\"';\\n\n__lazyScope.namedElementArray[eventId] = ${key};\\n__p+='`; // Store the key in lazy scope\n        return source;\n      },\n      lazyExec: function (\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element\n      ): void {\n        // Iterate over stored keys and assign elements to the component\n        lazyScope.namedElementArray.forEach(function (\n          key: string,\n          eventId: number\n        ) {\n          // Find the element with the corresponding data-co-named-element attribute\n          const $elementTrigger = wrapper.querySelector<Element>(\n            `[data-co-named-element=\"${eventId}\"]`\n          );\n          // Assign the element to the component using the key\n          if (!$elementTrigger) {\n            if (configs.debug)\n              console.warn(\n                `Named element target not found for ID ${eventId} in template ${component.tmplId}`\n              );\n            return;\n          }\n          delete ($elementTrigger as HTMLElement).dataset.coNamedElement;\n          component[key] = $elementTrigger;\n        });\n      },\n    },\n    elementRef: {\n      pattern: /data-co-element-ref=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (key: string): string {\n        const source = `';\\n{const eventId = (__lazyScope.elementRefArray.length);\\n__p+='data-co-element-ref=\"'+eventId+'\"';\nvar ${key} = null;\\n__lazyScope.elementRefArray[eventId] = function(target) {${key} = target;}};\\n__p+='`; // Store a function to assign the element\n        return source;\n      },\n      lazyExec: function (\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element\n      ): void {\n        // Iterate over stored functions and call them with the corresponding elements\n        lazyScope.elementRefArray.forEach(function (\n          func: (target: Element) => void,\n          eventId: number\n        ) {\n          // Find the element with the corresponding data-co-element-ref attribute\n          const $elementTrigger = wrapper.querySelector<Element>(\n            `[data-co-element-ref=\"${eventId}\"]`\n          );\n          // Call the stored function with the element\n          if (!$elementTrigger) {\n            if (configs.debug)\n              console.warn(\n                `Element ref target not found for ID ${eventId} in template ${component.tmplId}`\n              );\n            return;\n          }\n          delete ($elementTrigger as HTMLElement).dataset.coElementRef;\n          func.call($elementTrigger, $elementTrigger);\n        });\n      },\n    },\n    elementLoad: {\n      pattern: /data-co-load=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (elementLoad: string): string {\n        const elementLoadSplitArray = elementLoad.split(\"::\");\n        // Store the load function and custom data in lazy scope\n        const source = `';\\n{const eventId = (__lazyScope.elementLoadArray.length);\\n__p+='data-co-load=\"'+eventId+'\"';\n__lazyScope.elementLoadArray[eventId] = {loadFunc: ${elementLoadSplitArray[0]}, customData: ${elementLoadSplitArray[1]}};}\\n__p+='`; // 'customData' is determined when compiled, so it does not change even if refreshed.\n        return source;\n      },\n      lazyExec: function (\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element\n      ): void {\n        // Iterate over stored load functions and execute them with the corresponding elements\n        lazyScope.elementLoadArray.forEach(function (\n          elementLoad: { loadFunc: Function; customData: Record<string, any> },\n          eventId: number\n        ) {\n          // Find the element with the corresponding data-co-load attribute\n          const $elementTrigger = wrapper.querySelector<Element>(\n            `[data-co-load=\"${eventId}\"]`\n          );\n          if (!$elementTrigger) {\n            if (configs.debug)\n              console.warn(\n                `Element load target not found for ID ${eventId} in template ${component.tmplId}`\n              );\n            return;\n          }\n          // Execute the load function with the element and context\n          delete ($elementTrigger as HTMLElement).dataset.coLoad;\n          try {\n            if (typeof elementLoad.loadFunc === \"function\") {\n              const loadFuncParams: [\n                Element,\n                Element,\n                {\n                  data: Record<string, any>;\n                  element: Element;\n                  customData: Record<string, any>;\n                  component: ComponentScope;\n                  compomint: CompomintGlobal;\n                }\n              ] = [\n                $elementTrigger,\n                $elementTrigger,\n                {\n                  data: data,\n                  element: $elementTrigger,\n                  customData: elementLoad.customData,\n                  component: component,\n                  compomint: compomint,\n                },\n              ];\n              elementLoad.loadFunc.call(...loadFuncParams);\n            }\n          } catch (e: any) {\n            console.error(\n              `Error executing elementLoad function for ID ${eventId} in template ${component.tmplId}:`,\n              e,\n              elementLoad.loadFunc\n            );\n            if (configs.throwError) throw e;\n          }\n        });\n      },\n    },\n    event: {\n      pattern: /data-co-event=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (event: string): string {\n        const eventStrArray = event.split(\":::\");\n        // eventStrArray = [\"eventFunc::customData\", \"eventFunc::customData\"]\n        // Store event handlers in lazy scope\n        let source = `';\\n{const eventId = (__lazyScope.eventArray.length);\\n__p+='data-co-event=\"'+eventId+'\"';\\n`;\n        const eventArray: string[] = [];\n        for (let i = 0, size = eventStrArray.length; i < size; i++) {\n          const eventSplitArray = eventStrArray[i].split(\"::\");\n          eventArray.push(\n            `{eventFunc: ${eventSplitArray[0]}, $parent: this, customData: ${eventSplitArray[1]}}`\n          );\n        }\n        source += `__lazyScope.eventArray[eventId] = [${eventArray.join(\n          \",\"\n        )}];}\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element\n      ): void {\n        const self = this as TemplateRule; // Cast self to TemplateSettings\n        const attacher = self.attacher;\n        if (!attacher) return; // Guard against missing attacher\n\n        // Iterate over stored event handlers and attach them to elements\n        lazyScope.eventArray.forEach(function (\n          selectedArray: {\n            eventFunc: Function | Record<string, Function>;\n            $parent: any;\n            customData: any;\n          }[],\n          eventId: number\n        ) {\n          // Find the element with the corresponding data-co-event attribute\n          const $elementTrigger = wrapper.querySelector<Element>(\n            `[data-co-event=\"${eventId}\"]`\n          );\n          if (!$elementTrigger) {\n            if (configs.debug)\n              console.warn(\n                `Event target not found for ID ${eventId} in template ${component.tmplId}`\n              ); // Debugging: Log if target not found\n            return;\n          }\n          delete ($elementTrigger as HTMLElement).dataset.coEvent;\n          for (let i = 0, size = selectedArray.length; i < size; i++) {\n            const selected = selectedArray[i];\n            if (selected.eventFunc) {\n              if (Array.isArray(selected.eventFunc)) {\n                selected.eventFunc.forEach(function (func: Function) {\n                  attacher(\n                    self,\n                    data,\n                    lazyScope,\n                    component,\n                    wrapper,\n                    $elementTrigger,\n                    func,\n                    selected\n                  );\n                });\n              } else {\n                attacher(\n                  self,\n                  data,\n                  lazyScope,\n                  component,\n                  wrapper,\n                  $elementTrigger,\n                  selected.eventFunc,\n                  selected\n                );\n              }\n            }\n          }\n        });\n      },\n      trigger: function (target: Element, eventName: string): void {\n        const customEvent = new Event(eventName, {\n          // Dispatch a custom event on the target element\n          bubbles: true,\n          cancelable: true,\n        });\n        target.dispatchEvent(customEvent);\n      },\n      attacher: function (\n        self: any, // Type properly if possible\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element,\n        $elementTrigger: Element,\n        eventFunc: Function | Record<string, Function>,\n        eventData: Record<string, any>\n      ): void {\n        const trigger = self.trigger;\n        const $childTarget = firstElementChild(wrapper);\n        const $targetElement =\n          childElementCount(wrapper) === 1 ? $childTarget : null;\n\n        // Attach event listeners based on the type of eventFunc\n\n        if (!eventFunc) {\n          return;\n        }\n\n        const eventFuncParams: [\n          Element,\n          Event | Element | null,\n          {\n            data: Record<string, any>;\n            customData: any;\n            element: Element;\n            componentElement: Element | null | undefined;\n            component: ComponentScope;\n            compomint: CompomintGlobal;\n          }\n        ] = [\n          $elementTrigger,\n          null,\n          {\n            data: data,\n            customData: eventData.customData,\n            element: $elementTrigger,\n            componentElement: $targetElement || $childTarget?.parentElement,\n            component: component,\n            compomint: compomint,\n          },\n        ];\n\n        // Basic case: eventFunc is a single function\n        if (typeof eventFunc === \"function\") {\n          const eventListener = function (event: Event) {\n            event.stopPropagation();\n            eventFuncParams[1] = event;\n            try {\n              eventFunc.call(...eventFuncParams);\n            } catch (e: any) {\n              console.error(\n                `Error in event handler for template ${component.tmplId}:`,\n                e,\n                eventFunc\n              );\n              if (configs.throwError) throw e;\n            }\n          };\n          // Attach a click event listener for a single function\n          $elementTrigger.addEventListener(\"click\", eventListener);\n          eventData.element = $elementTrigger; // For remove eventListener\n          eventData.eventFunc = eventListener; // For remove eventListener\n\n          return;\n        }\n\n        if (!isPlainObject(eventFunc)) {\n          return;\n        }\n\n        // Advanced case: eventFunc is an object mapping event types to handlers\n        const eventMap = eventFunc as Record<string, Function>;\n        // Handle event map with multiple event types\n        const triggerName = eventMap.triggerName as unknown as\n          | string\n          | undefined; // Optional key to store trigger functions\n        if (triggerName) {\n          component.trigger = component.trigger || {};\n          component.trigger[triggerName] = {};\n        }\n\n        Object.keys(eventMap).forEach(function (eventType: string) {\n          const selectedEventFunc = eventMap[eventType];\n\n          // Handle special event types like \"load\", \"namedElement\", and \"triggerName\"\n          if (eventType === \"load\") {\n            eventFuncParams[1] = $elementTrigger;\n            try {\n              selectedEventFunc.call(...eventFuncParams);\n            } catch (e: any) {\n              console.error(\n                `Error in 'load' event handler for template ${component.tmplId}:`,\n                e,\n                selectedEventFunc\n              );\n              if (configs.throwError) throw e;\n            }\n            return;\n          } else if (eventType === \"namedElement\") {\n            component[selectedEventFunc as unknown as string] = $elementTrigger;\n            return;\n          } else if (eventType === \"triggerName\") {\n            return;\n            // Attach event listeners for other event types\n          }\n\n          const eventListener = function (event: Event) {\n            event.stopPropagation();\n            eventFuncParams[1] = event;\n            try {\n              selectedEventFunc.call(...eventFuncParams);\n            } catch (e: any) {\n              console.error(\n                `Error in '${eventType}' event handler for template ${component.tmplId}:`,\n                e,\n                selectedEventFunc\n              );\n              if (configs.throwError) throw e;\n            }\n          };\n\n          $elementTrigger.addEventListener(eventType, eventListener);\n          eventData.element = $elementTrigger; // For remove eventListener\n          eventFunc[eventType] = eventListener; // For remove eventListener\n\n          if (triggerName && trigger) {\n            component.trigger![triggerName][eventType] = function () {\n              trigger($elementTrigger, eventType);\n            };\n          }\n        });\n      },\n    },\n    element: {\n      pattern: /##%([\\s\\S]+?)##/g,\n      exec: function (target: string): string {\n        // Store element insertion information in lazy scope\n        const elementSplitArray = target.split(\"::\");\n        const source = `';\\n{\nconst elementId = (__lazyScope.elementArray.length);\n__p+='<template data-co-tmpl-element-id=\"'+elementId+'\"></template>';\n__lazyScope.elementArray[elementId] = {childTarget: ${\n          elementSplitArray[0]\n        }, nonblocking: ${elementSplitArray[1] || false}};};\n__p+='`;\n        return source;\n      },\n      lazyExec: function (\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element\n      ): void {\n        const self = this as TemplateRule; // Cast self\n\n        lazyScope.elementArray.forEach(function (\n          ele: { childTarget: any; nonblocking: boolean | number },\n          elementId: number\n        ) {\n          // Retrieve element insertion details from lazy scope\n          const childTarget = ele.childTarget;\n          const nonblocking = ele.nonblocking;\n          // Find the placeholder element\n          const $tmplElement = wrapper.querySelector<TemplateElement>(\n            `template[data-co-tmpl-element-id=\"${elementId}\"]`\n          );\n          // Perform the element insertion\n          if (!$tmplElement) {\n            if (configs.debug)\n              console.warn(\n                `Element insertion placeholder not found for ID ${elementId} in template ${component.tmplId}`\n              );\n            return;\n          }\n          if (!$tmplElement.parentNode) {\n            if (configs.debug)\n              console.warn(\n                `Element insertion placeholder for ID ${elementId} in template ${component.tmplId} has no parent.`\n              );\n            return;\n          }\n\n          const doFunc = function () {\n            if (!$tmplElement || !$tmplElement.parentNode) {\n              if (configs.debug)\n                console.warn(\n                  `Placeholder for ID ${elementId} removed before insertion in template ${component.tmplId}.`\n                );\n              return;\n            }\n\n            // Handle different types of childTarget for insertion\n            try {\n              if (childTarget instanceof Array) {\n                const docFragment = document.createDocumentFragment();\n                childTarget.forEach(function (child: any) {\n                  if (!child) return;\n                  const childElement = child.element || child;\n                  let nodeToAppend: Node | null = null;\n                  // Convert child to a DOM node if necessary\n\n                  if (\n                    typeof childElement === \"string\" ||\n                    typeof childElement === \"number\"\n                  ) {\n                    nodeToAppend = stringToElement(childElement);\n                  } else if (typeof childElement === \"function\") {\n                    nodeToAppend = stringToElement(childElement());\n                  } else if (childElement instanceof Node) {\n                    nodeToAppend = childElement;\n                  } else {\n                    if (configs.debug)\n                      console.warn(\n                        `Invalid item type in element array for ID ${elementId}, template ${component.tmplId}:`,\n                        childElement\n                      );\n                    return;\n                  }\n                  // Append the node to the document fragment\n                  if (child.beforeAppendTo) {\n                    try {\n                      child.beforeAppendTo();\n                    } catch (e) {\n                      console.error(\"Error in beforeAppendTo (array item):\", e);\n                    }\n                  }\n                  if (nodeToAppend) docFragment.appendChild(nodeToAppend);\n                });\n                // Replace the placeholder with the document fragment\n                $tmplElement.parentNode.replaceChild(docFragment, $tmplElement);\n\n                // Call afterAppendTo for each child\n                childTarget.forEach(function (child: any) {\n                  if (child && child.afterAppendTo) {\n                    setTimeout(() => {\n                      try {\n                        child.afterAppendTo();\n                      } catch (e) {\n                        console.error(\n                          \"Error in afterAppendTo (array item):\",\n                          e\n                        );\n                      }\n                    }, 0);\n                  }\n                });\n                // Handle string, number, or function types\n              } else if (\n                typeof childTarget === \"string\" ||\n                typeof childTarget === \"number\"\n              ) {\n                $tmplElement.parentNode.replaceChild(\n                  stringToElement(childTarget),\n                  $tmplElement\n                );\n                // Handle function type\n              } else if (typeof childTarget === \"function\") {\n                $tmplElement.parentNode.replaceChild(\n                  stringToElement(childTarget()),\n                  $tmplElement\n                );\n                // Handle Node or ComponentScope types\n              } else if (\n                childTarget &&\n                (childTarget.element || childTarget) instanceof Node\n              ) {\n                const childScope = childTarget as ComponentScope; // Assume it might be a scope\n                const childElement = childScope.element || childScope;\n\n                // Replace the placeholder with the child element\n                if (childScope.beforeAppendTo) {\n                  try {\n                    childScope.beforeAppendTo();\n                  } catch (e) {\n                    console.error(\"Error in beforeAppendTo:\", e);\n                  }\n                }\n                $tmplElement.parentNode.replaceChild(\n                  childElement,\n                  $tmplElement\n                );\n                // Call afterAppendTo if available\n                if (childScope.afterAppendTo) {\n                  setTimeout(() => {\n                    try {\n                      if (childScope.afterAppendTo) childScope.afterAppendTo();\n                    } catch (e) {\n                      console.error(\"Error in afterAppendTo:\", e);\n                    }\n                  }, 0);\n                }\n                // Set parentComponent if it's a component\n                if (childScope.tmplId) {\n                  childScope.parentComponent = component;\n                }\n                // Handle invalid target types\n              } else {\n                if (configs.debug)\n                  console.warn(\n                    `Invalid target for element insertion ID ${elementId}, template ${component.tmplId}:`,\n                    childTarget\n                  );\n                $tmplElement.parentNode.removeChild($tmplElement);\n              }\n            } catch (e: any) {\n              console.error(\n                `Error during element insertion for ID ${elementId}, template ${component.tmplId}:`,\n                e\n              );\n              if (configs.throwError) throw e;\n              if ($tmplElement && $tmplElement.parentNode) {\n                try {\n                  $tmplElement.parentNode.removeChild($tmplElement);\n                } catch (removeError) {\n                  /* Ignore */\n                }\n              }\n            } // end try\n          }; // end doFunc\n\n          nonblocking === undefined || nonblocking === false\n            ? // Execute immediately or with a delay based on nonblocking\n              doFunc()\n            : setTimeout(\n                doFunc,\n                typeof nonblocking === \"number\" ? nonblocking : 0\n              );\n        }); // end forEach\n      },\n    },\n    lazyEvaluate: {\n      pattern: /###([\\s\\S]+?)##/g,\n      exec: function (lazyEvaluate: string): string {\n        const source = `';\\n__lazyScope.lazyEvaluateArray.push(function(data) {${lazyEvaluate}});\\n__p+='`;\n        // Store the lazy evaluation function in lazy scope\n        return source;\n      },\n      lazyExec: function (\n        data: Record<string, any>,\n        lazyScope: LazyScope,\n        component: ComponentScope,\n        wrapper: DocumentFragment | Element\n      ): void {\n        // Execute stored lazy evaluation functions\n        const $childTarget = firstElementChild(wrapper);\n        const $targetElement =\n          childElementCount(wrapper) === 1 ? $childTarget : null;\n        lazyScope.lazyEvaluateArray.forEach(function (\n          selectedFunc: (data: Record<string, any>) => void,\n          idx: number\n        ) {\n          // Call the function with the appropriate context\n          try {\n            selectedFunc.call($targetElement || wrapper, data); // Use wrapper if multiple elements\n          } catch (e: any) {\n            console.error(\n              `Error in lazyEvaluate block ${idx} for template ${component.tmplId}:`,\n              e,\n              selectedFunc\n            );\n            if (configs.throwError) throw e;\n          }\n        });\n        return;\n      },\n    },\n    evaluate: {\n      pattern: /##([\\s\\S]+?)##/g,\n      exec: (evaluate: string): string => {\n        // Insert arbitrary JavaScript code into the template function\n        return \"';\\n\" + evaluate + \"\\n__p+='\";\n      },\n    },\n    escapeSyntax: {\n      pattern: /#\\\\#([\\s\\S]+?)#\\\\#/g,\n      exec: function (syntax) {\n        return `'+\\n'##${syntax}##'+\\n'`;\n      },\n    },\n  },\n  keys: {\n    dataKeyName: \"data\",\n    statusKeyName: \"status\",\n    componentKeyName: \"component\",\n    i18nKeyName: \"i18n\",\n  },\n});\n\nexport { defaultTemplateEngine };\n","import { CompomintGlobal } from \"./type\";\n\nconst applyBuiltInTemplates = (addTmpl: CompomintGlobal[\"addTmpl\"]): void => {\n  // co-Ele is a shorthand for co-Element, it will generate a div element with the given props and event\n  addTmpl(\n    \"co-Ele\",\n    `<##=data[0]##></##=data[0]##>###compomint.tools.applyElementProps(this, data[1]);##`\n  );\n  addTmpl(\n    \"co-Element\",\n    `##\n  data.tag = data.tag || 'div';\n  ##\n  &lt;##=data.tag##\n    ##=data.id ? 'id=\"' + (data.id === true ? component._id : data.id) + '\"' : ''##\n    data-co-props=\"##:data.props##\"\n    data-co-event=\"##:data.event##\"&gt;\n    ##if (typeof data.content === \"string\") {##\n    ##=data.content##\n    ##} else {##\n      ##%data.content##\n    ##}##\n  &lt;/##=data.tag##&gt;`\n  );\n};\n\nexport { applyBuiltInTemplates };\n","/*\n * Copyright (c) 2025-present, Choi Sungho\n * Code released under the MIT license\n */\n\nimport {\n  CompomintGlobal,\n  ComponentScope,\n  LazyScope,\n  RenderingFunction,\n  TemplateEngine,\n  TemplateMeta,\n  TemplateRule,\n  Tools,\n  TemplateElement,\n  CompomintConfigs,\n} from \"./type\";\nimport { defaultTemplateEngine } from \"./default-template-engine\";\nimport { applyBuiltInTemplates } from \"./built-in-templates\";\nimport { firstElementChild, childElementCount, cleanNode } from \"./utils\";\n\n// Polyfill for Object.assign\nif (typeof Object.assign != \"function\") {\n  Object.defineProperty(Object, \"assign\", {\n    value: function assign(target: any, ...params: any[]) {\n      if (target == null) {\n        throw new TypeError(\"Cannot convert undefined or null to object\");\n      }\n      const to = Object(target);\n      for (let index = 0, length = params.length; index < length; index++) {\n        const nextSource = params[index];\n        if (nextSource != null) {\n          for (let nextKey in nextSource) {\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    },\n    writable: true,\n    configurable: true,\n  });\n}\n\n// Polyfill for ChildNode.remove\n(function (arr: any[]) {\n  arr.forEach(function (item) {\n    if (!item || item.hasOwnProperty(\"remove\")) {\n      return;\n    }\n    Object.defineProperty(item, \"remove\", {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function remove() {\n        if (this.parentNode !== null) {\n          this.parentNode.removeChild(this);\n        }\n      },\n    });\n  });\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n\n// Polyfill for Node.isConnected\n(function (supported: boolean) {\n  if (supported) return;\n  Object.defineProperty(window.Node.prototype, \"isConnected\", {\n    get: function (): boolean {\n      return document.body.contains(this);\n    },\n  });\n})(\"isConnected\" in window.Node.prototype);\n\nconst compomint = {} as CompomintGlobal;\nconst tmpl = {} as Record<string, any>;\nconst tools = (compomint.tools = compomint.tools || ({} as Tools));\nconst configs: CompomintConfigs = (compomint.configs = Object.assign(\n  { printExecTime: false, debug: false, throwError: true },\n  compomint.configs\n));\nconst cachedTmpl = (compomint.tmplCache =\n  compomint.tmplCache || new Map<string, TemplateMeta>());\nif (!cachedTmpl.has(\"anonymous\")) {\n  cachedTmpl.set(\"anonymous\", { elements: new Set() } as TemplateMeta); // Cast to TemplateMeta\n}\nconst isSupportTemplateTag = \"content\" in document.createElement(\"template\");\n\nconst noMatch = /(.)^/;\nconst escapes: Record<string, string> = {\n  \"'\": \"\\\\'\",\n  \"\\\\\": \"\\\\\\\\\",\n  \"\\r\": \"\\\\r\",\n  \"\\n\": \"\\\\n\",\n  \"\\t\": \"\\\\t\",\n  \"\\u2028\": \"\\u2028\",\n  \"\\u2029\": \"\\u2029\",\n  \"><\": \"><\",\n  \"<\": \"<\",\n  \">\": \">\",\n};\n\nconst escaper = /\\>( |\\n)+\\<|\\>( |\\n)+|( |\\n)+\\<|\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n// set default template config\ncompomint.templateEngine = defaultTemplateEngine(configs, compomint);\n\nconst escapeHtml = (function () {\n  const escapeMap: Record<string, string> = {\n    \"&\": \"&amp;\",\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#x27;\", // Use HTML entity for single quote\n    \"`\": \"&#x60;\", // Use HTML entity for backtick\n    //\"\\n\": \"&#10;\", // Keep newline escaping if needed, otherwise remove\n  };\n\n  const unescapeMap: Record<string, string> = Object.keys(escapeMap).reduce(\n    (acc: Record<string, string>, key: string) => {\n      acc[escapeMap[key]] = key;\n      return acc;\n    },\n    {} as Record<string, string>\n  );\n\n  const createEscaper = function (\n    map: Record<string, string>\n  ): (str: string) => string {\n    const escaper = function (match: string): string {\n      return map[match];\n    };\n    const source = `(?:${Object.keys(map).join(\"|\").replace(/\\\\/g, \"\\\\\\\\\")})`; // Escape backslashes if any keys have them\n    const testRegexp = RegExp(source);\n    const replaceRegexp = RegExp(source, \"g\");\n    return function (string: string | null | undefined): string {\n      string = string == null ? \"\" : `${string}`;\n      return testRegexp.test(string)\n        ? string.replace(replaceRegexp, escaper)\n        : string;\n    };\n  };\n\n  return {\n    escape: createEscaper(escapeMap),\n    unescape: createEscaper(unescapeMap),\n  };\n})();\ntools.escapeHtml = escapeHtml;\n\nconst matcherFunc = function (templateRules: Record<string, TemplateRule>): {\n  templateRules: Record<string, TemplateRule>;\n  pattern: RegExp;\n  exec: ((...args: any[]) => string)[];\n  lazyExecKeys: string[];\n  lazyExec: Record<\n    string,\n    (\n      data: Record<string, any>,\n      lazyScope: LazyScope,\n      component: ComponentScope,\n      wrapper: DocumentFragment | Element\n    ) => void\n  >;\n  lazyScopeSeed: string;\n} {\n  const patternArray: string[] = [];\n  const execArray: ((...args: any[]) => string)[] = [];\n  const lazyExecMap: Record<\n    string,\n    (\n      data: Record<string, any>,\n      lazyScope: LazyScope,\n      component: ComponentScope,\n      wrapper: DocumentFragment | Element\n    ) => void\n  > = {};\n  const lazyScopeSeed: Record<string, any[]> = {};\n\n  Object.keys(templateRules).forEach(function (key) {\n    const templateRule = templateRules[key] as TemplateRule | any; // Type assertion\n    if (\n      templateRule &&\n      typeof templateRule === \"object\" &&\n      templateRule.pattern instanceof RegExp &&\n      typeof templateRule.exec === \"function\"\n    ) {\n      patternArray.push((templateRule.pattern || noMatch).source);\n      execArray.push(templateRule.exec);\n    }\n    if (\n      templateRule &&\n      typeof templateRule === \"object\" &&\n      typeof templateRule.lazyExec === \"function\"\n    ) {\n      const arrayKey = `${key}Array`;\n      lazyExecMap[arrayKey] = templateRule.lazyExec;\n      lazyScopeSeed[arrayKey] = [];\n    }\n  });\n  return {\n    templateRules: templateRules,\n    pattern: new RegExp(patternArray.join(\"|\"), \"g\"),\n    exec: execArray,\n    lazyExecKeys: Object.keys(lazyScopeSeed),\n    lazyExec: lazyExecMap,\n    lazyScopeSeed: JSON.stringify(lazyScopeSeed),\n  };\n};\n\nconst escapeFunc = function (match: string): string {\n  return escapes[match] || escapes[match.replace(/[ \\n]/g, \"\")] || \"\";\n};\n\nconst defaultMatcher = matcherFunc(compomint.templateEngine.rules);\n\nconst templateParser = function (\n  tmplId: string,\n  text: string,\n  matcher: ReturnType<typeof matcherFunc>\n): string {\n  if (configs.printExecTime) console.time(`tmpl: ${tmplId}`);\n\n  let index = 0;\n  let source = \"\";\n\n  text.replace(matcher.pattern, function (...params: any[]): string {\n    const match: string = params[0];\n    const offset: number = params[params.length - 2];\n\n    source += text.slice(index, offset).replace(escaper, escapeFunc);\n\n    let selectedMatchContent: string | undefined;\n    let matchIndex: number | null = null;\n\n    params.slice(1, -2).some(function (value: any, idx: number) {\n      if (value !== undefined) {\n        selectedMatchContent = value;\n        matchIndex = idx;\n        return true;\n      }\n      return false;\n    });\n\n    if (selectedMatchContent !== undefined && matchIndex !== null) {\n      try {\n        source += matcher.exec[matchIndex].call(\n          matcher.templateRules,\n          selectedMatchContent,\n          tmplId\n        );\n      } catch (e: any) {\n        console.error(\n          `Error executing template rule index ${matchIndex} for match \"${selectedMatchContent}\" in template \"${tmplId}\":`,\n          e\n        );\n        if (configs.throwError) throw e;\n        source += \"\";\n      }\n    } else {\n      source += match.replace(escaper, escapeFunc);\n    }\n\n    index = offset + match.length;\n    return match;\n  });\n\n  source += text.slice(index).replace(escaper, escapeFunc);\n\n  if (configs.printExecTime) console.timeEnd(`tmpl: ${tmplId}`);\n  return source;\n};\n\nconst templateBuilder = (compomint.template =\n  function compomint_templateBuilder(\n    tmplId: string,\n    templateText: string,\n    customTemplateEngine?: Partial<TemplateEngine>\n  ): RenderingFunction {\n    let templateEngine = compomint.templateEngine;\n    let matcher = defaultMatcher;\n\n    if (customTemplateEngine) {\n      templateEngine = {\n        rules: Object.assign(\n          {},\n          templateEngine.rules,\n          customTemplateEngine.rules || {}\n        ),\n        keys: Object.assign(\n          {},\n          templateEngine.keys,\n          customTemplateEngine.keys || {}\n        ),\n      };\n      matcher = matcherFunc(templateEngine.rules);\n    }\n\n    const source = `\n/* tmplId: ${tmplId} */\n//# sourceURL=http://tmpl//${tmplId.split(\"-\").join(\"//\")}.js\n// if (__debugger) {\n// debugger;\n// }\nlet __p='';\n__p+='${templateParser(tmplId, templateText, matcher)}';\nreturn __p;`;\n\n    let sourceGenFunc: Function | null = null;\n\n    try {\n      sourceGenFunc = new Function(\n        templateEngine.keys.dataKeyName as string,\n        templateEngine.keys.statusKeyName as string,\n        templateEngine.keys.componentKeyName as string,\n        templateEngine.keys.i18nKeyName as string,\n        \"compomint\",\n        \"tmpl\",\n        \"__lazyScope\",\n        \"__debugger\",\n        source\n      );\n    } catch (e: any) {\n      if (configs.throwError) {\n        console.error(\n          `Template compilation error in \"${tmplId}\", ${e.name}: ${e.message}`\n        );\n        try {\n          // Attempt re-run for potential browser debugging\n          new Function(\n            templateEngine.keys.dataKeyName as string,\n            templateEngine.keys.statusKeyName as string,\n            templateEngine.keys.componentKeyName as string,\n            templateEngine.keys.i18nKeyName as string,\n            \"compomint\",\n            \"tmpl\",\n            \"__lazyScope\",\n            \"__debugger\",\n            source\n          );\n        } catch {\n          /* Ignore re-run error */\n        }\n        throw e;\n      } else {\n        return () => ({} as ComponentScope); // Return a dummy function if not throwing\n      }\n    }\n\n    const renderingFunc: RenderingFunction =\n      function compomint_renderingFuncBuilder(...params): ComponentScope {\n        let data: Record<string, any>;\n        let wrapperElement: Element | undefined;\n        let callback: ((component: ComponentScope) => void) | undefined;\n        let baseComponent: Partial<ComponentScope> | undefined;\n\n        // Argument parsing logic\n        const firstArg = params[0];\n        if (\n          firstArg &&\n          typeof firstArg === \"object\" &&\n          (firstArg.$wrapperElement ||\n            firstArg.$callback ||\n            firstArg.$baseComponent)\n        ) {\n          data = { ...firstArg }; // Clone data object\n          wrapperElement = data.$wrapperElement;\n          delete data.$wrapperElement;\n          callback = data.$callback;\n          delete data.$callback;\n          baseComponent = data.$baseComponent;\n          delete data.$baseComponent;\n        } else {\n          data = firstArg;\n          if (typeof params[1] === \"function\") {\n            wrapperElement = undefined;\n            callback = params[1] as (component: ComponentScope) => void;\n            baseComponent = params[2];\n          } else {\n            wrapperElement = params[1];\n            callback = params[2];\n            baseComponent = params[3];\n          }\n        }\n\n        const dataKeyName = templateEngine.keys.dataKeyName as string;\n        const statusKeyName = templateEngine.keys.statusKeyName as string;\n        const lazyScope: LazyScope = JSON.parse(matcher.lazyScopeSeed);\n\n        const component: ComponentScope = Object.assign(baseComponent || {}, {\n          tmplId: tmplId,\n          element: null as any, // Initialize element\n          status: (baseComponent && baseComponent.status) || {}, // Ensure status exists\n          replace: function (newComponent: ComponentScope | Element): void {\n            const self = this as ComponentScope;\n            if (\n              !self.element ||\n              !(self.element instanceof Node) ||\n              !self.element.parentElement\n            ) {\n              if (configs.debug)\n                console.warn(\n                  `Cannot replace template \"${tmplId}\": element not in DOM.`\n                );\n              return;\n            }\n            self.element.parentElement.replaceChild(\n              (newComponent as ComponentScope).element ||\n                (newComponent as Element),\n              self.element as Node\n            );\n          },\n          remove: function (\n            spacer: boolean = false\n          ): Element | TemplateElement | Comment | DocumentFragment {\n            const self = this as ComponentScope;\n            if (self.beforeRemove) {\n              try {\n                self.beforeRemove();\n              } catch (e) {\n                console.error(\"Error in beforeRemove:\", e);\n              }\n            }\n\n            // Remote event event listener\n            // Iterate through all event handlers stored in lazyScope.eventArray\n            if (lazyScope.eventArray) {\n              lazyScope.eventArray.forEach(function (event) {\n                // For each event entry, iterate through its associated event listeners\n                event.forEach(function (selectedEvent: Record<string, any>) {\n                  if (selectedEvent.element) {\n                    if (typeof selectedEvent.eventFunc === \"function\") {\n                      selectedEvent.element.removeEventListener(\n                        \"click\",\n                        selectedEvent.eventFunc as EventListenerOrEventListenerObject\n                      ); // Remove click event listener\n                    } else {\n                      Object.keys(selectedEvent.eventFunc).forEach(function (\n                        eventType\n                      ) {\n                        selectedEvent.element.removeEventListener(\n                          eventType,\n                          (\n                            selectedEvent.eventFunc as Record<\n                              string,\n                              EventListenerOrEventListenerObject\n                            >\n                          )[eventType]\n                        );\n                      });\n                    }\n                    Object.keys(selectedEvent).forEach(\n                      (key) => delete selectedEvent[key]\n                    );\n                  }\n                  // Clear the selectedEvent object to release references\n                });\n              });\n            }\n\n            const parent =\n              self.element instanceof Node ? self.element.parentElement : null;\n            const removedElement:\n              | Element\n              | TemplateElement\n              | Comment\n              | DocumentFragment = self.element; // Store reference\n\n            if (parent) {\n              if (spacer) {\n                const dumy = document.createElement(\"template\");\n                parent.replaceChild(dumy, self.element as Node);\n                self.element = dumy; // Update scope's element reference\n              } else {\n                parent.removeChild(self.element as Node);\n              }\n            } else if (configs.debug) {\n              console.warn(\n                `Cannot remove template \"${tmplId}\": element not in DOM.`\n              );\n            }\n\n            if (self.afterRemove) {\n              try {\n                self.afterRemove();\n              } catch (e) {\n                console.error(\"Error in afterRemove:\", e);\n              }\n            }\n            return removedElement;\n          },\n          appendTo: function (parentElement: Element): ComponentScope {\n            const self = this as ComponentScope;\n            if (self.beforeAppendTo) {\n              try {\n                self.beforeAppendTo();\n              } catch (e) {\n                console.error(\"Error in beforeAppendTo:\", e);\n              }\n            }\n\n            if (parentElement && self.element instanceof Node) {\n              parentElement.appendChild(self.element);\n            } else if (configs.debug) {\n              console.warn(\n                `Cannot append template \"${tmplId}\": parentElement or scope.element is missing or not a Node.`\n              );\n            }\n\n            if (self.afterAppendTo) {\n              setTimeout(() => {\n                try {\n                  self.afterAppendTo!();\n                } catch (e) {\n                  console.error(\"Error in afterAppendTo:\", e);\n                }\n              }, 0);\n            }\n            return self;\n          },\n          release: function (): void {\n            /* Implementation below */\n          },\n          render: function (newData: Record<string, any>): ComponentScope {\n            /* Implementation below */ return this;\n          },\n          refresh: function (reflashData: Record<string, any>): ComponentScope {\n            /* Implementation below */ return this;\n          },\n          reflash: function (reflashData: Record<string, any>): ComponentScope {\n            /* Implementation below */ return this;\n          },\n        } as ComponentScope); // Cast to ComponentScope\n\n        if (!component._id) {\n          component._id = tools.genId(tmplId);\n        }\n        component[dataKeyName] = data;\n        if (component[statusKeyName] == undefined) {\n          component[statusKeyName] = {};\n        }\n\n        const hasParent = wrapperElement instanceof Element;\n        const temp = document.createElement(\"template\");\n\n        if (configs.printExecTime) console.time(`render: ${tmplId}`);\n\n        let returnTarget: Node | null = null;\n        let renderedHTML: string | null = null;\n        try {\n          renderedHTML = !data\n            ? `<template data-co-empty-template=\"${tmplId}\"></template>`\n            : sourceGenFunc!.call(\n                // Use non-null assertion\n                wrapperElement || null,\n                data,\n                component[statusKeyName],\n                component,\n                compomint.i18n[tmplId],\n                compomint,\n                tmpl,\n                lazyScope,\n                configs.debug // Pass debug flag for __debugger\n              );\n        } catch (e: any) {\n          if (configs.throwError) {\n            console.error(\n              `Runtime error during render of \"${tmplId}\":`,\n              e.message\n            );\n            console.log(\"--- Data ---\", data, \"------------\");\n            try {\n              // Attempt re-run with debugger\n              sourceGenFunc!.call(\n                wrapperElement || null,\n                data,\n                component[statusKeyName],\n                component,\n                compomint.i18n[tmplId],\n                lazyScope,\n                true\n              );\n            } catch {\n              /* Ignore */\n            }\n            throw e;\n          } else {\n            console.warn(\n              `Render failed for \"${tmplId}\". Returning scope with comment node.`\n            );\n            component.element = document.createComment(\n              `Render Error: ${tmplId}`\n            ) as any;\n            return component;\n          }\n        }\n        if (configs.printExecTime) console.timeEnd(`render: ${tmplId}`);\n\n        temp.innerHTML = renderedHTML!;\n        let docFragment: DocumentFragment | Element | TemplateElement =\n          temp.content || temp;\n\n        if (\n          (docFragment as any).tagName == \"TEMPLATE\" &&\n          !(temp as any).content\n        ) {\n          // Check for IE11 case\n          const children = Array.from(docFragment.childNodes);\n          docFragment = document.createDocumentFragment();\n          children.forEach((child) => docFragment.appendChild(child));\n        }\n\n        if (hasParent && wrapperElement) {\n          while (wrapperElement.firstChild) {\n            wrapperElement.removeChild(wrapperElement.firstChild);\n          }\n          component.wrapperElement = wrapperElement;\n        }\n\n        // Handle shadow DOM creation\n        const shadowStyle = (docFragment as any).querySelector\n          ? (docFragment as any).querySelector(\"style\")\n          : null;\n        if (shadowStyle && (docFragment as any).querySelector) {\n          // Check if querySelector exists\n          const host = document.createElement(tmplId); // Use tmplId as host tag name\n          try {\n            const shadow = host.attachShadow({ mode: \"open\" });\n            while (docFragment.firstChild) {\n              shadow.appendChild(docFragment.firstChild);\n            }\n            docFragment = host; // Replace fragment with the host element\n          } catch (e) {\n            console.error(\n              `Failed to attach shadow DOM for template \"${tmplId}\":`,\n              e\n            );\n            // Proceed without shadow DOM if attachShadow fails\n          }\n        }\n\n        if (docFragment.firstChild && docFragment.firstChild.nodeType == 8) {\n          returnTarget = docFragment.firstChild;\n        } else if (childElementCount(docFragment) == 1) {\n          returnTarget = firstElementChild(docFragment);\n          if (hasParent && wrapperElement && returnTarget) {\n            if (component.beforeAppendTo) {\n              try {\n                component.beforeAppendTo();\n              } catch (e) {\n                console.error(\"Error in beforeAppendTo:\", e);\n              }\n            }\n            wrapperElement.appendChild(returnTarget);\n            if (component.afterAppendTo) {\n              setTimeout(() => {\n                try {\n                  component.afterAppendTo!();\n                } catch (e) {\n                  console.error(\"Error in afterAppendTo:\", e);\n                }\n              }, 0);\n            }\n          }\n        } else {\n          if (hasParent && wrapperElement) {\n            if (component.beforeAppendTo) {\n              try {\n                component.beforeAppendTo();\n              } catch (e) {\n                console.error(\"Error in beforeAppendTo:\", e);\n              }\n            }\n            wrapperElement.appendChild(docFragment);\n            if (component.afterAppendTo) {\n              setTimeout(() => {\n                try {\n                  component.afterAppendTo!();\n                } catch (e) {\n                  console.error(\"Error in afterAppendTo:\", e);\n                }\n              }, 0);\n            }\n            returnTarget = wrapperElement;\n          } else {\n            returnTarget = docFragment;\n          }\n        }\n\n        if (data && data.$props && returnTarget instanceof Element) {\n          for (const prop in data.$props) {\n            try {\n              const value = data.$props[prop];\n              if (prop.startsWith(\"data-\")) {\n                const camelCased = prop\n                  .substring(5)\n                  .replace(/-([a-z])/g, (g) => g[1].toUpperCase());\n                (returnTarget as HTMLElement).dataset[camelCased] =\n                  String(value);\n              } else if (prop in returnTarget) {\n                (returnTarget as any)[prop] = value;\n              } else {\n                returnTarget.setAttribute(prop, String(value));\n              }\n            } catch (e: any) {\n              console.error(\n                `Error applying prop \"${prop}\" to element in template \"${tmplId}\":`,\n                e\n              );\n            }\n          }\n        }\n\n        if (returnTarget instanceof Node && returnTarget.normalize) {\n          returnTarget.normalize();\n        }\n        if (returnTarget instanceof Node) {\n          cleanNode(returnTarget);\n        }\n        component.element = returnTarget as HTMLElement | TemplateElement; // Assign final element/fragment\n\n        // Execute lazyExec functions after element is attached\n        const lazyExec = matcher.lazyExec;\n        if (data) {\n          matcher.lazyExecKeys.forEach(function (key) {\n            if (lazyScope[key] && lazyScope[key].length > 0) {\n              try {\n                lazyExec[key].call(\n                  templateEngine.rules[key.slice(0, -5)],\n                  data,\n                  lazyScope,\n                  component,\n                  docFragment as DocumentFragment | Element\n                ); // Cast needed\n              } catch (e: any) {\n                if (configs.throwError) {\n                  console.error(\n                    `Error during lazy execution of \"${key}\" for template \"${tmplId}\":`,\n                    e\n                  );\n                  throw e;\n                }\n              }\n            }\n          });\n        }\n\n        if (tools.liveReloadSupport) {\n          try {\n            tools.liveReloadSupport(component);\n          } catch (e) {\n            console.error(\"Error in liveReloadSupport:\", e);\n          }\n        }\n\n        if (callback) {\n          try {\n            callback.call(wrapperElement || null, component);\n          } catch (e: any) {\n            console.error(`Error in template callback for \"${tmplId}\":`, e);\n            if (configs.throwError) throw e;\n          }\n        }\n\n        // Define Component Methods (Render/Refresh/Release)\n        component.release = function (): void {\n          const self = this as ComponentScope;\n          const props = Object.getOwnPropertyNames(self);\n          const keepProps = [statusKeyName, \"_id\"];\n          for (let i = 0; i < props.length; i++) {\n            const prop = props[i];\n            if (\n              typeof (self as any)[prop] !== \"function\" &&\n              !keepProps.includes(prop)\n            ) {\n              delete (self as any)[prop];\n            }\n          }\n        };\n\n        component.render = function (\n          newData: Record<string, any>\n        ): ComponentScope {\n          const currentComponent = this as ComponentScope;\n          const targetElement = currentComponent.element;\n          const parent =\n            targetElement instanceof Node ? targetElement.parentElement : null;\n          const wrapper = currentComponent.wrapperElement;\n          const tmplFunc = compomint.tmpl(currentComponent.tmplId);\n\n          if (!tmplFunc) {\n            console.error(\n              `Cannot re-render: Template function for \"${currentComponent.tmplId}\" not found.`\n            );\n            return currentComponent;\n          }\n\n          const hooks = {\n            beforeAppendTo: currentComponent.beforeAppendTo,\n            afterAppendTo: currentComponent.afterAppendTo,\n            beforeRemove: currentComponent.beforeRemove,\n            afterRemove: currentComponent.afterRemove,\n            beforeRefresh: currentComponent.beforeRefresh,\n            afterRefresh: currentComponent.afterRefresh,\n          };\n\n          if (currentComponent.beforeRemove) {\n            try {\n              currentComponent.beforeRemove();\n            } catch (e) {\n              console.error(\"Error in beforeRemove during render:\", e);\n            }\n          }\n\n          let newComponent: ComponentScope;\n          if (wrapper) {\n            newComponent = tmplFunc(\n              newData,\n              wrapper,\n              undefined,\n              currentComponent\n            ); // Reuse scope object\n          } else if (parent && targetElement instanceof Node) {\n            newComponent = tmplFunc(\n              newData,\n              undefined,\n              undefined,\n              currentComponent\n            ); // Reuse scope object\n            if (newComponent.element instanceof Node) {\n              if (newComponent.beforeAppendTo) {\n                try {\n                  newComponent.beforeAppendTo();\n                } catch (e) {\n                  console.error(\"Error in beforeAppendTo during render:\", e);\n                }\n              }\n              parent.replaceChild(newComponent.element, targetElement);\n              if (newComponent.afterAppendTo) {\n                setTimeout(() => {\n                  try {\n                    newComponent.afterAppendTo!();\n                  } catch (e) {\n                    console.error(\"Error in afterAppendTo during render:\", e);\n                  }\n                }, 0);\n              }\n            } else if (configs.debug) {\n              console.warn(\n                `Re-render of \"${currentComponent.tmplId}\" resulted in no element or target was missing.`\n              );\n            }\n          } else {\n            // No parent, just create new scope (likely detached)\n            newComponent = tmplFunc(\n              newData,\n              undefined,\n              undefined,\n              currentComponent\n            );\n          }\n\n          if (currentComponent.afterRemove) {\n            try {\n              currentComponent.afterRemove();\n            } catch (e) {\n              console.error(\"Error in afterRemove during render:\", e);\n            }\n          }\n\n          Object.assign(newComponent, hooks); // Restore hooks\n          return newComponent;\n        };\n\n        component.refresh = function (\n          reflashData: Record<string, any>\n        ): ComponentScope {\n          const currentComponent = this as ComponentScope;\n          const currentData = currentComponent[dataKeyName];\n          if (currentComponent.beforeRefresh) {\n            try {\n              currentComponent.beforeRefresh();\n            } catch (e) {\n              console.error(\"Error in beforeRefresh:\", e);\n            }\n          }\n          const newData = Object.assign({}, currentData || {}, reflashData);\n          const newComponent = currentComponent.render(newData);\n          if (currentComponent.afterRefresh) {\n            try {\n              currentComponent.afterRefresh();\n            } catch (e) {\n              console.error(\"Error in afterRefresh:\", e);\n            }\n          }\n          return newComponent;\n        };\n\n        component.reflash = component.refresh;\n\n        return component;\n      }; // End of renderingFunc definition\n\n    Object.defineProperty(renderingFunc, \"name\", {\n      value: `render_${tmplId}`,\n      writable: false,\n    });\n\n    if (tmplId) {\n      const tmplMeta: TemplateMeta = configs.debug\n        ? {\n            renderingFunc: renderingFunc,\n            source: escapeHtml.escape(\n              `function ${tmplId}_source (${templateEngine.keys.dataKeyName}, ${templateEngine.keys.statusKeyName}, ${templateEngine.keys.componentKeyName}, ${templateEngine.keys.i18nKeyName}, __lazyScope, __debugger) {\\n${source}\\n}`\n            ),\n            templateText: escapeHtml.escape(templateText),\n          }\n        : {\n            renderingFunc: renderingFunc,\n          };\n      cachedTmpl.set(tmplId, tmplMeta);\n\n      const tmplIdNames = tmplId.split(\"-\");\n      if (tmplIdNames.length > 1) {\n        const group = tmplIdNames[0];\n        let groupObj = tmpl[group];\n        if (!groupObj) {\n          tmpl[group] = groupObj = {};\n        }\n        const tmplIdSub = tmplIdNames\n          .slice(1)\n          .map((part, index) =>\n            index === 0 ? part : part.charAt(0).toUpperCase() + part.slice(1)\n          )\n          .join(\"\");\n        groupObj[tmplIdSub] = tmplMeta.renderingFunc;\n      }\n    }\n    return renderingFunc;\n  }); // End of templateBuilder\n\ncompomint.remapTmpl = function (json: Record<string, string>): void {\n  Object.keys(json).forEach(function (oldKey: string) {\n    const newKey = json[oldKey];\n    const meta = cachedTmpl.get(oldKey);\n    if (meta) {\n      cachedTmpl.set(newKey, meta);\n      if (configs.debug)\n        console.log(`Remapped template \"${oldKey}\" to \"${newKey}\"`);\n    } else if (configs.debug) {\n      console.warn(\n        `Cannot remap template: Old key \"${oldKey}\" not found in cache.`\n      );\n    }\n  });\n};\n\ncompomint.tmpl = function (tmplId: string): RenderingFunction | null {\n  const tmplMeta = cachedTmpl.get(tmplId);\n  return tmplMeta ? tmplMeta.renderingFunc : null;\n};\n\nconst safeTemplate = function (\n  source: Element | string\n): Element | TemplateElement {\n  let template: TemplateElement;\n  if (source instanceof Element) {\n    if (source.tagName === \"TEMPLATE\") return source as TemplateElement;\n    return source; // Assume it's a container element\n  } else if (typeof source !== \"string\") {\n    if (configs.debug)\n      console.warn(\n        \"safeTemplate received non-string/non-element source:\",\n        source\n      );\n    source = \"\";\n  }\n\n  template = document.createElement(\"template\");\n  if (isSupportTemplateTag) {\n    const encodedSource = source.replace(\n      /<(?!template|\\/template|body|\\/body|html|\\/html|head|\\/head|style|\\/style|script|\\/script|link|\\/link|meta|\\/meta|!--)/gi,\n      \"&lt;\"\n    );\n    template.innerHTML = encodedSource;\n  } else {\n    const encodedSource = source\n      .replace(\n        /<(?!template|\\/template|body|\\/body|html|\\/html|head|\\/head|style|\\/style|script|\\/script|link|\\/link|meta|\\/meta|!--)/gi,\n        \"&lt;\"\n      )\n      .replace(/<template/g, '<script type=\"template\"')\n      .replace(/<\\/template>/g, \"</script>\");\n    template.innerHTML = encodedSource;\n  }\n  return template;\n};\n\nconst addTmpl: CompomintGlobal[\"addTmpl\"] = (compomint.addTmpl = function (\n  tmplId,\n  element,\n  templateEngine\n) {\n  let templateText =\n    element instanceof Element ? element.innerHTML : String(element);\n  templateText = escapeHtml.unescape(templateText.replace(/<!---|--->/gi, \"\"));\n  return templateBuilder(tmplId, templateText, templateEngine);\n});\n\nconst addTmpls: CompomintGlobal[\"addTmpls\"] = (compomint.addTmpls = function (\n  source,\n  removeInnerTemplate,\n  templateEngine\n) {\n  if (typeof removeInnerTemplate !== \"boolean\" && templateEngine == undefined) {\n    templateEngine = removeInnerTemplate as Partial<TemplateEngine> | undefined;\n    removeInnerTemplate = false;\n  } else {\n    removeInnerTemplate = !!removeInnerTemplate;\n  }\n\n  const container = safeTemplate(source);\n  const content = (container as TemplateElement).content || container; // Use content if available\n  const tmplNodes = content.querySelectorAll<Element>(\n    'template[id], script[type=\"text/template\"][id], script[type=\"text/compomint\"][id]'\n  );\n\n  tmplNodes.forEach((node) => {\n    const tmplId = node.id;\n    if (!tmplId) return;\n\n    if ((node as HTMLElement).dataset.coLoadScript !== undefined) {\n      addTmpl(tmplId, node, templateEngine)({}); // Execute immediately if data-co-load-script\n    } else {\n      addTmpl(tmplId, node, templateEngine);\n    }\n\n    if (removeInnerTemplate && node.parentNode) {\n      node.parentNode.removeChild(node);\n    }\n  });\n  return container;\n});\n\nconst addTmplByUrl: CompomintGlobal[\"addTmplByUrl\"] = (compomint.addTmplByUrl =\n  function compomint_addTmplByUrl(importData, option, callback) {\n    if (!callback && typeof option === \"function\") {\n      callback = option;\n      option = {};\n    }\n\n    const defaultOptions = {\n      loadScript: true,\n      loadStyle: true,\n      loadLink: true,\n      templateEngine: undefined,\n    };\n    const mergedOptions = Object.assign(\n      {},\n      defaultOptions,\n      option as Record<string, any>\n    ); // Ensure option is object\n\n    const importDataParser = (\n      obj: string | any\n    ): { url: string; option: Record<string, any> } | null => {\n      if (typeof obj === \"string\") {\n        return { url: obj, option: mergedOptions };\n      } else if (obj && typeof obj === \"object\" && obj.url) {\n        return {\n          url: obj.url,\n          option: Object.assign({}, mergedOptions, obj.option),\n        };\n      } else {\n        console.error(\"Invalid import data format in addTmplByUrl:\", obj);\n        return null;\n      }\n    };\n\n    const appendElements = (\n      elements: NodeListOf<Element> | Element[]\n    ): void => {\n      elements.forEach((element) => {\n        if (!element) return;\n        if (element.id) {\n          const oldElement = document.getElementById(element.id);\n          if (oldElement) oldElement.parentNode?.removeChild(oldElement);\n        }\n        if (\n          element.tagName === \"SCRIPT\" ||\n          element.tagName === \"LINK\" ||\n          element.tagName === \"STYLE\"\n        ) {\n          document.head.appendChild(element);\n        } else {\n          document.body.appendChild(element);\n        }\n      });\n    };\n\n    const importFunc = (\n      source: string,\n      currentOption: Record<string, any>\n    ): void => {\n      const templateContainer = safeTemplate(source);\n      addTmpls(templateContainer, false, currentOption.templateEngine);\n      const content =\n        (templateContainer as TemplateElement).content || templateContainer;\n\n      if (currentOption.loadLink) {\n        const links = content.querySelectorAll<HTMLLinkElement>(\n          'link[rel=\"stylesheet\"]'\n        );\n        appendElements(links);\n      }\n      if (currentOption.loadStyle) {\n        const styles = content.querySelectorAll<HTMLStyleElement>(\"style[id]\");\n        appendElements(styles);\n      }\n      if (currentOption.loadScript) {\n        const scripts = content.querySelectorAll<HTMLScriptElement>(\n          'script:not([type]), script[type=\"text/javascript\"], script[type=\"module\"]'\n        );\n        const executableScripts = Array.from(scripts)\n          .filter((node) => {\n            let parent = node.parentNode;\n            while (parent) {\n              if (\n                parent.nodeName === \"TEMPLATE\" ||\n                (parent.nodeName === \"SCRIPT\" &&\n                  (parent as HTMLScriptElement).type.includes(\"template\"))\n              )\n                return false;\n              parent = parent.parentNode;\n            }\n            return true;\n          })\n          .map((node) => {\n            const scriptElm = document.createElement(\"script\");\n            node\n              .getAttributeNames()\n              .forEach((name) =>\n                scriptElm.setAttribute(name, node.getAttribute(name)!)\n              );\n            if (node.innerHTML) scriptElm.textContent = node.innerHTML;\n            return scriptElm;\n          });\n        appendElements(executableScripts);\n      }\n    };\n\n    const loadResource = (dataItem: string | any): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        const parsedData = importDataParser(dataItem);\n        if (!parsedData) {\n          resolve(); // Resolve immediately for invalid data\n          return;\n        }\n        const src = parsedData.url;\n        const currentOption = parsedData.option;\n\n        if (src.endsWith(\".js\")) {\n          const script = genElement(\"script\", {\n            async: true,\n            src: src,\n          }) as HTMLScriptElement;\n          script.addEventListener(\"load\", () => resolve());\n          script.addEventListener(\"error\", () => {\n            console.error(`Failed to load script: ${src}`);\n            reject(new Error(`Failed to load script: ${src}`));\n          });\n          document.head.appendChild(script);\n        } else if (src.endsWith(\".css\")) {\n          const link = genElement(\"link\", {\n            type: \"text/css\",\n            rel: \"stylesheet\",\n            href: src,\n          }) as HTMLLinkElement;\n          link.addEventListener(\"load\", () => resolve());\n          link.addEventListener(\"error\", () => {\n            console.error(`Failed to load stylesheet: ${src}`);\n            reject(new Error(`Failed to load stylesheet: ${src}`));\n          });\n          document.head.appendChild(link);\n        } else {\n          requestFunc(src, null, (source, status) => {\n            if (status === 200 || status === 0) {\n              try {\n                importFunc(source!, currentOption); // Use non-null assertion for source\n                resolve(); // Resolve after successful processing\n              } catch (e) {\n                console.error(`Error processing imported HTML from ${src}:`, e);\n                reject(\n                  new Error(`Error processing imported HTML from ${src}: ${e}`)\n                );\n              }\n            } else {\n              console.error(\n                `Failed to fetch template file: ${src} (Status: ${status})`\n              );\n              reject(\n                new Error(\n                  `Failed to fetch template file: ${src} (Status: ${status})`\n                )\n              );\n            }\n          });\n        }\n      });\n    };\n\n    // Handle null or undefined importData\n    if (importData == null) {\n      if (callback) {\n        callback();\n        return;\n      } else {\n        return Promise.resolve();\n      }\n    }\n\n    // Create the promise for all operations\n    const operationPromise = Array.isArray(importData)\n      ? importData.length === 0\n        ? Promise.resolve()\n        : Promise.all(importData.map(loadResource))\n            .then(() => {})\n            .catch((err) => {\n              console.error(\"Error loading resources in addTmplByUrl:\", err);\n              throw err; // Re-throw the error to allow operationPromise to reject\n            })\n      : loadResource(importData).catch((err) => {\n          console.error(\"Error loading resource in addTmplByUrl:\", err);\n          throw err; // Re-throw the error to allow operationPromise to reject\n        });\n\n    // If callback is provided, use it; otherwise return the promise\n    if (callback) {\n      operationPromise\n        .then(() => callback())\n        .catch((err) => {\n          // Log error but still call callback for backward compatibility\n          console.error(\"Error in addTmplByUrl callback mode:\", err);\n          callback();\n        });\n      return;\n    } else {\n      return operationPromise;\n    }\n  });\n\nconst requestFunc = function (\n  url: string,\n  option: RequestInit | null,\n  callback: (\n    responseText: string | null,\n    status: number,\n    xhr: XMLHttpRequest\n  ) => void\n): void {\n  const xmlhttp = new XMLHttpRequest();\n\n  xmlhttp.onreadystatechange = function () {\n    if (xmlhttp.readyState == XMLHttpRequest.DONE) {\n      if (xmlhttp.status == 200 || xmlhttp.status === 0) {\n        callback(xmlhttp.responseText, xmlhttp.status, xmlhttp);\n      } else {\n        if (xmlhttp.status == 404)\n          console.error(`Error 404: Not Found - ${url}`);\n        else if (xmlhttp.status >= 400)\n          console.error(`HTTP Error ${xmlhttp.status} for ${url}`);\n        else console.error(`Request failed for ${url}`, xmlhttp.statusText);\n        callback(null, xmlhttp.status, xmlhttp);\n      }\n    }\n  };\n\n  xmlhttp.onerror = function () {\n    console.error(`Network error requesting ${url}`);\n    callback(null, 0, xmlhttp);\n  };\n  xmlhttp.ontimeout = function () {\n    console.error(`Request timed out for ${url}`);\n    callback(null, 408, xmlhttp);\n  };\n\n  try {\n    const method = (option && option.method) || \"GET\";\n    xmlhttp.open(method, url, true);\n\n    if (option) {\n      if ((option as any).timeout) xmlhttp.timeout = (option as any).timeout;\n      const headers = option.headers as Record<string, string>;\n      if (headers) {\n        Object.keys(headers).forEach((key) => {\n          xmlhttp.setRequestHeader(key, headers[key]);\n        });\n      }\n      xmlhttp.send((option.body as any) || null);\n    } else {\n      xmlhttp.send();\n    }\n  } catch (e: any) {\n    console.error(`Error sending request to ${url}:`, e);\n    callback(null, 0, xmlhttp);\n  }\n};\n\ncompomint.i18n = {};\n\ncompomint.addI18n = function (\n  fullKey: string,\n  i18nObj: Record<string, any>\n): void {\n  if (\n    !fullKey ||\n    typeof fullKey !== \"string\" ||\n    !i18nObj ||\n    typeof i18nObj !== \"object\"\n  ) {\n    console.error(\"Invalid arguments for addI18n:\", fullKey, i18nObj);\n    return;\n  }\n\n  const langKeyNames = fullKey.split(\".\");\n  let target: any = compomint.i18n;\n  const keyLength = langKeyNames.length - 1;\n\n  langKeyNames.forEach(function (key: string, i: number) {\n    if (!key) return;\n\n    if (keyLength === i) {\n      // Check if any language value is an array\n      const hasArrayValues = Object.keys(i18nObj).some((lang) =>\n        Array.isArray(i18nObj[lang])\n      );\n\n      if (hasArrayValues) {\n        // Handle arrays - create array structure\n        if (!target[key]) {\n          target[key] = [];\n        }\n\n        // Process each language's array\n        Object.keys(i18nObj)\n          .filter((lang) => Array.isArray(i18nObj[lang]))\n          .forEach((lang) => {\n            const array = i18nObj[lang];\n            array.forEach((item: any, index: number) => {\n              if (!target[key][index]) {\n                target[key][index] = {};\n              }\n              if (item instanceof Object && !Array.isArray(item)) {\n                Object.keys(item).forEach((subKey) => {\n                  compomint.addI18n(\n                    fullKey + \".\" + index + \".\" + subKey,\n                    item[subKey]\n                  );\n                });\n              }\n            });\n          });\n      } else {\n        // Handle regular i18n function\n        if (!target[key]) {\n          target[key] = function (defaultText?: string): string {\n            const lang = document.documentElement.lang || \"en\";\n            let label = i18nObj[lang];\n            if (label === undefined || label === null) {\n              label = defaultText;\n              if (configs.debug)\n                console.warn(\n                  `i18n: Label key [\"${fullKey}\"] for lang \"${lang}\" is missing. Using default: \"${defaultText}\"`\n                );\n            }\n            return label !== undefined && label !== null ? String(label) : \"\";\n          };\n        }\n        // Handle nested objects within the language definitions\n        Object.keys(i18nObj)\n          .filter(\n            (lang) =>\n              i18nObj[lang] instanceof Object && !Array.isArray(i18nObj[lang])\n          ) // Check for plain objects\n          .forEach((subKey) => {\n            compomint.addI18n(fullKey + \".\" + subKey, i18nObj[subKey]);\n            // delete i18nObj[subKey]; // Avoid deleting if it's also a language key\n          });\n      }\n    } else {\n      if (!target[key] || typeof target[key] === \"function\") {\n        target[key] = {};\n      }\n      target = target[key];\n    }\n  });\n};\n\ncompomint.addI18ns = function (i18nObjs: Record<string, any>): void {\n  // Cache for target path resolution to avoid repeated splits\n  const targetCache = new Map<string, any>();\n\n  function getTargetPath(fullKey: string): any {\n    if (targetCache.has(fullKey)) {\n      return targetCache.get(fullKey);\n    }\n\n    const keyParts = fullKey.split(\".\");\n    let target = compomint.i18n;\n    for (let i = 0; i < keyParts.length - 1; i++) {\n      if (!target[keyParts[i]]) {\n        target[keyParts[i]] = {};\n      }\n      target = target[keyParts[i]];\n    }\n\n    targetCache.set(fullKey, target);\n    return target;\n  }\n\n  function isTranslationObject(value: any): boolean {\n    // Fast check: if it has nested objects, it's not a translation\n    for (const key in value) {\n      const val = value[key];\n      const type = typeof val;\n      if (type !== \"string\" && type !== \"number\" && type !== \"boolean\") {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  function processNested(obj: any, keyPath: string = \"\"): void {\n    for (const key in obj) {\n      const value = obj[key];\n      const fullKey = keyPath ? keyPath + \".\" + key : key;\n\n      if (Array.isArray(value)) {\n        // Handle array at this level - optimized version\n        const target = getTargetPath(fullKey);\n        const finalKey = fullKey.split(\".\").pop()!;\n\n        if (!target[finalKey]) {\n          target[finalKey] = [];\n        }\n\n        // Process each array item with reduced function calls\n        for (let index = 0; index < value.length; index++) {\n          const item = value[index];\n          if (!target[finalKey][index]) {\n            target[finalKey][index] = {};\n          }\n\n          if (item && typeof item === \"object\") {\n            // Direct processing without recursive addI18n calls\n            for (const itemKey in item) {\n              const itemValue = item[itemKey];\n              if (itemValue && typeof itemValue === \"object\") {\n                // Create the i18n function directly\n                const itemPath = fullKey + \".\" + index + \".\" + itemKey;\n                compomint.addI18n(itemPath, itemValue);\n              }\n            }\n          }\n        }\n      } else if (value && typeof value === \"object\") {\n        if (isTranslationObject(value)) {\n          // This is a translation object, use addI18n\n          compomint.addI18n(fullKey, value);\n        } else {\n          // This is a nested structure, continue processing\n          processNested(value, fullKey);\n        }\n      } else {\n        // Primitive value, use addI18n\n        compomint.addI18n(fullKey, value);\n      }\n    }\n  }\n\n  processNested(i18nObjs);\n};\n\nlet elementCount = 0;\ntools.genId = function (tmplId: string): string {\n  elementCount++;\n  return tmplId + elementCount;\n};\n\nconst applyElementProps = (tools.applyElementProps = function (\n  element: HTMLElement,\n  attrs: Record<string, any>\n): Element {\n  Object.keys(attrs).forEach(function (key) {\n    const value = attrs[key];\n    const propName = key === \"class\" ? \"className\" : key;\n\n    try {\n      if (key === \"style\" && typeof value === \"object\" && value !== null) {\n        Object.assign(element.style, value); // Assign style object\n      } else if (\n        key === \"dataset\" &&\n        typeof value === \"object\" &&\n        value !== null\n      ) {\n        Object.assign((element as HTMLElement).dataset, value); // Assign dataset object\n      } else if (key.startsWith(\"on\") && typeof value === \"function\") {\n        // Directly assign event handlers like onclick, onmouseover\n        (element as any)[key.toLowerCase()] = value;\n      } else if (propName in element) {\n        (element as any)[propName] = value;\n      } else {\n        element.setAttribute(key, String(value));\n      }\n    } catch (e: any) {\n      console.error(\n        `Error setting attribute/property \"${key}\" on <${element.tagName}>:`,\n        e\n      );\n    }\n  });\n  return element;\n});\n\nconst genElement = (tools.genElement = function (\n  tagName: string,\n  attrs: Record<string, any> | string | Node | (string | Node)[] = {},\n  ...children: (string | Node)[]\n): Element {\n  const element = document.createElement(tagName);\n  let actualAttrs: Record<string, any> = {};\n\n  if (typeof attrs === \"string\") {\n    children.unshift(attrs); // Prepend string as first child\n  } else if (attrs instanceof Node) {\n    children.unshift(attrs); // Prepend Node as first child\n  } else if (Array.isArray(attrs)) {\n    children = attrs.concat(children); // Concatenate arrays\n  } else {\n    actualAttrs = attrs; // It's an attributes object\n  }\n\n  // Set attributes/properties\n  applyElementProps(element, actualAttrs);\n\n  // Append children\n  children.forEach((child) => {\n    if (typeof child === \"string\") {\n      element.appendChild(document.createTextNode(child));\n    } else if (child instanceof Node) {\n      element.appendChild(child);\n    }\n  });\n  return element;\n});\n\ntools.props = function (...propsObjects: Record<string, any>[]): string {\n  if (!propsObjects || propsObjects.length === 0) return \"\";\n  const mergedProps = Object.assign({}, ...propsObjects);\n  const propStrArray: string[] = [];\n  Object.keys(mergedProps).forEach(function (key) {\n    const value = mergedProps[key];\n    if (value || value === 0) {\n      const escapedValue = String(value).replace(/\"/g, \"&quot;\");\n      propStrArray.push(`${key}=\"${escapedValue}\"`);\n    }\n  });\n  return propStrArray.join(\" \");\n};\n\n// Add built-in template\napplyBuiltInTemplates(addTmpl);\n\nexport { compomint, tmpl };\n"],"names":[],"mappings":"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"}
{"version":3,"file":"compomint.esm.js","sources":["../src/compomint-core.js"],"sourcesContent":["/*\n * Copyright (c) 2025-present, Choi Sungho\n * Code released under the MIT license\n */\n\n\n(function() {\n  \"use strict\";\n\n  // Polyfill\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\n  if (typeof Object.assign != \"function\") {\n    // Must be writable: true, enumerable: false, configurable: true\n    Object.defineProperty(Object, \"assign\", {\n      value: function assign(target, ...params) {\n        // .length of function is 2\n        // 'use strict';\n        if (target == null) {\n          // TypeError if undefined or null\n          throw new TypeError(\"Cannot convert undefined or null to object\");\n        }\n        let to = Object(target);\n        for (let index = 0, length = params.length; index < length; index++) {\n          let nextSource = params[index];\n          if (nextSource != null) {\n            // Skip over if undefined or null\n            for (let nextKey in nextSource) {\n              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                to[nextKey] = nextSource[nextKey];\n              }\n            }\n          }\n        }\n        return to;\n      },\n      writable: true,\n      configurable: true,\n    });\n  }\n\n  // from:https://github.com/jserz/js_piece/blob/master/DOM/ChildNode/remove()/remove().md\n\n  (function (arr) {\n    arr.forEach(function (item) {\n      if (!item) return;\n      if (item.hasOwnProperty(\"remove\")) {\n        return;\n      }\n      Object.defineProperty(item, \"remove\", {\n        configurable: true,\n        enumerable: true,\n        writable: true,\n        value: function remove() {\n          if (this.parentNode !== null) {\n            this.parentNode.removeChild(this);\n          }\n        },\n      });\n    });\n  })([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n\n  // https://stackoverflow.com/questions/37588326/reliabilty-of-isconnected-field-in-dom-node\n  (function (supported) {\n    if (supported) return;\n    Object.defineProperty(window.Node.prototype, \"isConnected\", {\n      get: function () {\n        return document.body.contains(this);\n      },\n    });\n  })(\"isConnected\" in window.Node.prototype);\n\n  let root = this;\n  let Compomint = (root.compomint = root.compomint || {});\n  let tmplTool = (Compomint.tmplTool = Compomint.tmplTool || {});\n  let showTime = tmplTool.showTime || false;\n  let debug = tmplTool.debug != undefined ? tmplTool.debug : false;\n  let requestCacheControl = tmplTool.requestCacheControl || true;\n  let throwError =\n    tmplTool.throwError != undefined ? tmplTool.throwError : true;\n  let cachedTmpl = (Compomint.tmplCache = Compomint.tmplCache || new Map());\n  if (!cachedTmpl.has(\"anonymous\")) {\n    cachedTmpl.set(\"anonymous\", { elements: new Set() });\n  }\n  let isSupportTemplateTag = \"content\" in document.createElement(\"template\");\n\n  root.tmpl = {};\n\n  // When customizing `templateSettings`, if you don't want to define an\n  // interpolation, evaluation or escaping regex, we need one that is\n  // guaranteed not to match.\n  let noMatch = /(.)^/;\n  let escapes = {\n    \"'\": \"\\\\'\",\n    \"\\\\\": \"\\\\\\\\\",\n    \"\\r\": \"\\\\r\",\n    \"\\n\": \"\\\\n\",\n    \"\\t\": \"\\\\t\",\n    \"\\u2028\": \"\\u2028\",\n    \"\\u2029\": \"\\u2029\",\n    \"><\": \"><\",\n    \"<\": \"<\",\n    \">\": \">\",\n    //'#': '#'\n  };\n\n  let escaper = /\\>( |\\n)+\\<|\\>( |\\n)+|( |\\n)+\\<|\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;\n\n  let firstElementChild = function (ele) {\n    if (ele.firstElementChild) return ele.firstElementChild;\n    let children = ele.childNodes;\n    for (let i = 0, size = children.length; i < size; i++) {\n      if (children[i] instanceof Element) {\n        return children[i];\n      }\n    }\n    return null;\n  };\n\n  let childNodeCount = function (ele) {\n    return (\n      ele.childElementCount ||\n      Array.prototype.filter.call(ele.childNodes, function (child) {\n        return child instanceof Node;\n      }).length\n    );\n  };\n  let childElementCount = function (ele) {\n    return (\n      ele.childElementCount ||\n      Array.prototype.filter.call(ele.childNodes, function (child) {\n        return child instanceof Element;\n      }).length\n    );\n  };\n  let cleanNode = function (node) {\n    for (let n = 0; n < node.childNodes.length; n++) {\n      let child = node.childNodes[n];\n      if (\n        child.nodeType === 8 ||\n        (child.nodeType === 3 && !/\\S/.test(child.nodeValue))\n      ) {\n        node.removeChild(child);\n        n--;\n      } else if (child.nodeType === 1) {\n        cleanNode(child);\n      }\n    }\n  };\n\n  Compomint.templateSettings = {\n    firstElementChild: firstElementChild,\n    childElementCount: childElementCount,\n    style: {\n      pattern: /(\\<style id=[\\s\\S]+?\\>[\\s\\S]+?\\<\\/style\\>)/g,\n      exec: function (style) {\n        let dumy = document.createElement(\"template\");\n        dumy.innerHTML = style;\n        let styleNode = (dumy.content || dumy).querySelector(\"style\");\n        let oldStyleNode = document.getElementById(styleNode.id);\n        if (oldStyleNode) oldStyleNode.parentNode.removeChild(oldStyleNode);\n        document.head.appendChild(styleNode);\n        return \"\";\n      },\n    },\n    commentArea: {\n      pattern: /#\\\\#([\\s\\S]+?)#\\\\#/g,\n      exec: function (commentArea) {\n        return `'+\\n'##${commentArea}##'+\\n'`;\n      },\n    },\n    preEvaluate: {\n      pattern: /##!([\\s\\S]+?)##/g,\n      exec: function (preEvaluate, tmplId) {\n        new Function(\"tmplId\", preEvaluate)(tmplId);\n        return ``;\n      },\n    },\n    interpolate: {\n      //pattern: /(?:##=|\\$\\{)([\\s\\S]+?)(?:##|\\})/g, // ##=##, ${}\n      pattern: /##=([\\s\\S]+?)##/g, // ##=##, ${}\n      exec: function (interpolate) {\n        let interpolateSyntax = `typeof (interpolate)=='function' ? (interpolate)() : (interpolate)`;\n        return (`';(() => {let interpolate=${interpolate};\\n__p+=((__t=(${interpolateSyntax}))==null?'':__t);})()\\n__p+='`);\n      },\n    },\n    namedElement: {\n      pattern: /data-co-named-element=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (key) {\n        let source = `';\\nvar eventId = (__lazyScope.namedElementArray.length);\\n__p+='data-co-named-element=\\\"'+eventId+'\\\"';\\n\n__lazyScope.namedElementArray[eventId] = ${key};\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        lazyScope.namedElementArray.forEach(function (key, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            '[data-co-named-element=\"' + eventId + '\"]'\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coNamedElement;\n          tmplScope[key] = $elementTrigger;\n        });\n      },\n    },\n    elementRef: {\n      pattern: /data-co-element-ref=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (key) {\n        var source = `';\\nvar eventId = (__lazyScope.elementRefArray.length);\\n__p+='data-co-element-ref=\\\"'+eventId+'\\\"';\nvar ${key} = null;\\n__lazyScope.elementRefArray[eventId] = function(target) {${key} = target;};\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        lazyScope.elementRefArray.forEach(function (func, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            '[data-co-element-ref=\"' + eventId + '\"]'\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coVar;\n          func.call($elementTrigger, $elementTrigger);\n        });\n      },\n    },\n    elementLoad: {\n      pattern: /data-co-load=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (elementLoad) {\n        let elementLoadSplitArray = elementLoad.split(\"::\");\n        let source = `';\\nlet eventId = (__lazyScope.elementLoadArray.length);\\n__p+='data-co-load=\\\"'+eventId+'\\\"';\n__lazyScope.elementLoadArray[eventId] = {loadFunc: ${elementLoadSplitArray[0]}, customData: ${elementLoadSplitArray[1]}};\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        lazyScope.elementLoadArray.forEach(function (elementLoad, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            '[data-co-load=\"' + eventId + '\"]'\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coLoad;\n          let parentElement = $elementTrigger.parentElement;\n          elementLoad.loadFunc.call(\n            $elementTrigger,\n            $elementTrigger,\n            {\n              \"data\": data,\n              \"element\": $elementTrigger,\n              \"customData\": elementLoad.customData,\n              \"parentElement\": parentElement,\n              \"component\": tmplScope,\n            },\n          );\n        });\n      },\n    },\n    event: {\n      pattern: /data-co-event=\"##:([\\s\\S]+?)##\"/g,\n      exec: function (event) {\n        let eventStrArray = event.split(\":::\");\n        let source = `';\\n(() => {let eventId = (__lazyScope.eventArray.length);\\n__p+='data-co-event=\\\"'+eventId+'\\\"';\\n`;\n        let eventArray = new Array();\n        for (let i = 0, size = eventStrArray.length; i < size; i++) {\n          let eventSplitArray = eventStrArray[i].split(\"::\");\n          eventArray.push(\n            `{eventFunc: ${eventSplitArray[0]}, $parent: this, customData: ${eventSplitArray[1]}}`\n          );\n        }\n        source += `__lazyScope.eventArray[eventId] = [${eventArray.join(\",\")}];})()\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        let self = this;\n        let attacher = self.event.attacher;\n        lazyScope.eventArray.forEach(function (selectedArray, eventId) {\n          let $elementTrigger = wrapper.querySelector(\n            `[data-co-event=\"${eventId}\"]`\n          );\n          if (!$elementTrigger) return;\n          delete $elementTrigger.dataset.coEvent;\n          for (let i = 0, size = selectedArray.length; i < size; i++) {\n            let selected = selectedArray[i];\n            if (selectedArray[i].eventFunc) {\n              if (selected.eventFunc instanceof Array) {\n                selected.eventFunc.forEach(function (func) {\n                  attacher(\n                    self, data, lazyScope, tmplScope, wrapper, $elementTrigger,\n                    func,\n                    selected\n                  );\n                });\n              } else {\n                attacher(\n                  self, data, lazyScope, tmplScope, wrapper, $elementTrigger,\n                  selected.eventFunc,\n                  selected\n                );\n              }\n            }\n          }\n        });\n      },\n      trigger: function (target, eventName) {\n        let customEvent = new Event(eventName, {\n          bubbles: true,\n          cancelable: true\n        });\n        target.dispatchEvent(customEvent);\n      },\n      attacher: function (\n        self,\n        data,\n        lazyScope,\n        tmplScope,\n        wrapper,\n        $elementTrigger,\n        eventFunc,\n        eventData\n      ) {\n        let trigger = self.event.trigger;\n        let $childTarget = self.firstElementChild(wrapper);\n        let $targetElement =\n          self.childElementCount(wrapper) == 1 ? $childTarget : null;\n\n        if (!eventFunc) {\n          return;\n        }\n\n        let eventFuncParams = [\n          $elementTrigger,\n          null,\n          {\n            \"data\": data,\n            \"customData\": eventData.customData,\n            \"element\": $elementTrigger,\n            \"componentElement\": $targetElement || $childTarget.parentElement,\n            \"component\": tmplScope,\n          },\n        ];\n\n        if (eventFunc instanceof Function) {\n          $elementTrigger.addEventListener(\"click\", function (event) {\n            event.stopPropagation();\n            eventFuncParams[1] = event;\n            eventFunc.call(...eventFuncParams);\n          });\n          return;\n        }\n        let triggerKey = eventFunc.triggerKey;\n        if (triggerKey) {\n          tmplScope.trigger = tmplScope.trigger || {};\n          tmplScope.trigger[triggerKey] = {};\n        }\n        Object.keys(eventFunc).forEach(function (eventType) {\n          if (eventType == \"load\") {\n            eventFuncParams[1] = $elementTrigger;\n            eventFunc[eventType].call(...eventFuncParams);\n            return;\n          } else if (eventType == \"ref\") {\n            tmplScope[eventFunc[eventType]] = $elementTrigger;\n            return;\n          } else if (eventType == \"triggerKey\") {\n            return;\n          }\n\n          $elementTrigger.addEventListener(eventType, function (event) {\n            event.stopPropagation();\n            eventFuncParams[1] = event;\n            eventFunc[eventType].call(...eventFuncParams);\n          });\n\n          if (triggerKey) {\n            tmplScope.trigger[triggerKey][eventType] = function () {\n              trigger($elementTrigger, eventType);\n            };\n          }\n        });\n      },\n    },\n    element: {\n      pattern: /##%([\\s\\S]+?)##/g,\n      exec: function (target) {\n        let elementSplitArray = target.split(\"::\");\n        let source =\n          `';\\n(() => {let elementId = (__lazyScope.elementArray.length);\\n__p+='<template data-co-tmpl-element-id=\\\"'+elementId+'\\\"></template>';\n__lazyScope.elementArray[elementId] = {target: ${elementSplitArray[0]}, nonblocking: ${(elementSplitArray[1] || false)}};})()\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        let self = this;\n        lazyScope.elementArray.forEach(function (ele, elementId) {\n          let childTarget = ele.target;\n          let nonblocking = ele.nonblocking;\n          let $tmplElement = wrapper.querySelector(\n            `template[data-co-tmpl-element-id=\"${elementId}\"]`\n          );\n          if (childTarget instanceof Array) {\n            let docFragment = document.createDocumentFragment();\n            childTarget.forEach(function (child) {\n              if (!child) return;\n              let childElement = child.element || child;\n              if (typeof childElement === \"string\") {\n                docFragment.appendChild(\n                  self.element.stringToElement(childElement)\n                );\n              } else if (typeof childElement === \"number\") {\n                docFragment.appendChild(\n                  self.element.stringToElement(childElement)\n                );\n              } else if (typeof childElement === \"function\") {\n                docFragment.appendChild(\n                  self.element.stringToElement(childElement())\n                );\n              } else {\n                docFragment.appendChild(childElement);\n              }\n              if (child.beforeAppendTo) {\n                child.parent = child.parentNode;\n                child.parentScope = tmplScope;\n                if (child.beforeAppendTo) child.beforeAppendTo();\n              }\n            });\n\n            $tmplElement.parentNode.replaceChild(docFragment, $tmplElement);\n            childTarget.forEach(function (child) {\n              if (child && child.afterAppendTo)\n                setTimeout(function () {\n                  child.afterAppendTo();\n                });\n            });\n          } else if (typeof childTarget === \"string\") {\n            $tmplElement.parentNode.replaceChild(\n              self.element.stringToElement(childTarget),\n              $tmplElement\n            );\n          } else if (typeof childTarget === \"number\") {\n            $tmplElement.parentNode.replaceChild(\n              self.element.stringToElement(childTarget),\n              $tmplElement\n            );\n          } else if (typeof childTarget === \"function\") {\n            $tmplElement.parentNode.replaceChild(\n              self.element.stringToElement(childTarget()),\n              $tmplElement\n            );\n          } else if (\n            (childTarget && (childTarget.element || childTarget)) instanceof\n            Element\n          ) {\n            let doFunc = function () {\n              let childElement = childTarget.element || childTarget;\n              let parentNode = $tmplElement.parentNode;\n              let node1 = null;\n              if (childElement instanceof DocumentFragment) {\n                node1 = childElement.firstChild;\n              }\n\n              if (childTarget.beforeAppendTo) childTarget.beforeAppendTo();\n              let replacedNode = parentNode.replaceChild(\n                childElement,\n                $tmplElement\n              );\n              if (childTarget.afterAppendTo)\n                setTimeout(function () {\n                  childTarget.afterAppendTo();\n                });\n              if (childTarget.tmplId) {\n                if (node1) {\n                  childTarget.this = node1.parentNode;\n                }\n                childTarget.parentScope = tmplScope;\n              }\n            };\n            nonblocking == undefined || nonblocking === false\n              ? doFunc()\n              : setTimeout(doFunc, nonblocking);\n          } else {\n            $tmplElement.parentNode.removeChild($tmplElement);\n          }\n        });\n      },\n      stringToElement: function (str) {\n        if (!isNaN(str)) {\n          return document.createTextNode(str);\n        } else if (str && str.startsWith(\"<>\")) {\n          let temp = document.createElement(\"template\");\n          temp.innerHTML = str.replace(\"<>\", \"\");\n          return temp.content;\n        } else {\n          return document.createTextNode(str);\n        }\n      },\n    },\n    lazyEvaluate: {\n      pattern: /###([\\s\\S]+?)##/g,\n      exec: function (lazyEvaluate) {\n        let source = `';\\n__lazyScope.lazyEvaluateArray.push(function(data) {${lazyEvaluate}});\\n__p+='`;\n        return source;\n      },\n      lazyExec: function (data, lazyScope, tmplScope, wrapper) {\n        let $childTarget = this.firstElementChild(wrapper);\n        let $targetElement =\n          this.childElementCount(wrapper) == 1 ? $childTarget : null;\n        lazyScope.lazyEvaluateArray.forEach(function (selectedFunc, idx) {\n          selectedFunc.call($targetElement || $childTarget.parentElement, data);\n        });\n        return;\n      },\n    },\n    escape: {\n      pattern: /##-([\\s\\S]+?)##/g,\n      exec: function (escape) {\n        return (`'+\\n((__t=(${escape}))==null?'':compomint.tmplTool.escapeHtml.escape(__t))+\\n'`);\n      },\n    },\n    evaluate: {\n      pattern: /##([\\s\\S]+?)##/g,\n      exec: (evaluate) => {\n        return \"';\\n\" + evaluate + \"\\n__p+='\";\n      },\n    },\n    /*\n    normal  : {\n      pattern: /([\\s\\S]+?)/g,\n      exec: function(normal) {\n        //console.log(normal);\n        return normal.replace(escaper, escapeFunc);\n      }\n    },\n    */\n    dataKeyName: \"data\",\n    statusKeyName: \"status\",\n    componentKeyName: \"component\",\n    i18nKeyName: \"i18n\",\n  };\n  \n  let escapeHtml = (function () {\n    let escapeMap = {\n      \"&\": \"&amp;\",\n      \"<\": \"&lt;\",\n      \">\": \"&gt;\",\n      '\"': \"&quot;\",\n      \"'\": \"&#x27;\",\n      \"`\": \"&#x60;\",\n      \"\\n\": \"&#10;\",\n    };\n    let unescapeMap = (function () {\n      let unescapeMap = {};\n      Object.keys(escapeMap).forEach(function (ele) {\n        unescapeMap[escapeMap[ele]] = ele;\n      });\n      return unescapeMap;\n    })();\n\n    // from underscore.js\n    let createEscaper = function (map) {\n      let escaper = function (match) {\n        return map[match];\n      };\n      let source = `(?:${Object.keys(map).join(\"|\")})`;\n      let testRegexp = RegExp(source);\n      let replaceRegexp = RegExp(source, \"g\");\n      return function (string) {\n        string = string == null ? \"\" : `${string}`;\n        return testRegexp.test(string)\n          ? string.replace(replaceRegexp, escaper)\n          : string;\n      };\n    };\n\n    return {\n      escape: createEscaper(escapeMap),\n      unescape: createEscaper(unescapeMap),\n    };\n  })();\n  tmplTool.escapeHtml = escapeHtml;\n\n  let matcherFunc = function (settings) {\n    let patternArray = new Array();\n    let execArray = new Array();\n    let lazyExecArray = {};\n    let lazyScope = {};\n    let setting = null;\n    Object.keys(settings).forEach(function (key) {\n      setting = settings[key];\n      if (setting.pattern) {\n        patternArray.push((setting.pattern || noMatch).source);\n        execArray.push(setting.exec);\n      }\n      if (setting.lazyExec) {\n        lazyExecArray[`${key}Array`] = setting.lazyExec;\n        lazyScope[`${key}Array`] = new Array();\n      }\n    });\n    return {\n      settings: settings,\n      pattern: new RegExp(patternArray.join(\"|\"), \"g\"),\n      exec: execArray,\n      lazyExecKeys: Object.keys(lazyScope),\n      lazyExec: lazyExecArray,\n      lazyScopeSeed: JSON.stringify(lazyScope),\n    };\n  };\n\n  let escapeFunc = function (match) {\n    return escapes[match] || escapes[match.replace(/[ \\n]/g, \"\")] || \"\";\n  };\n\n  let defaultMatcher = matcherFunc(Compomint.templateSettings);\n\n  let templateParser = function (tmplId, text, matcher) {\n    if (showTime) console.time(`tmpl: ${tmplId}`);\n\n    let index = 0;\n    let source = \"\";\n\n    text.replace(matcher.pattern, function (...params) {\n      //let match = arguments[0];\n      //let offset = arguments[arguments.length-2];\n      let match = params[0];\n      let offset = params[params.length - 2];\n      source += text.slice(index, offset).replace(escaper, escapeFunc);\n      let selected,\n        i = null;\n      //Array.prototype.slice.call(arguments, 1, -2).some(function(value, idx, arr) {\n      params.slice(1, -2).some(function (value, idx, arr) {\n        if (!!value) {\n          selected = value;\n          i = idx;\n          return true;\n        }\n        return false;\n      });\n\n      if (!selected) return match;\n      source += matcher.exec[i].call(matcher.settings, selected, tmplId);\n      index = offset + match.length;\n      return match;\n    });\n\n    if (showTime) console.timeEnd(`tmpl: ${tmplId}`);\n    return source + text.slice(index).replace(escaper, escapeFunc);\n  };\n  \n  // JavaScript micro-templating, similar to John Resig's implementation.\n  let templateBuilder = (Compomint.template = function compomint_templateBuilder(\n    tmplId,\n    templateText,\n    tmplSettings\n  ) {\n    let settings = Compomint.templateSettings;\n    let matcher = defaultMatcher;\n    if (tmplSettings) {\n      settings = Object.assign({}, Compomint.templateSettings, tmplSettings);\n      matcher = matcherFunc(settings);\n    }\n    let source = `/* tmplId: ${tmplId} */\\n//# sourceURL=http://tmpl//${tmplId.split(\"-\").join(\"//\")}.js\\nlet __t,__p='';\n__p+='${templateParser(tmplId, templateText, matcher)}';\\nreturn __p;`;\n    let render = null;\n    try {\n      renderFunc = new Function(\n        settings.dataKeyName,\n        settings.statusKeyName,\n        settings.componentKeyName,\n        settings.i18nKeyName,\n        \"__lazyScope\",\n        source\n      );\n    } catch (e) {\n      let debugErrorLine = function (source, e) {\n        console.log(tmplId, e.lineNumber, e.columnNumber);\n        new Function(\n          settings.dataKeyName,\n          settings.statusKeyName,\n          settings.componentKeyName,\n          settings.i18nKeyName,\n          \"__lazyScope\",\n          source\n        );\n      };\n      if (throwError) {\n        debugErrorLine(source, e);\n        throw e;\n      } else {\n        return;\n      }\n    }\n\n    let tmpl = function compomint_tmpl(data, wrapperElement, callback, tmplScope) {\n      if (wrapperElement instanceof Function) {\n        callback = wrapperElement;\n        wrapperElement = undefined;\n      }\n\n      let dataKeyName = settings.dataKeyName;\n      let statusKeyName = settings.statusKeyName;\n      let lazyScope = JSON.parse(matcher.lazyScopeSeed);\n      tmplScope = Object.assign(tmplScope || {}, {\n        tmplId: tmplId,\n        //_id: tmplTool.genId(tmplId),\n        //[statusKeyName]: {},\n        replace: function (scope) {\n          tmplScope.element.parentElement.replaceChild(\n            scope.element || scope,\n            tmplScope.element\n          );\n        },\n        remove: function (spacer) {\n          if (tmplScope.beforeRemove) tmplScope.beforeRemove();\n          if (tmplScope.element.parentElement) {\n            if (spacer) {\n              let dumy = document.createElement(\"template\");\n              tmplScope.element.parentElement.replaceChild(\n                dumy,\n                tmplScope.element\n              );\n              tmplScope.element = dumy;\n            } else {\n              tmplScope.element.parentElement.removeChild(tmplScope.element);\n            }\n          }\n          if (tmplScope.afterRemove) tmplScope.afterRemove();\n          return tmplScope.element;\n        },\n        appendTo: function (parentElement) {\n          if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n          if (parentElement) parentElement.appendChild(tmplScope.element);\n          if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n          return tmplScope;\n        },\n      });\n      if (!tmplScope._id) {\n        tmplScope._id = tmplTool.genId(tmplId);\n      }\n      tmplScope[dataKeyName] = data;\n      if (tmplScope[statusKeyName] == undefined) tmplScope[statusKeyName] = {};\n      let hasParent = wrapperElement ? true : false;\n      let temp = document.createElement(\"template\");\n      let returnTarget = null;\n\n      if (showTime) console.time(`render: ${tmplId}`);\n\n      let html = null;\n      try {\n        html = !data\n          ? `<template></template>`\n          : renderFunc.call(\n              wrapperElement,\n              data,\n              tmplScope[statusKeyName],\n              tmplScope,\n              Compomint.i18n[tmplId],\n              lazyScope,\n            );\n      } catch (e) {\n        let debugErrorLine = function (source) {\n          console.log(`Error: ${tmplId}`);\n          renderFunc.call(\n            wrapperElement,\n            data,\n            tmplScope[statusKeyName],\n            tmplScope,\n            Compomint.i18n[tmplId],\n            lazyScope,\n          );\n        };\n        if (throwError) {\n          debugErrorLine(source, e);\n          throw e;\n        } else {\n          return;\n        }\n      }\n      if (showTime) console.timeEnd(`render: ${tmplId}`);\n\n      temp.innerHTML = html;\n\n      let docFragment = temp.content || temp;\n      if (docFragment.tagName == \"TEMPLATE\") {\n        // for IE11\n        let children = docFragment.children;\n        docFragment = document.createDocumentFragment();\n        Array.prototype.forEach.call(children, function (child) {\n          docFragment.appendChild(child);\n        });\n      }\n      let lazyExec = matcher.lazyExec;\n      if (data)\n        matcher.lazyExecKeys.forEach(function (key) {\n          if (lazyScope[key].length == 0) return;\n          lazyExec[key].call(settings, data, lazyScope, tmplScope, docFragment);\n        });\n\n      if (hasParent) {\n        while (wrapperElement.firstElementChild) {\n          wrapperElement.removeChild(wrapperElement.firstElementChild);\n        }\n        tmplScope.wrapperElement = wrapperElement;\n      }\n\n      if (docFragment.firstChild && docFragment.firstChild.nodeType == 8) {\n        returnTarget = docFragment.firstChild;\n      } else if (childElementCount(docFragment) == 1) {\n        returnTarget = firstElementChild(docFragment);\n        if (hasParent) {\n          if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n          wrapperElement.appendChild(returnTarget);\n          if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n        }\n      } else {\n        if (hasParent) {\n          if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n          wrapperElement.appendChild(docFragment);\n          if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n          returnTarget = wrapperElement;\n        } else {\n          returnTarget = docFragment;\n        }\n      }\n\n      if (data && data.$props) {\n        for (let prop in data.$props) {\n          returnTarget[prop] = data.$props[prop];\n        }\n      }\n\n      returnTarget.normalize();\n      cleanNode(returnTarget);\n      tmplScope.element = returnTarget;\n      if (tmplTool.liveReloadSupport) tmplTool.liveReloadSupport(tmplScope);\n\n      // style to shadow\n      let style = returnTarget.querySelector\n        ? returnTarget.querySelector(\"style[scoped], style[shadow]\")\n        : null;\n      if (style && returnTarget.createShadowRoot) {\n        let shadow = returnTarget.createShadowRoot();\n        document.head.appendChild(style);\n        let styles = \"\";\n        let sheet = style.sheet;\n        for (let i = 0, size = sheet.cssRules.length; i < size; i++) {\n          styles += `::content ${sheet.cssRules[i].cssText.replace(\"::content\", \"\")}`;\n        }\n        style.innerHTML = styles;\n        shadow.appendChild(style);\n        let content = document.createElement(\"content\");\n        content.setAttribute(\"select\", \"*\");\n        shadow.appendChild(content);\n      }\n\n      if (callback) {\n        callback.call(wrapperElement, tmplScope);\n      }\n\n      tmplScope.release = function () {\n        let props = Object.getOwnPropertyNames(tmplScope);\n        props.splice(props.indexOf(statusKeyName), 1);\n        for (let i = 0; i < props.length; i++) {\n          delete tmplScope[props[i]];\n        }\n      };\n\n      tmplScope.render = function (fdata) {\n        let tmplScope = this.tmplScope || this;\n        let target = tmplScope.element;\n        let tmpl = compomint.tmpl(tmplScope.tmplId);\n        let beforeRemove = tmplScope.beforeRemove;\n        let afterRemove = tmplScope.afterRemove;\n        tmplScope.element = void 0;\n        tmplScope.data = void 0;\n        tmplScope.render = void 0;\n        tmplScope.beforeRemove = void 0;\n        tmplScope.afterRemove = void 0;\n\n        if (tmplScope.wrapperElement) {\n          let wrapperElement = tmplScope.wrapperElement;\n          if (beforeRemove) beforeRemove();\n          tmplScope.release();\n          tmplScope = tmpl(fdata, wrapperElement, null, tmplScope);\n          if (afterRemove) afterRemove();\n          return tmplScope;\n        } else {\n          tmplScope.release();\n          tmplScope = tmpl(fdata, null, null, tmplScope);\n          if (target.parentElement) {\n            let newElement = tmplScope.element;\n            if (beforeRemove) beforeRemove();\n            if (tmplScope.beforeAppendTo) tmplScope.beforeAppendTo();\n            let replacedNode = target.parentElement.replaceChild(\n              newElement,\n              target\n            );\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            target = void 0;\n            if (tmplScope.afterAppendTo) tmplScope.afterAppendTo();\n            if (afterRemove) afterRemove();\n          }\n          return tmplScope;\n        }\n      };\n\n      tmplScope.refresh = function (fdata) {\n        let tmplScope = this.tmplScope || this;\n        let target = tmplScope.element;\n        let data = tmplScope.data;\n        if (tmplScope.beforeRefresh) tmplScope.beforeRefresh();\n        let scope = tmplScope.render(Object.assign(data || {}, fdata));\n        if (tmplScope.afterRefresh) tmplScope.afterRefresh();\n        return scope;\n      };\n\n      tmplScope.reflash = tmplScope.refresh;\n\n      return tmplScope;\n    };\n\n    Object.defineProperty(tmpl, \"name\", { value: tmplId, writable: false });\n    //tmpl.source = 'function ' + tmplId + '_source (' + (settings.variable || 'data') + '){\\n' + source + '}';\n    let tmpl_source = `function ${tmplId}_source (${(settings.variable || \"data\")}){\\n${source}}`;\n\n    if (tmplId) {\n      let tmplMeta = {\n        tmpl: tmpl,\n        source: escapeHtml.escape(tmpl_source),\n        templateText: escapeHtml.escape(templateText),\n      };\n      cachedTmpl.set(tmplId, tmplMeta);\n      let tmplIdNames = tmplId.split(\"-\");\n      if (tmplIdNames.length > 1) {\n        let group = tmplIdNames[0];\n        let groupObj = root.tmpl[group];\n        if (!groupObj) {\n          root.tmpl[group] = groupObj = {};\n        }\n        let tmplIdSub = tmplIdNames\n          .slice(1)\n          .join(\"\")\n          .replace(/-([a-z])/g, function (g) {\n            return g[1].toUpperCase();\n          });\n        groupObj[tmplIdSub] = tmplMeta.tmpl;\n      }\n    }\n    return tmpl;\n  });\n\n  Compomint.remapTmpl = function (json) {\n  Object.keys(json).forEach(function (key) {\n    cachedTmpl.set(json[key], cachedTmpl.get(key));\n  });\n  };\n\n  Compomint.tmpl = function (tmplId) {\n  let tmplFunc = cachedTmpl.get(tmplId);\n  return tmplFunc ? tmplFunc.tmpl : null;\n  };\n\n  let safeTemplate = function (source) {\n    let template;\n    if (source.querySelectorAll) {\n      return source;\n    } else if (isSupportTemplateTag) {\n      template = document.createElement(\"template\");\n      //template.innerHTML = source.replace(/(?<=<template[^]*?)<(?=[^]*?<\\/template>)/g, '&lt;');\n      template.innerHTML = source.replace(\n        /<(?!template|\\/template|body|\\/body|html|\\/html|head|\\/head|script|\\/script|link|\\/link|meta|\\/meta|!--)/gi,\n        \"&lt;\"\n      );\n      /*\n      template.innerHTML = source.replace(/<template([\\s\\S]*?)<\\/template>/gi, (match, p1)=>{\n        return `<template${p1.replace(/</g, '&lt;')}</template>`;\n      });\n      */\n    } else {\n      template = document.createElement(\"template\");\n      template.innerHTML = source\n        .replace(\n          /<(?!template|\\/template|body|\\/body|html|\\/html|head|\\/head|script|\\/script|link|\\/link|meta|\\/meta|!--)/gi,\n          \"&lt;\"\n        )\n        .replace(/<template/g, '<script type=\"template\"')\n        .replace(/<\\/template>/g, \"</script>\");\n    }\n    return template;\n  };\n\n  let addTmpl = (tmplTool.addTmpl = function (tmplId, element, tmplSettings) {\n    let templateText = element instanceof Element ? element.innerHTML : element;\n    templateText = escapeHtml.unescape(\n      templateText.replace(/<!---|--->/gi, \"\")\n    );\n    return templateBuilder(tmplId, templateText, tmplSettings);\n  });\n\n  let addTmpls = (tmplTool.addTmpls = function (\n    source,\n    removeInnerTemplate,\n    tmplSettings\n  ) {\n    if (typeof removeInnerTemplate !== \"boolean\" && tmplSettings == undefined)\n      tmplSettings = removeInnerTemplate;\n    let template = safeTemplate(source);\n    let tmplNodes = (template.content || template).querySelectorAll(\n      'template,script[type=\"template\"]'\n    );\n\n    let node = null;\n    for (let i = 0, size = tmplNodes.length; i < size; i++) {\n      node = tmplNodes.item(i);\n      node.dataset.coLoadScript\n        ? addTmpl(node.id, node, tmplSettings)({})\n        : addTmpl(node.id, node, tmplSettings);\n      if (removeInnerTemplate) node.parentNode.removeChild(node);\n    }\n      return template;\n    });\n\n  let addTmplByUrl = (tmplTool.addTmplByUrl = function compomint_addTmplByUrl(\n    importData,\n    option,\n    callback\n  ) {\n    if (!callback && typeof option === \"function\") {\n      callback = option;\n      option = {};\n    }\n    option = Object.assign(\n      { loadScript: true, loadStyle: true, loadLink: true },\n      option\n    );\n\n    let importDataParser = function (obj) {\n      if (typeof obj === \"string\") {\n        return { url: obj, option: option };\n      } else {\n        obj.option = Object.assign({}, option, obj.option);\n        return obj;\n      }\n    };\n    let appendToHead = function (elements) {\n      if (elements && elements.length > 0) {\n        Array.prototype.forEach.call(elements, function (element) {\n          if (element.id) {\n            let oldElement = document.getElementById(element.id);\n            if (oldElement) oldElement.parentNode.removeChild(oldElement);\n          }\n          document.body.appendChild(element);\n        });\n      }\n    };\n    let importFunc = function (source, option) {\n      let template = safeTemplate(source);\n      addTmpls(template, option.tmplSettings);\n      let content = template.content || template;\n      if (option.loadLink) {\n        let links = content.querySelectorAll(\"link\");\n        appendToHead(links);\n      }\n      if (option.loadStyle) {\n        let styles = content.querySelectorAll(\"style[id]\");\n        appendToHead(styles);\n      }\n      if (option.loadScript) {\n        let scripts = content.querySelectorAll(\n          'script[id]:not([type=\"template\"])'\n        );\n        scripts = Array.prototype.filter\n          .call(scripts, function (node) {\n            return node.innerHTML;\n          })\n          .map(function (node) {\n            let scriptText = node.innerHTML;\n            let scriptElm = document.createElement(\"script\");\n            let inlineCode = document.createTextNode(scriptText);\n            scriptElm.appendChild(inlineCode);\n            return scriptElm;\n          });\n        appendToHead(scripts);\n      }\n    };\n\n    if (Array.isArray(importData)) {\n      let arraySize = importData.length;\n      importData.forEach(function (data) {\n        data = importDataParser(data);\n        let src = data.url;\n        if (src.indexOf(\".js\") > -1) {\n          let script = tag(\"script\", { async: true, src: src });\n          script.addEventListener(\"load\", function (event) {\n            arraySize--;\n            if (arraySize == 0 && callback) callback();\n          });\n          document.head.appendChild(script);\n          if (arraySize == 0 && callback) callback();\n        } else if (src.indexOf(\".css\") > -1) {\n          let link = tag(\"link\", {\n            type: \"text/css\",\n            rel: \"stylesheet\",\n            href: src,\n          });\n          document.head.appendChild(link);\n          arraySize--;\n          if (arraySize == 0 && callback) callback();\n        } else {\n          requestFunc(data.url, null, function (source) {\n            importFunc(source, data.option);\n            arraySize--;\n            if (arraySize == 0 && callback) callback();\n          });\n        }\n      });\n    } else {\n      importData = importDataParser(importData);\n      requestFunc(importData, null, function (source) {\n        importFunc(source, importData.option);\n        if (callback) callback();\n      });\n    }\n  });\n\n  let requestFunc = function (url, option, callback) {\n    let xmlhttp = new XMLHttpRequest();\n    /*\n    let stroage = localStorage || sessionStorage;\n    if (requestCacheControl && stroage) {\n      let cacheStatus = JSON.stringify(stroage['compomint.requestCacheStatus'] || '{}');\n      let urlCacheStatus = cacheStatus[url];\n      if (urlCacheStatus) {\n        let lastModified = urlCacheStatus['Last-Modified'];\n        let eTag = urlCacheStatus['ETag'];\n\n      }\n    }\n    */\n    xmlhttp.onreadystatechange = function () {\n      if (xmlhttp.readyState == XMLHttpRequest.DONE) {\n        if (xmlhttp.status == 200 || xmlhttp.status === 0) {\n          callback(xmlhttp.responseText, xmlhttp.status, xmlhttp);\n        } else if (xmlhttp.status == 400) {\n          alert(\"There was an error 400\");\n        } else {\n          console.log(\"!200\", xmlhttp.status, url, option);\n        }\n      }\n    };\n\n    if (option) {\n      xmlhttp.open(option.method || \"GET\", url, true);\n      if (option.timeout) xmlhttp.timeout = option.timeout;\n      if (option.headers)\n        Object.keys(option.headers).forEach(function (key) {\n          xmlhttp.setRequestHeader(key, option.headers[key]);\n        });\n      xmlhttp.send(option.body);\n    } else {\n      xmlhttp.open(\"GET\", url, true);\n      xmlhttp.send();\n    }\n  };\n\n  Compomint.i18n = {};\n  tmplTool.i18n = function (i18nObj, defaultText) {\n    let label = i18nObj[document.documentElement.lang] || defaultText;\n    if (!label) {\n      if (debug)\n        console.log(\n          `Label not exist! (lang: ${document.documentElement.lang})`\n        );\n    }\n    return label;\n  };\n\n  tmplTool.addI18n = function (fullKey, i18nObj) {\n    let langKeyNames = fullKey.split(\".\");\n    let target = Compomint.i18n;\n    let keyLength = langKeyNames.length - 1;\n\n    langKeyNames.forEach(function (key, i) {\n      if (keyLength === i) {\n        if (!target[key]) {\n          target[key] = function (defaultText) {\n            let label = i18nObj[document.documentElement.lang] || defaultText;\n            if (!label) {\n              if (debug) console.log(\"Label key [\" + fullKey + \"] is empty!\");\n            }\n            return label;\n          };\n        }\n\n        Object.keys(i18nObj)\n          .filter((lang) => i18nObj[lang] instanceof Object)\n          .forEach((subKey) => {\n            tmplTool.addI18n(fullKey + \".\" + subKey, i18nObj[subKey]);\n            delete i18nObj[subKey];\n            return;\n          });\n      } else {\n        if (!target[key]) {\n          target[key] = {};\n        }\n        target = target[key];\n      }\n    });\n  };\n  tmplTool.addI18ns = function (i18nObjs) {\n    Object.keys(i18nObjs || {}).forEach(function (key) {\n      tmplTool.addI18n(key, i18nObjs[key]);\n    });\n  };\n\n  let elementCount = 0;\n  tmplTool.genId = function (tmplId) {\n    elementCount++;\n    return tmplId + elementCount;\n  };\n\n  let tag = (tmplTool.tag = function (tagName, attrs) {\n    attrs = attrs || [];\n    let element = document.createElement(tagName);\n    Object.keys(attrs).forEach(function (key) {\n      //element.setAttribute(key, attrs[key]);\n      element[key] = attrs[key];\n    });\n    return element;\n  });\n\n  tmplTool.props = function (...props) {\n    if (!props) return;\n    props = Object.assign(...props);\n    let propStrArray = [];\n    Object.keys(props).forEach(function (key) {\n      if (props[key]) propStrArray.push(key + '=\"' + props[key] + '\"');\n    });\n    return propStrArray.join(\" \");\n  };\n\n  addTmpl(\"co-Tag\", `##%compomint.tmplTool.tag(data[0], data[1])##`);\n  addTmpl(\n    \"co-Div\",\n    `&lt;div ##=data.id ? 'id=\\\"' + (data.data === true ? tmplScope._id : data.id) + '\\\"' : ''## ##=data.class ? 'class=\\\"' + data.class + '\\\"' : '' ## ##=data.style ? 'style=\\\"' + data.style + '\\\"' : '' ## data-co-event=\\\"##:data.event##\\\"&gt;\n      ##if (typeof data.content === \"string\") {##\n      ##=data.content##\n      ##} else {##\n        ##%data.content##\n      ##}##`\n  );\n\n  addTmpl(\n    \"co-Input\",\n    \"&lt;input name=\\\"##=data.name##\\\" type=\\\"##=data.type##\\\" value=\\\"##=data.value##\\\" ##=data.class ? 'class=\\\"' + data.class + '\\\"' : '' ## ##=data.style ? 'style=\\\"' + data.style + '\\\"' : '' ## data-co-event=\\\"##:data.event##\\\"/&gt;\"\n  );\n  addTmpl(\n    \"co-Select\",\n    `&lt;select name=\\\"##=data.name##\\\" value=\\\"##=data.value##\\\" ##=data.class ? 'class=\\\"' + data.class + '\\\"' : '' ## ##=data.style ? 'style=\\\"' + data.style + '\\\"' : '' ## data-co-event=\\\"##:data.event##\\\"&gt;\n      &lt;option class=\"empty\" value=\"\"&gt;##=data.placeholder##&lt;/option&gt;\n      ##%data.options.map(function(option) { '&lt;option value=\\\"' + option.value + '\\\"' + (data.value == option.value ? 'selected=\\\"\\\"' : '') + '&gt;' + option.label + '&lt;/option&gt;'})##\n      &lt;select/&gt;`\n  );\n  addTmpl(\n    \"co-Template-Viewer\",\n    `<style id=\"style-ct-Base\">\n            .ct-Base h1 {\n              font-size: 24px;\n              font-weight: bold;\n            }\n            .ct-Base h2 {\n              font-size: large;\n              font-weight: bold;\n            }\n            .ct-Base .header {\n              padding: 20px;\n              padding-bottom: 0px;\n              margin-top: 10px;\n            }\n            .ct-Base .menu {\n              margin: 10px;\n              margin-top: 50px;\n              border: 1px solid #cccccc;\n            }\n            .ct-Base .menu li {\n              padding: 10px 14px;\n            }\n            .ct-Base .templateArea {\n              margin: 10px;\n              margin-top: 50px;\n              padding: 10px;\n              border: 1px solid #cccccc\n            }\n            .ct-Base .componentView {\n              margin: 10px;\n            }\n            .ct-Base button {\n              padding: 4px 10px;\n              margin: 4px;\n              border-radius: 0.5rem;\n              border: 1px solid #cccccc;\n            }\n            .ct-Base .hide {\n              display: none;\n            }\n            .ct-Base .templateText :not(pre)>code[class*=language-],\n            .ct-Base .templateText pre[class*=language-] {\n              background: #66990015;\n            }\n            .ct-Base .source :not(pre)>code[class*=language-],\n            .ct-Base .source  pre[class*=language-] {\n              background: #0077aa15;\n            }\n          </style>\n          ##\n          let components = data.components;\n          ##\n          <div class=\"ct-Base\">\n            <div class=\"header\">\n              <h1>##=data.label##</h1>\n              <span>##=data.description##</span>\n            </div>\n            <div style=\"display: flex; gap: 8px;\">\n              <ul class=\"menu\" style=\"\">\n                ##Object.keys(components).forEach(key => {##\n                  <li class=\"\"><a href=\"##='#'+key##\">##=key##</a></li>\n                ##})##\n              </ul>\n              <div class=\"content\">\n                ##Object.keys(components).forEach(key => {\n                  let componentScopes = components[key];\n                  let templateMeta = compomint.tmplCache.get(key);\n                ##\n                <div class=\"templateArea\" id=\"##=key##\" style=\"##=location.hash == '' || location.hash == ('#' + key) ? '' : 'display: none'##;\">\n                  <h2><a href=\"##='#'+key##\">##=key##</a></h2>\n                  ##if (templateMeta) {##\n                  <div style=\"display: flex; gap: 8px;\">\n                    <button data-co-event=\"##:() => templateText.classList.toggle('hide')##\">Template source</button>\n                    <button data-co-event=\"##:() => source.classList.toggle('hide')##\">Compiled source</button>\n                  </div>\n                  <hr>\n                  <div class=\"templateText hide\" data-co-element-ref=\"##:templateText##\">\n                    <h2>Template source</h2>\n                    <pre><code class=\"language-javascript\">##=templateMeta.templateText##</code></pre>\n                  </div>\n                  <hr>\n                  <div class=\"source hide\" data-co-element-ref=\"##:source##\">\n                    <h2>Compiled source</h2>\n                    <pre><code class=\"language-javascript\">##=templateMeta.source##</code></pre>\n                  </div>\n                  ##}##\n\n                  ##componentScopes.forEach(scope => {##\n                  <hr>\n                  <div class=\"componentView\">\n                    <pre><code class=\"language-javascript\">##%scope##</code></pre>\n                    ##%new Function('return '+scope+';')()##\n                  </div>\n                  <hr>\n                  ##})##\n                </div>\n                ##})##\n              </div>\n            </div>\n          </div>\n          ###\n          setTimeout(() => {\n            const anchor = document.getElementById(location.hash.replace('#', ''));\n            if (anchor) {\n              window.scrollTo({\n                top: anchor.getBoundingClientRect().top + window.scrollY,\n              })\n            }\n          });\n          window.onhashchange = () => location.reload();\n          ##`\n  );\n  return { compomint: root.compomint, tmpl: root.tmpl };\n}).call(this);"],"names":["Object","assign","defineProperty","value","target","TypeError","to","index","length","arguments","nextSource","undefined","nextKey","prototype","hasOwnProperty","call","writable","configurable","arr","forEach","item","enumerable","remove","parentNode","removeChild","Element","CharacterData","DocumentType","supported","window","Node","get","document","body","contains","root","Compomint","compomint","tmplTool","showTime","debug","requestCacheControl","throwError","cachedTmpl","tmplCache","Map","has","set","elements","Set","isSupportTemplateTag","createElement","tmpl","noMatch","escapes","escaper","firstElementChild","ele","children","childNodes","i","size","childElementCount","Array","filter","child","cleanNode","node","n","nodeType","test","nodeValue","templateSettings","style","pattern","exec","dumy","innerHTML","styleNode","content","querySelector","oldStyleNode","getElementById","id","head","appendChild","commentArea","concat","preEvaluate","tmplId","Function","interpolate","interpolateSyntax","namedElement","key","source","lazyExec","data","lazyScope","tmplScope","wrapper","namedElementArray","eventId","$elementTrigger","dataset","coNamedElement","elementRef","elementRefArray","func","coVar","elementLoad","elementLoadSplitArray","split","elementLoadArray","coLoad","parentElement","loadFunc","customData","event","eventStrArray","eventArray","eventSplitArray","push","join","self","attacher","selectedArray","coEvent","_loop","selected","eventFunc","trigger","eventName","customEvent","Event","bubbles","cancelable","dispatchEvent","eventData","$childTarget","$targetElement","eventFuncParams","addEventListener","stopPropagation","apply","triggerKey","keys","eventType","_eventFunc$eventType","_eventFunc$eventType2","element","elementSplitArray","elementArray","elementId","childTarget","nonblocking","$tmplElement","docFragment","createDocumentFragment","childElement","stringToElement","beforeAppendTo","parent","parentScope","replaceChild","afterAppendTo","setTimeout","doFunc","node1","DocumentFragment","firstChild","str","isNaN","createTextNode","startsWith","temp","replace","lazyEvaluate","lazyEvaluateArray","selectedFunc","idx","escape","evaluate","dataKeyName","statusKeyName","componentKeyName","i18nKeyName","escapeHtml","escapeMap","unescapeMap","createEscaper","map","match","testRegexp","RegExp","replaceRegexp","string","unescape","matcherFunc","settings","patternArray","execArray","lazyExecArray","setting","lazyExecKeys","lazyScopeSeed","JSON","stringify","escapeFunc","defaultMatcher","templateParser","text","matcher","console","time","_len","params","_key","offset","slice","some","timeEnd","templateBuilder","template","compomint_templateBuilder","templateText","tmplSettings","renderFunc","e","debugErrorLine","log","lineNumber","columnNumber","compomint_tmpl","wrapperElement","callback","parse","scope","spacer","beforeRemove","afterRemove","appendTo","_id","genId","hasParent","returnTarget","html","i18n","tagName","$props","prop","normalize","liveReloadSupport","createShadowRoot","shadow","styles","sheet","cssRules","cssText","setAttribute","release","props","getOwnPropertyNames","splice","indexOf","render","fdata","newElement","refresh","beforeRefresh","afterRefresh","reflash","tmpl_source","variable","tmplMeta","tmplIdNames","group","groupObj","tmplIdSub","g","toUpperCase","remapTmpl","json","tmplFunc","safeTemplate","querySelectorAll","addTmpl","addTmpls","removeInnerTemplate","tmplNodes","coLoadScript","addTmplByUrl","compomint_addTmplByUrl","importData","option","loadScript","loadStyle","loadLink","importDataParser","obj","url","appendToHead","oldElement","importFunc","links","scripts","scriptText","scriptElm","inlineCode","isArray","arraySize","src","script","tag","async","link","type","rel","href","requestFunc","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","DONE","status","responseText","alert","open","method","timeout","headers","setRequestHeader","send","i18nObj","defaultText","label","documentElement","lang","addI18n","fullKey","langKeyNames","keyLength","subKey","addI18ns","i18nObjs","elementCount","attrs","_len2","_key2","_toConsumableArray","propStrArray","this"],"mappings":"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"}